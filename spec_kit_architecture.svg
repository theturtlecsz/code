<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (0)
 -->
<!-- Title: SpecKitArchitecture Pages: 1 -->
<svg width="3152pt" height="1109pt"
 viewBox="0.00 0.00 3152.00 1109.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1104.99)">
<title>SpecKitArchitecture</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1104.99 3148.12,-1104.99 3148.12,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_upstream</title>
<polygon fill="lightyellow" stroke="black" points="1271,-954.11 1271,-1064.13 1899,-1064.13 1899,-954.11 1271,-954.11"/>
<text xml:space="preserve" text-anchor="middle" x="1585" y="-1046.83" font-family="Times,serif" font-size="14.00">Upstream Integration (Minimal Touch)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_routing</title>
<polygon fill="lightcyan" stroke="black" points="702,-381.74 702,-880.74 1448,-880.74 1448,-381.74 702,-381.74"/>
<text xml:space="preserve" text-anchor="middle" x="1075" y="-863.44" font-family="Times,serif" font-size="14.00">Command Routing Layer (1,100 LOC)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_commands</title>
<polygon fill="none" stroke="black" stroke-dasharray="5,2" points="710,-389.74 710,-464.49 1440,-464.49 1440,-389.74 710,-389.74"/>
<text xml:space="preserve" text-anchor="middle" x="1075" y="-447.19" font-family="Times,serif" font-size="14.00">Command Implementations</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_orchestration</title>
<polygon fill="lightgreen" stroke="black" points="2578,-232.87 2578,-472.37 2936,-472.37 2936,-232.87 2578,-232.87"/>
<text xml:space="preserve" text-anchor="middle" x="2757" y="-455.07" font-family="Times,serif" font-size="14.00">Core Orchestration Layer (2,800 LOC)</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_ace</title>
<polygon fill="mistyrose" stroke="black" points="8,-144.37 8,-751.62 528,-751.62 528,-144.37 8,-144.37"/>
<text xml:space="preserve" text-anchor="middle" x="268" y="-734.32" font-family="Times,serif" font-size="14.00">ACE Subsystem (3,700 LOC)</text>
<text xml:space="preserve" text-anchor="middle" x="268" y="-720.07" font-family="Times,serif" font-size="14.00">Complex Task Routing &amp; Learning</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_consensus</title>
<polygon fill="lightsteelblue" stroke="black" points="2738,-532.37 2738,-738.12 2996,-738.12 2996,-532.37 2738,-532.37"/>
<text xml:space="preserve" text-anchor="middle" x="2867" y="-720.82" font-family="Times,serif" font-size="14.00">Consensus &amp; Quality Layer (2,800 LOC)</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_infra</title>
<polygon fill="lavender" stroke="black" points="1456,-647.62 1456,-738.12 2378,-738.12 2378,-647.62 1456,-647.62"/>
<text xml:space="preserve" text-anchor="middle" x="1917" y="-720.82" font-family="Times,serif" font-size="14.00">Supporting Infrastructure (2,800 LOC)</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_types</title>
<polygon fill="lightgoldenrodyellow" stroke="black" points="2128,-232.87 2128,-321.87 2328,-321.87 2328,-232.87 2128,-232.87"/>
<text xml:space="preserve" text-anchor="middle" x="2228" y="-304.57" font-family="Times,serif" font-size="14.00">Foundation Types (650 LOC)</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_external</title>
<polygon fill="white" stroke="black" points="1298,-8 1298,-97.87 1772,-97.87 1772,-8 1298,-8"/>
<text xml:space="preserve" text-anchor="middle" x="1535" y="-80.57" font-family="Times,serif" font-size="14.00">External MCP Servers</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_separate</title>
<polygon fill="none" stroke="black" stroke-dasharray="5,2" points="2171,-382.62 2171,-485.87 2538,-485.87 2538,-382.62 2171,-382.62"/>
<text xml:space="preserve" text-anchor="middle" x="2354.5" y="-468.57" font-family="Times,serif" font-size="14.00">Separate spec&#45;kit Crate (422 LOC)</text>
<text xml:space="preserve" text-anchor="middle" x="2354.5" y="-454.32" font-family="Times,serif" font-size="14.00">Foundation for MAINT&#45;10</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_legend</title>
<polygon fill="white" stroke="black" points="2710,-925.24 2710,-1092.99 2960,-1092.99 2960,-925.24 2710,-925.24"/>
<text xml:space="preserve" text-anchor="middle" x="2835" y="-1075.69" font-family="Times,serif" font-size="14.00">Legend (Fork&#45;Specific Code Only)</text>
</g>
<!-- ChatWidget -->
<g id="node1" class="node">
<title>ChatWidget</title>
<ellipse fill="white" stroke="black" cx="1590" cy="-997.99" rx="88.74" ry="35.89"/>
<text xml:space="preserve" text-anchor="middle" x="1590" y="-1006.07" font-family="Times,serif" font-size="14.00">ChatWidget</text>
<text xml:space="preserve" text-anchor="middle" x="1590" y="-991.82" font-family="Times,serif" font-size="14.00">(upstream)</text>
<text xml:space="preserve" text-anchor="middle" x="1590" y="-977.57" font-family="Times,serif" font-size="14.00">spec_kit submodule</text>
</g>
<!-- Handler -->
<g id="node4" class="node">
<title>Handler</title>
<polygon fill="red" stroke="black" points="1439.62,-850.49 1322.38,-850.49 1322.38,-798.24 1439.62,-798.24 1439.62,-850.49"/>
<text xml:space="preserve" text-anchor="middle" x="1381" y="-833.19" font-family="Times,serif" font-size="14.00" fill="white">handler.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1381" y="-818.94" font-family="Times,serif" font-size="14.00" fill="white">1,561 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="1381" y="-804.69" font-family="Times,serif" font-size="14.00" fill="white">⚠️ NEEDS SPLIT</text>
</g>
<!-- ChatWidget&#45;&gt;Handler -->
<g id="edge41" class="edge">
<title>ChatWidget&#45;&gt;Handler</title>
<path fill="none" stroke="blue" stroke-width="2" d="M1535.82,-969.4C1535.82,-925.38 1535.82,-846 1535.82,-846 1535.82,-846 1453,-846 1453,-846"/>
<polygon fill="blue" stroke="blue" stroke-width="2" points="1453,-842.5 1443,-846 1453,-849.5 1453,-842.5"/>
<text xml:space="preserve" text-anchor="middle" x="1578.5" y="-889.69" font-family="Times,serif" font-size="14.00">invoke /speckit.*</text>
</g>
<!-- AppState -->
<g id="node2" class="node">
<title>AppState</title>
<ellipse fill="white" stroke="black" cx="1381" cy="-997.99" rx="102" ry="35.89"/>
<text xml:space="preserve" text-anchor="middle" x="1381" y="-1006.07" font-family="Times,serif" font-size="14.00">App State</text>
<text xml:space="preserve" text-anchor="middle" x="1381" y="-991.82" font-family="Times,serif" font-size="14.00">(upstream)</text>
<text xml:space="preserve" text-anchor="middle" x="1381" y="-977.57" font-family="Times,serif" font-size="14.00">slash command routing</text>
</g>
<!-- AppState&#45;&gt;Handler -->
<g id="edge42" class="edge">
<title>AppState&#45;&gt;Handler</title>
<path fill="none" stroke="blue" stroke-width="2" d="M1381,-962.02C1381,-962.02 1381,-863.98 1381,-863.98"/>
<polygon fill="blue" stroke="blue" stroke-width="2" points="1384.5,-863.98 1381,-853.98 1377.5,-863.98 1384.5,-863.98"/>
<text xml:space="preserve" text-anchor="middle" x="1415.88" y="-889.69" font-family="Times,serif" font-size="14.00">slash routing</text>
</g>
<!-- SlashCommand -->
<g id="node3" class="node">
<title>SlashCommand</title>
<ellipse fill="white" stroke="black" cx="1794" cy="-997.99" rx="97.23" ry="35.89"/>
<text xml:space="preserve" text-anchor="middle" x="1794" y="-1006.07" font-family="Times,serif" font-size="14.00">SlashCommand enum</text>
<text xml:space="preserve" text-anchor="middle" x="1794" y="-991.82" font-family="Times,serif" font-size="14.00">(upstream)</text>
<text xml:space="preserve" text-anchor="middle" x="1794" y="-977.57" font-family="Times,serif" font-size="14.00">+26 SpecKit variants</text>
</g>
<!-- Routing -->
<g id="node6" class="node">
<title>Routing</title>
<polygon fill="lightgreen" stroke="black" points="1256.25,-583.99 1187.75,-583.99 1187.75,-547.49 1256.25,-547.49 1256.25,-583.99"/>
<text xml:space="preserve" text-anchor="middle" x="1222" y="-566.69" font-family="Times,serif" font-size="14.00">routing.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1222" y="-552.44" font-family="Times,serif" font-size="14.00">205 LOC</text>
</g>
<!-- SlashCommand&#45;&gt;Routing -->
<g id="edge43" class="edge">
<title>SlashCommand&#45;&gt;Routing</title>
<path fill="none" stroke="black" d="M1712.25,-978.3C1712.25,-894.52 1712.25,-572 1712.25,-572 1712.25,-572 1267.99,-572 1267.99,-572"/>
<polygon fill="black" stroke="black" points="1267.99,-568.5 1257.99,-572 1267.99,-575.5 1267.99,-568.5"/>
<text xml:space="preserve" text-anchor="middle" x="2618.62" y="-760.57" font-family="Times,serif" font-size="14.00">command enum</text>
</g>
<!-- CommandRegistry -->
<g id="node5" class="node">
<title>CommandRegistry</title>
<polygon fill="yellow" stroke="black" points="1364.12,-699.99 1231.88,-699.99 1231.88,-663.49 1364.12,-663.49 1364.12,-699.99"/>
<text xml:space="preserve" text-anchor="middle" x="1298" y="-682.69" font-family="Times,serif" font-size="14.00">command_registry.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1298" y="-668.44" font-family="Times,serif" font-size="14.00">537 LOC</text>
</g>
<!-- Handler&#45;&gt;CommandRegistry -->
<g id="edge1" class="edge">
<title>Handler&#45;&gt;CommandRegistry</title>
<path fill="none" stroke="black" d="M1350.21,-797.88C1350.21,-797.88 1350.21,-711.88 1350.21,-711.88"/>
<polygon fill="black" stroke="black" points="1353.71,-711.88 1350.21,-701.88 1346.71,-711.88 1353.71,-711.88"/>
<text xml:space="preserve" text-anchor="middle" x="1400.5" y="-760.57" font-family="Times,serif" font-size="14.00">dispatch</text>
</g>
<!-- StateMachine -->
<g id="node12" class="node">
<title>StateMachine</title>
<polygon fill="orange" stroke="black" points="2767.88,-442.12 2586.12,-442.12 2586.12,-389.87 2767.88,-389.87 2767.88,-442.12"/>
<text xml:space="preserve" text-anchor="middle" x="2677" y="-424.82" font-family="Times,serif" font-size="14.00">state.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2677" y="-410.57" font-family="Times,serif" font-size="14.00">932 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2677" y="-396.32" font-family="Times,serif" font-size="14.00">⚠️ SPLIT RECOMMENDED</text>
</g>
<!-- Handler&#45;&gt;StateMachine -->
<g id="edge8" class="edge">
<title>Handler&#45;&gt;StateMachine</title>
<path fill="none" stroke="black" d="M1439.71,-831C1700.01,-831 2737.19,-831 2737.19,-831 2737.19,-831 2737.19,-454.1 2737.19,-454.1"/>
<polygon fill="black" stroke="black" points="2740.69,-454.1 2737.19,-444.1 2733.69,-454.1 2740.69,-454.1"/>
<text xml:space="preserve" text-anchor="middle" x="2466.38" y="-624.32" font-family="Times,serif" font-size="14.00">state mgmt</text>
</g>
<!-- QualityGateHandler -->
<g id="node13" class="node">
<title>QualityGateHandler</title>
<polygon fill="red" stroke="black" points="2928.38,-442.12 2785.62,-442.12 2785.62,-389.87 2928.38,-389.87 2928.38,-442.12"/>
<text xml:space="preserve" text-anchor="middle" x="2857" y="-424.82" font-family="Times,serif" font-size="14.00" fill="white">quality_gate_handler.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2857" y="-410.57" font-family="Times,serif" font-size="14.00" fill="white">1,254 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2857" y="-396.32" font-family="Times,serif" font-size="14.00" fill="white">⚠️ NEEDS SPLIT</text>
</g>
<!-- Handler&#45;&gt;QualityGateHandler -->
<g id="edge9" class="edge">
<title>Handler&#45;&gt;QualityGateHandler</title>
<path fill="none" stroke="black" d="M1436,-797.93C1436,-719.08 1436,-491 1436,-491 1436,-491 2811.75,-491 2811.75,-491 2811.75,-491 2811.75,-453.74 2811.75,-453.74"/>
<polygon fill="black" stroke="black" points="2815.25,-453.74 2811.75,-443.74 2808.25,-453.74 2815.25,-453.74"/>
<text xml:space="preserve" text-anchor="middle" x="2554.5" y="-624.32" font-family="Times,serif" font-size="14.00">quality gates</text>
</g>
<!-- ACERouter -->
<g id="node16" class="node">
<title>ACERouter</title>
<polygon fill="orange" stroke="black" points="502,-707.12 372,-707.12 372,-656.37 502,-656.37 502,-707.12"/>
<text xml:space="preserve" text-anchor="middle" x="437" y="-689.82" font-family="Times,serif" font-size="14.00">ace_route_selector.rs</text>
<text xml:space="preserve" text-anchor="middle" x="437" y="-675.57" font-family="Times,serif" font-size="14.00">766 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="437" y="-661.32" font-family="Times,serif" font-size="14.00">Complexity routing</text>
</g>
<!-- Handler&#45;&gt;ACERouter -->
<g id="edge12" class="edge">
<title>Handler&#45;&gt;ACERouter</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1336.29,-797.88C1336.29,-762.71 1336.29,-705 1336.29,-705 1336.29,-705 513.91,-705 513.91,-705"/>
<polygon fill="black" stroke="black" points="513.91,-701.5 503.91,-705 513.91,-708.5 513.91,-701.5"/>
<text xml:space="preserve" text-anchor="middle" x="921.25" y="-760.57" font-family="Times,serif" font-size="14.00">route decision</text>
</g>
<!-- Consensus -->
<g id="node24" class="node">
<title>Consensus</title>
<polygon fill="red" stroke="black" points="2927.88,-707.87 2746.12,-707.87 2746.12,-655.62 2927.88,-655.62 2927.88,-707.87"/>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-690.57" font-family="Times,serif" font-size="14.00" fill="white">consensus.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-676.32" font-family="Times,serif" font-size="14.00" fill="white">1,052 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-662.07" font-family="Times,serif" font-size="14.00" fill="white">⚠️ SPLIT RECOMMENDED</text>
</g>
<!-- Handler&#45;&gt;Consensus -->
<g id="edge21" class="edge">
<title>Handler&#45;&gt;Consensus</title>
<path fill="none" stroke="black" d="M1439.9,-836C1702.27,-836 2751.75,-836 2751.75,-836 2751.75,-836 2751.75,-719.77 2751.75,-719.77"/>
<polygon fill="black" stroke="black" points="2755.25,-719.77 2751.75,-709.77 2748.25,-719.77 2755.25,-719.77"/>
<text xml:space="preserve" text-anchor="middle" x="2519.5" y="-760.57" font-family="Times,serif" font-size="14.00">multi&#45;agent</text>
</g>
<!-- Evidence -->
<g id="node27" class="node">
<title>Evidence</title>
<polygon fill="orange" stroke="black" points="1703.12,-707.12 1588.88,-707.12 1588.88,-656.37 1703.12,-656.37 1703.12,-707.12"/>
<text xml:space="preserve" text-anchor="middle" x="1646" y="-689.82" font-family="Times,serif" font-size="14.00">evidence.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1646" y="-675.57" font-family="Times,serif" font-size="14.00">691 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="1646" y="-661.32" font-family="Times,serif" font-size="14.00">Storage/collection</text>
</g>
<!-- Handler&#45;&gt;Evidence -->
<g id="edge25" class="edge">
<title>Handler&#45;&gt;Evidence</title>
<path fill="none" stroke="black" d="M1439.95,-803C1514.66,-803 1633.81,-803 1633.81,-803 1633.81,-803 1633.81,-718.97 1633.81,-718.97"/>
<polygon fill="black" stroke="black" points="1637.31,-718.97 1633.81,-708.97 1630.31,-718.97 1637.31,-718.97"/>
<text xml:space="preserve" text-anchor="middle" x="1621" y="-760.57" font-family="Times,serif" font-size="14.00">collect</text>
</g>
<!-- Guardrail -->
<g id="node28" class="node">
<title>Guardrail</title>
<polygon fill="orange" stroke="black" points="1570.38,-707.12 1463.62,-707.12 1463.62,-656.37 1570.38,-656.37 1570.38,-707.12"/>
<text xml:space="preserve" text-anchor="middle" x="1517" y="-689.82" font-family="Times,serif" font-size="14.00">guardrail.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1517" y="-675.57" font-family="Times,serif" font-size="14.00">672 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="1517" y="-661.32" font-family="Times,serif" font-size="14.00">Shell integration</text>
</g>
<!-- Handler&#45;&gt;Guardrail -->
<g id="edge26" class="edge">
<title>Handler&#45;&gt;Guardrail</title>
<path fill="none" stroke="black" d="M1437.81,-797.82C1437.81,-761.83 1437.81,-702 1437.81,-702 1437.81,-702 1451.79,-702 1451.79,-702"/>
<polygon fill="black" stroke="black" points="1451.79,-705.5 1461.79,-702 1451.79,-698.5 1451.79,-705.5"/>
<text xml:space="preserve" text-anchor="middle" x="1509" y="-760.57" font-family="Times,serif" font-size="14.00">shell exec</text>
</g>
<!-- FileModifier -->
<g id="node29" class="node">
<title>FileModifier</title>
<polygon fill="yellow" stroke="black" points="1820.62,-707.12 1721.38,-707.12 1721.38,-656.37 1820.62,-656.37 1820.62,-707.12"/>
<text xml:space="preserve" text-anchor="middle" x="1771" y="-689.82" font-family="Times,serif" font-size="14.00">file_modifier.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1771" y="-675.57" font-family="Times,serif" font-size="14.00">554 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="1771" y="-661.32" font-family="Times,serif" font-size="14.00">File operations</text>
</g>
<!-- Handler&#45;&gt;FileModifier -->
<g id="edge27" class="edge">
<title>Handler&#45;&gt;FileModifier</title>
<path fill="none" stroke="black" d="M1439.81,-808C1548.76,-808 1771,-808 1771,-808 1771,-808 1771,-719.11 1771,-719.11"/>
<polygon fill="black" stroke="black" points="1774.5,-719.11 1771,-709.11 1767.5,-719.11 1774.5,-719.11"/>
<text xml:space="preserve" text-anchor="middle" x="1748.12" y="-760.57" font-family="Times,serif" font-size="14.00">update files</text>
</g>
<!-- CostTracker -->
<g id="node30" class="node">
<title>CostTracker</title>
<polygon fill="yellow" stroke="black" points="1942.88,-707.12 1839.12,-707.12 1839.12,-656.37 1942.88,-656.37 1942.88,-707.12"/>
<text xml:space="preserve" text-anchor="middle" x="1891" y="-689.82" font-family="Times,serif" font-size="14.00">cost_tracker.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1891" y="-675.57" font-family="Times,serif" font-size="14.00">537 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="1891" y="-661.32" font-family="Times,serif" font-size="14.00">Budget tracking</text>
</g>
<!-- Handler&#45;&gt;CostTracker -->
<g id="edge28" class="edge">
<title>Handler&#45;&gt;CostTracker</title>
<path fill="none" stroke="black" d="M1439.89,-812C1568.92,-812 1865.18,-812 1865.18,-812 1865.18,-812 1865.18,-718.99 1865.18,-718.99"/>
<polygon fill="black" stroke="black" points="1868.68,-718.99 1865.18,-708.99 1861.68,-718.99 1868.68,-718.99"/>
<text xml:space="preserve" text-anchor="middle" x="1878.12" y="-760.57" font-family="Times,serif" font-size="14.00">track spend</text>
</g>
<!-- SpecIDGen -->
<g id="node31" class="node">
<title>SpecIDGen</title>
<polygon fill="lightgreen" stroke="black" points="2088.88,-707.12 1961.12,-707.12 1961.12,-656.37 2088.88,-656.37 2088.88,-707.12"/>
<text xml:space="preserve" text-anchor="middle" x="2025" y="-689.82" font-family="Times,serif" font-size="14.00">spec_id_generator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2025" y="-675.57" font-family="Times,serif" font-size="14.00">189 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2025" y="-661.32" font-family="Times,serif" font-size="14.00">Native SPEC&#45;ID</text>
</g>
<!-- Handler&#45;&gt;SpecIDGen -->
<g id="edge29" class="edge">
<title>Handler&#45;&gt;SpecIDGen</title>
<path fill="none" stroke="black" d="M1439.86,-817C1598.84,-817 2025,-817 2025,-817 2025,-817 2025,-719.02 2025,-719.02"/>
<polygon fill="black" stroke="black" points="2028.5,-719.02 2025,-709.02 2021.5,-719.02 2028.5,-719.02"/>
<text xml:space="preserve" text-anchor="middle" x="2013.5" y="-760.57" font-family="Times,serif" font-size="14.00">generate IDs</text>
</g>
<!-- ConfigValidator -->
<g id="node32" class="node">
<title>ConfigValidator</title>
<polygon fill="lightpink" stroke="black" points="2224.62,-707.87 2107.38,-707.87 2107.38,-655.62 2224.62,-655.62 2224.62,-707.87"/>
<text xml:space="preserve" text-anchor="middle" x="2166" y="-690.57" font-family="Times,serif" font-size="14.00">config_validator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2166" y="-676.32" font-family="Times,serif" font-size="14.00">327 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2166" y="-662.07" font-family="Times,serif" font-size="14.00">❓ Low usage</text>
</g>
<!-- Handler&#45;&gt;ConfigValidator -->
<g id="edge30" class="edge">
<title>Handler&#45;&gt;ConfigValidator</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M1440,-822C1622.56,-822 2166,-822 2166,-822 2166,-822 2166,-719.64 2166,-719.64"/>
<polygon fill="black" stroke="black" points="2169.5,-719.64 2166,-709.64 2162.5,-719.64 2169.5,-719.64"/>
<text xml:space="preserve" text-anchor="middle" x="2140.38" y="-760.57" font-family="Times,serif" font-size="14.00">validate</text>
</g>
<!-- SubagentDefaults -->
<g id="node33" class="node">
<title>SubagentDefaults</title>
<polygon fill="lightpink" stroke="black" points="2369.5,-707.87 2242.5,-707.87 2242.5,-655.62 2369.5,-655.62 2369.5,-707.87"/>
<text xml:space="preserve" text-anchor="middle" x="2306" y="-690.57" font-family="Times,serif" font-size="14.00">subagent_defaults.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2306" y="-676.32" font-family="Times,serif" font-size="14.00">134 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2306" y="-662.07" font-family="Times,serif" font-size="14.00">❓ Low usage</text>
</g>
<!-- Handler&#45;&gt;SubagentDefaults -->
<g id="edge31" class="edge">
<title>Handler&#45;&gt;SubagentDefaults</title>
<path fill="none" stroke="gray" stroke-dasharray="1,5" d="M1439.92,-827C1643.66,-827 2306,-827 2306,-827 2306,-827 2306,-719.56 2306,-719.56"/>
<polygon fill="gray" stroke="gray" points="2309.5,-719.56 2306,-709.56 2302.5,-719.56 2309.5,-719.56"/>
</g>
<!-- ErrorTypes -->
<g id="node34" class="node">
<title>ErrorTypes</title>
<polygon fill="lightgreen" stroke="black" points="2225.75,-291.62 2136.25,-291.62 2136.25,-240.87 2225.75,-240.87 2225.75,-291.62"/>
<text xml:space="preserve" text-anchor="middle" x="2181" y="-274.32" font-family="Times,serif" font-size="14.00">error.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2181" y="-260.07" font-family="Times,serif" font-size="14.00">279 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2181" y="-245.82" font-family="Times,serif" font-size="14.00">SpecKitError</text>
</g>
<!-- Handler&#45;&gt;ErrorTypes -->
<g id="edge32" class="edge">
<title>Handler&#45;&gt;ErrorTypes</title>
<path fill="none" stroke="black" d="M1434.19,-798.04C1434.19,-689.95 1434.19,-286 1434.19,-286 1434.19,-286 2124.45,-286 2124.45,-286"/>
<polygon fill="black" stroke="black" points="2124.45,-289.5 2134.45,-286 2124.45,-282.5 2124.45,-289.5"/>
</g>
<!-- CommandRegistry&#45;&gt;Routing -->
<g id="edge2" class="edge">
<title>CommandRegistry&#45;&gt;Routing</title>
<path fill="none" stroke="black" d="M1244.06,-663.11C1244.06,-663.11 1244.06,-595.85 1244.06,-595.85"/>
<polygon fill="black" stroke="black" points="1247.56,-595.85 1244.06,-585.85 1240.56,-595.85 1247.56,-595.85"/>
</g>
<!-- CmdSpecial -->
<g id="node7" class="node">
<title>CmdSpecial</title>
<polygon fill="lightgreen" stroke="black" points="1432.38,-434.24 1301.62,-434.24 1301.62,-397.74 1432.38,-397.74 1432.38,-434.24"/>
<text xml:space="preserve" text-anchor="middle" x="1367" y="-416.94" font-family="Times,serif" font-size="14.00">commands/special.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1367" y="-402.69" font-family="Times,serif" font-size="14.00">393 LOC</text>
</g>
<!-- Routing&#45;&gt;CmdSpecial -->
<g id="edge3" class="edge">
<title>Routing&#45;&gt;CmdSpecial</title>
<path fill="none" stroke="black" d="M1256.47,-560C1289.02,-560 1332.88,-560 1332.88,-560 1332.88,-560 1332.88,-446.04 1332.88,-446.04"/>
<polygon fill="black" stroke="black" points="1336.38,-446.04 1332.88,-436.04 1329.38,-446.04 1336.38,-446.04"/>
</g>
<!-- CmdGuardrail -->
<g id="node8" class="node">
<title>CmdGuardrail</title>
<polygon fill="lightgreen" stroke="black" points="860,-434.24 718,-434.24 718,-397.74 860,-397.74 860,-434.24"/>
<text xml:space="preserve" text-anchor="middle" x="789" y="-416.94" font-family="Times,serif" font-size="14.00">commands/guardrail.rs</text>
<text xml:space="preserve" text-anchor="middle" x="789" y="-402.69" font-family="Times,serif" font-size="14.00">308 LOC</text>
</g>
<!-- Routing&#45;&gt;CmdGuardrail -->
<g id="edge4" class="edge">
<title>Routing&#45;&gt;CmdGuardrail</title>
<path fill="none" stroke="black" d="M1187.3,-577C1084.55,-577 789,-577 789,-577 789,-577 789,-445.98 789,-445.98"/>
<polygon fill="black" stroke="black" points="792.5,-445.98 789,-435.98 785.5,-445.98 792.5,-445.98"/>
</g>
<!-- CmdPlan -->
<g id="node9" class="node">
<title>CmdPlan</title>
<polygon fill="lightgreen" stroke="black" points="994.25,-434.24 877.75,-434.24 877.75,-397.74 994.25,-397.74 994.25,-434.24"/>
<text xml:space="preserve" text-anchor="middle" x="936" y="-416.94" font-family="Times,serif" font-size="14.00">commands/plan.rs</text>
<text xml:space="preserve" text-anchor="middle" x="936" y="-402.69" font-family="Times,serif" font-size="14.00">193 LOC</text>
</g>
<!-- Routing&#45;&gt;CmdPlan -->
<g id="edge5" class="edge">
<title>Routing&#45;&gt;CmdPlan</title>
<path fill="none" stroke="black" d="M1187.5,-569C1111.43,-569 936,-569 936,-569 936,-569 936,-445.96 936,-445.96"/>
<polygon fill="black" stroke="black" points="939.5,-445.96 936,-435.96 932.5,-445.96 939.5,-445.96"/>
</g>
<!-- CmdQuality -->
<g id="node10" class="node">
<title>CmdQuality</title>
<polygon fill="lightgreen" stroke="black" points="1142,-434.24 1012,-434.24 1012,-397.74 1142,-397.74 1142,-434.24"/>
<text xml:space="preserve" text-anchor="middle" x="1077" y="-416.94" font-family="Times,serif" font-size="14.00">commands/quality.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1077" y="-402.69" font-family="Times,serif" font-size="14.00">103 LOC</text>
</g>
<!-- Routing&#45;&gt;CmdQuality -->
<g id="edge6" class="edge">
<title>Routing&#45;&gt;CmdQuality</title>
<path fill="none" stroke="black" d="M1187.27,-562C1144.37,-562 1077,-562 1077,-562 1077,-562 1077,-446 1077,-446"/>
<polygon fill="black" stroke="black" points="1080.5,-446 1077,-436 1073.5,-446 1080.5,-446"/>
</g>
<!-- CmdStatus -->
<g id="node11" class="node">
<title>CmdStatus</title>
<polygon fill="lightgreen" stroke="black" points="1284,-434.24 1160,-434.24 1160,-397.74 1284,-397.74 1284,-434.24"/>
<text xml:space="preserve" text-anchor="middle" x="1222" y="-416.94" font-family="Times,serif" font-size="14.00">commands/status.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1222" y="-402.69" font-family="Times,serif" font-size="14.00">37 LOC</text>
</g>
<!-- Routing&#45;&gt;CmdStatus -->
<g id="edge7" class="edge">
<title>Routing&#45;&gt;CmdStatus</title>
<path fill="none" stroke="black" d="M1222,-547.08C1222,-547.08 1222,-445.94 1222,-445.94"/>
<polygon fill="black" stroke="black" points="1225.5,-445.94 1222,-435.94 1218.5,-445.94 1225.5,-445.94"/>
</g>
<!-- ACEConstitution -->
<g id="node23" class="node">
<title>ACEConstitution</title>
<polygon fill="lightpink" stroke="black" points="362,-292.37 244,-292.37 244,-240.12 362,-240.12 362,-292.37"/>
<text xml:space="preserve" text-anchor="middle" x="303" y="-275.07" font-family="Times,serif" font-size="14.00">ace_constitution.rs</text>
<text xml:space="preserve" text-anchor="middle" x="303" y="-260.82" font-family="Times,serif" font-size="14.00">357 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="303" y="-246.57" font-family="Times,serif" font-size="14.00">❓ Low usage</text>
</g>
<!-- CmdSpecial&#45;&gt;ACEConstitution -->
<g id="edge19" class="edge">
<title>CmdSpecial&#45;&gt;ACEConstitution</title>
<path fill="none" stroke="black" d="M1369.39,-397.4C1369.39,-362.36 1369.39,-290 1369.39,-290 1369.39,-290 373.75,-290 373.75,-290"/>
<polygon fill="black" stroke="black" points="373.75,-286.5 363.75,-290 373.75,-293.5 373.75,-286.5"/>
</g>
<!-- StateMachine&#45;&gt;ErrorTypes -->
<g id="edge33" class="edge">
<title>StateMachine&#45;&gt;ErrorTypes</title>
<path fill="none" stroke="black" d="M2614.19,-389.68C2614.19,-385.76 2614.19,-383 2614.19,-383 2614.19,-383 2210.08,-383 2210.08,-383 2210.08,-383 2210.08,-303.38 2210.08,-303.38"/>
<polygon fill="black" stroke="black" points="2213.58,-303.38 2210.08,-293.38 2206.58,-303.38 2213.58,-303.38"/>
</g>
<!-- QualityGateBroker -->
<g id="node14" class="node">
<title>QualityGateBroker</title>
<polygon fill="yellow" stroke="black" points="2779.75,-284.49 2642.25,-284.49 2642.25,-247.99 2779.75,-247.99 2779.75,-284.49"/>
<text xml:space="preserve" text-anchor="middle" x="2711" y="-267.19" font-family="Times,serif" font-size="14.00">quality_gate_broker.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2711" y="-252.94" font-family="Times,serif" font-size="14.00">433 LOC</text>
</g>
<!-- QualityGateHandler&#45;&gt;QualityGateBroker -->
<g id="edge10" class="edge">
<title>QualityGateHandler&#45;&gt;QualityGateBroker</title>
<path fill="none" stroke="black" d="M2791.69,-389.52C2791.69,-346.46 2791.69,-266 2791.69,-266 2791.69,-266 2790.53,-266 2790.53,-266"/>
<polygon fill="black" stroke="black" points="2791.64,-262.5 2781.64,-266 2791.64,-269.5 2791.64,-262.5"/>
<text xml:space="preserve" text-anchor="middle" x="2773.62" y="-337.94" font-family="Times,serif" font-size="14.00">async coord</text>
</g>
<!-- Context -->
<g id="node15" class="node">
<title>Context</title>
<polygon fill="lightgreen" stroke="black" points="2926.25,-291.62 2797.75,-291.62 2797.75,-240.87 2926.25,-240.87 2926.25,-291.62"/>
<text xml:space="preserve" text-anchor="middle" x="2862" y="-274.32" font-family="Times,serif" font-size="14.00">context.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2862" y="-260.07" font-family="Times,serif" font-size="14.00">349 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2862" y="-245.82" font-family="Times,serif" font-size="14.00">SpecKitContext trait</text>
</g>
<!-- QualityGateHandler&#45;&gt;Context -->
<g id="edge11" class="edge">
<title>QualityGateHandler&#45;&gt;Context</title>
<path fill="none" stroke="black" d="M2862,-389.57C2862,-389.57 2862,-303.42 2862,-303.42"/>
<polygon fill="black" stroke="black" points="2865.5,-303.42 2862,-293.42 2858.5,-303.42 2865.5,-303.42"/>
<text xml:space="preserve" text-anchor="middle" x="2883.38" y="-337.94" font-family="Times,serif" font-size="14.00">uses trait</text>
</g>
<!-- ACEOrchestrator -->
<g id="node17" class="node">
<title>ACEOrchestrator</title>
<polygon fill="lightgreen" stroke="black" points="340,-583.99 222,-583.99 222,-547.49 340,-547.49 340,-583.99"/>
<text xml:space="preserve" text-anchor="middle" x="281" y="-566.69" font-family="Times,serif" font-size="14.00">ace_orchestrator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="281" y="-552.44" font-family="Times,serif" font-size="14.00">318 LOC</text>
</g>
<!-- ACERouter&#45;&gt;ACEOrchestrator -->
<g id="edge13" class="edge">
<title>ACERouter&#45;&gt;ACEOrchestrator</title>
<path fill="none" stroke="black" d="M375.88,-656.1C375.88,-619.06 375.88,-555 375.88,-555 375.88,-555 351.79,-555 351.79,-555"/>
<polygon fill="black" stroke="black" points="351.79,-551.5 341.79,-555 351.79,-558.5 351.79,-551.5"/>
<text xml:space="preserve" text-anchor="middle" x="334.75" y="-624.32" font-family="Times,serif" font-size="14.00">complex path</text>
</g>
<!-- ACEReflector -->
<g id="node18" class="node">
<title>ACEReflector</title>
<polygon fill="lightgreen" stroke="black" points="225.25,-434.24 126.75,-434.24 126.75,-397.74 225.25,-397.74 225.25,-434.24"/>
<text xml:space="preserve" text-anchor="middle" x="176" y="-416.94" font-family="Times,serif" font-size="14.00">ace_reflector.rs</text>
<text xml:space="preserve" text-anchor="middle" x="176" y="-402.69" font-family="Times,serif" font-size="14.00">317 LOC</text>
</g>
<!-- ACEOrchestrator&#45;&gt;ACEReflector -->
<g id="edge14" class="edge">
<title>ACEOrchestrator&#45;&gt;ACEReflector</title>
<path fill="none" stroke="black" d="M234.81,-547.08C234.81,-506.94 234.81,-416 234.81,-416 234.81,-416 233.89,-416 233.89,-416"/>
<polygon fill="black" stroke="black" points="237.14,-412.5 227.14,-416 237.14,-419.5 237.14,-412.5"/>
</g>
<!-- ACECurator -->
<g id="node19" class="node">
<title>ACECurator</title>
<polygon fill="lightgreen" stroke="black" points="107.88,-284.49 16.12,-284.49 16.12,-247.99 107.88,-247.99 107.88,-284.49"/>
<text xml:space="preserve" text-anchor="middle" x="62" y="-267.19" font-family="Times,serif" font-size="14.00">ace_curator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="62" y="-252.94" font-family="Times,serif" font-size="14.00">333 LOC</text>
</g>
<!-- ACEReflector&#45;&gt;ACECurator -->
<g id="edge15" class="edge">
<title>ACEReflector&#45;&gt;ACECurator</title>
<path fill="none" stroke="black" d="M126.33,-416C95.61,-416 62,-416 62,-416 62,-416 62,-296.42 62,-296.42"/>
<polygon fill="black" stroke="black" points="65.5,-296.42 62,-286.42 58.5,-296.42 65.5,-296.42"/>
</g>
<!-- ACELearning -->
<g id="node22" class="node">
<title>ACELearning</title>
<polygon fill="lightpink" stroke="black" points="225.62,-292.37 126.38,-292.37 126.38,-240.12 225.62,-240.12 225.62,-292.37"/>
<text xml:space="preserve" text-anchor="middle" x="176" y="-275.07" font-family="Times,serif" font-size="14.00">ace_learning.rs</text>
<text xml:space="preserve" text-anchor="middle" x="176" y="-260.82" font-family="Times,serif" font-size="14.00">357 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="176" y="-246.57" font-family="Times,serif" font-size="14.00">❓ Low usage</text>
</g>
<!-- ACEReflector&#45;&gt;ACELearning -->
<g id="edge16" class="edge">
<title>ACEReflector&#45;&gt;ACELearning</title>
<path fill="none" stroke="black" d="M159.58,-397.33C159.58,-397.33 159.58,-304.24 159.58,-304.24"/>
<polygon fill="black" stroke="black" points="163.08,-304.24 159.58,-294.24 156.08,-304.24 163.08,-304.24"/>
</g>
<!-- ACEClient -->
<g id="node21" class="node">
<title>ACEClient</title>
<polygon fill="yellow" stroke="black" points="425.5,-203.12 328.5,-203.12 328.5,-152.37 425.5,-152.37 425.5,-203.12"/>
<text xml:space="preserve" text-anchor="middle" x="377" y="-185.82" font-family="Times,serif" font-size="14.00">ace_client.rs</text>
<text xml:space="preserve" text-anchor="middle" x="377" y="-171.57" font-family="Times,serif" font-size="14.00">460 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="377" y="-157.32" font-family="Times,serif" font-size="14.00">MCP interface</text>
</g>
<!-- ACECurator&#45;&gt;ACEClient -->
<g id="edge17" class="edge">
<title>ACECurator&#45;&gt;ACEClient</title>
<path fill="none" stroke="black" d="M62,-247.53C62,-221.63 62,-178 62,-178 62,-178 316.61,-178 316.61,-178"/>
<polygon fill="black" stroke="black" points="316.61,-181.5 326.61,-178 316.61,-174.5 316.61,-181.5"/>
</g>
<!-- ACEPromptInjector -->
<g id="node20" class="node">
<title>ACEPromptInjector</title>
<polygon fill="yellow" stroke="black" points="520.25,-284.49 379.75,-284.49 379.75,-247.99 520.25,-247.99 520.25,-284.49"/>
<text xml:space="preserve" text-anchor="middle" x="450" y="-267.19" font-family="Times,serif" font-size="14.00">ace_prompt_injector.rs</text>
<text xml:space="preserve" text-anchor="middle" x="450" y="-252.94" font-family="Times,serif" font-size="14.00">417 LOC</text>
</g>
<!-- ACEPromptInjector&#45;&gt;ACEClient -->
<g id="edge18" class="edge">
<title>ACEPromptInjector&#45;&gt;ACEClient</title>
<path fill="none" stroke="black" d="M402.62,-247.91C402.62,-247.91 402.62,-214.95 402.62,-214.95"/>
<polygon fill="black" stroke="black" points="406.13,-214.95 402.63,-204.95 399.13,-214.95 406.13,-214.95"/>
</g>
<!-- ACEPlaybook -->
<g id="node37" class="node">
<title>ACEPlaybook</title>
<ellipse fill="white" stroke="black" cx="1375" cy="-41.81" rx="68.59" ry="25.81"/>
<text xml:space="preserve" text-anchor="middle" x="1375" y="-42.76" font-family="Times,serif" font-size="14.00">ACE Playbook</text>
<text xml:space="preserve" text-anchor="middle" x="1375" y="-28.51" font-family="Times,serif" font-size="14.00">(learning)</text>
</g>
<!-- ACEClient&#45;&gt;ACEPlaybook -->
<g id="edge38" class="edge">
<title>ACEClient&#45;&gt;ACEPlaybook</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M377,-151.89C377,-112.51 377,-42 377,-42 377,-42 1294.5,-42 1294.5,-42"/>
<polygon fill="black" stroke="black" points="1294.5,-45.5 1304.5,-42 1294.5,-38.5 1294.5,-45.5"/>
<text xml:space="preserve" text-anchor="middle" x="903.12" y="-121.07" font-family="Times,serif" font-size="14.00">playbook</text>
<text xml:space="preserve" text-anchor="middle" x="903.12" y="-106.82" font-family="Times,serif" font-size="14.00">queries</text>
</g>
<!-- ACEConstitution&#45;&gt;ACEClient -->
<g id="edge20" class="edge">
<title>ACEConstitution&#45;&gt;ACEClient</title>
<path fill="none" stroke="black" d="M345.25,-239.69C345.25,-239.69 345.25,-214.88 345.25,-214.88"/>
<polygon fill="black" stroke="black" points="348.75,-214.88 345.25,-204.88 341.75,-214.88 348.75,-214.88"/>
</g>
<!-- Quality -->
<g id="node25" class="node">
<title>Quality</title>
<polygon fill="orange" stroke="black" points="2864,-591.12 2746,-591.12 2746,-540.37 2864,-540.37 2864,-591.12"/>
<text xml:space="preserve" text-anchor="middle" x="2805" y="-573.82" font-family="Times,serif" font-size="14.00">quality.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2805" y="-559.57" font-family="Times,serif" font-size="14.00">851 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2805" y="-545.32" font-family="Times,serif" font-size="14.00">Issue classification</text>
</g>
<!-- Consensus&#45;&gt;Quality -->
<g id="edge22" class="edge">
<title>Consensus&#45;&gt;Quality</title>
<path fill="none" stroke="black" d="M2824.71,-655.13C2824.71,-655.13 2824.71,-602.95 2824.71,-602.95"/>
<polygon fill="black" stroke="black" points="2828.21,-602.95 2824.71,-592.95 2821.21,-602.95 2828.21,-602.95"/>
<text xml:space="preserve" text-anchor="middle" x="2846.62" y="-624.32" font-family="Times,serif" font-size="14.00">issue types</text>
</g>
<!-- Schemas -->
<g id="node26" class="node">
<title>Schemas</title>
<polygon fill="lightgreen" stroke="black" points="2988,-591.12 2882,-591.12 2882,-540.37 2988,-540.37 2988,-591.12"/>
<text xml:space="preserve" text-anchor="middle" x="2935" y="-573.82" font-family="Times,serif" font-size="14.00">schemas.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2935" y="-559.57" font-family="Times,serif" font-size="14.00">197 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2935" y="-545.32" font-family="Times,serif" font-size="14.00">JSON validation</text>
</g>
<!-- Consensus&#45;&gt;Schemas -->
<g id="edge24" class="edge">
<title>Consensus&#45;&gt;Schemas</title>
<path fill="none" stroke="black" d="M2904.94,-655.13C2904.94,-655.13 2904.94,-602.95 2904.94,-602.95"/>
<polygon fill="black" stroke="black" points="2908.44,-602.95 2904.94,-592.95 2901.44,-602.95 2908.44,-602.95"/>
<text xml:space="preserve" text-anchor="middle" x="2932.38" y="-624.32" font-family="Times,serif" font-size="14.00">validate</text>
</g>
<!-- Consensus&#45;&gt;ErrorTypes -->
<g id="edge34" class="edge">
<title>Consensus&#45;&gt;ErrorTypes</title>
<path fill="none" stroke="black" d="M2785.42,-655.27C2785.42,-642.53 2785.42,-630 2785.42,-630 2785.42,-630 2157.5,-630 2157.5,-630 2157.5,-630 2157.5,-303.63 2157.5,-303.63"/>
<polygon fill="black" stroke="black" points="2161,-303.63 2157.5,-293.63 2154,-303.63 2161,-303.63"/>
</g>
<!-- LocalMemory -->
<g id="node36" class="node">
<title>LocalMemory</title>
<ellipse fill="white" stroke="black" cx="1677" cy="-41.81" rx="86.62" ry="25.81"/>
<text xml:space="preserve" text-anchor="middle" x="1677" y="-42.76" font-family="Times,serif" font-size="14.00">local&#45;memory</text>
<text xml:space="preserve" text-anchor="middle" x="1677" y="-28.51" font-family="Times,serif" font-size="14.00">(consensus storage)</text>
</g>
<!-- Consensus&#45;&gt;LocalMemory -->
<g id="edge37" class="edge">
<title>Consensus&#45;&gt;LocalMemory</title>
<path fill="none" stroke="green" stroke-width="3" d="M2745.65,-682C2661.07,-682 2548.29,-682 2548.29,-682 2548.29,-682 2548.29,-42 2548.29,-42 2548.29,-42 1778.27,-42 1778.27,-42"/>
<polygon fill="green" stroke="green" stroke-width="3" points="1778.27,-38.5 1768.27,-42 1778.27,-45.5 1778.27,-38.5"/>
<text xml:space="preserve" text-anchor="middle" x="3049" y="-345.07" font-family="Times,serif" font-size="14.00">native MCP</text>
<text xml:space="preserve" text-anchor="middle" x="3049" y="-330.82" font-family="Times,serif" font-size="14.00">5.3x faster</text>
</g>
<!-- Quality&#45;&gt;StateMachine -->
<g id="edge23" class="edge">
<title>Quality&#45;&gt;StateMachine</title>
<path fill="none" stroke="black" d="M2756.94,-540C2756.94,-540 2756.94,-453.92 2756.94,-453.92"/>
<polygon fill="black" stroke="black" points="2760.44,-453.92 2756.94,-443.92 2753.44,-453.92 2760.44,-453.92"/>
<text xml:space="preserve" text-anchor="middle" x="2780.25" y="-494.82" font-family="Times,serif" font-size="14.00">checkpoints</text>
</g>
<!-- Evidence&#45;&gt;ErrorTypes -->
<g id="edge35" class="edge">
<title>Evidence&#45;&gt;ErrorTypes</title>
<path fill="none" stroke="black" d="M1646.75,-655.97C1646.75,-568.6 1646.75,-289 1646.75,-289 1646.75,-289 2124.4,-289 2124.4,-289"/>
<polygon fill="black" stroke="black" points="2124.4,-292.5 2134.4,-289 2124.4,-285.5 2124.4,-292.5"/>
</g>
<!-- Guardrail&#45;&gt;ErrorTypes -->
<g id="edge36" class="edge">
<title>Guardrail&#45;&gt;ErrorTypes</title>
<path fill="none" stroke="black" d="M1534.79,-656.15C1534.79,-568.67 1534.79,-287 1534.79,-287 1534.79,-287 2124.3,-287 2124.3,-287"/>
<polygon fill="black" stroke="black" points="2124.3,-290.5 2134.3,-287 2124.3,-283.5 2124.3,-290.5"/>
</g>
<!-- HAL -->
<g id="node38" class="node">
<title>HAL</title>
<ellipse fill="white" stroke="black" cx="1517" cy="-41.81" rx="55.86" ry="25.81"/>
<text xml:space="preserve" text-anchor="middle" x="1517" y="-42.76" font-family="Times,serif" font-size="14.00">HAL API</text>
<text xml:space="preserve" text-anchor="middle" x="1517" y="-28.51" font-family="Times,serif" font-size="14.00">(validation)</text>
</g>
<!-- Guardrail&#45;&gt;HAL -->
<g id="edge39" class="edge">
<title>Guardrail&#45;&gt;HAL</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1499.21,-656.26C1499.21,-656.26 1499.21,-78.18 1499.21,-78.18"/>
<polygon fill="black" stroke="black" points="1502.71,-78.18 1499.21,-68.18 1495.71,-78.18 1502.71,-78.18"/>
<text xml:space="preserve" text-anchor="middle" x="1544" y="-345.07" font-family="Times,serif" font-size="14.00">API</text>
<text xml:space="preserve" text-anchor="middle" x="1544" y="-330.82" font-family="Times,serif" font-size="14.00">validation</text>
</g>
<!-- ModExports -->
<g id="node35" class="node">
<title>ModExports</title>
<polygon fill="lightgreen" stroke="black" points="2320,-291.62 2244,-291.62 2244,-240.87 2320,-240.87 2320,-291.62"/>
<text xml:space="preserve" text-anchor="middle" x="2282" y="-274.32" font-family="Times,serif" font-size="14.00">mod.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2282" y="-260.07" font-family="Times,serif" font-size="14.00">102 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2282" y="-245.82" font-family="Times,serif" font-size="14.00">Public API</text>
</g>
<!-- SpecKitTypes -->
<g id="node39" class="node">
<title>SpecKitTypes</title>
<polygon fill="lightgreen" stroke="black" points="2301.25,-441.37 2178.75,-441.37 2178.75,-390.62 2301.25,-390.62 2301.25,-441.37"/>
<text xml:space="preserve" text-anchor="middle" x="2240" y="-424.07" font-family="Times,serif" font-size="14.00">types.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2240" y="-409.82" font-family="Times,serif" font-size="14.00">166 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2240" y="-395.57" font-family="Times,serif" font-size="14.00">Stage/Agent enums</text>
</g>
<!-- SpecKitTypes&#45;&gt;ErrorTypes -->
<g id="edge40" class="edge">
<title>SpecKitTypes&#45;&gt;ErrorTypes</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M2194.42,-390.25C2194.42,-390.25 2194.42,-303.16 2194.42,-303.16"/>
<polygon fill="black" stroke="black" points="2197.92,-303.16 2194.42,-293.16 2190.92,-303.16 2197.92,-303.16"/>
<text xml:space="preserve" text-anchor="middle" x="2240.5" y="-337.94" font-family="Times,serif" font-size="14.00">sync types</text>
</g>
<!-- SpecKitAPI -->
<g id="node40" class="node">
<title>SpecKitAPI</title>
<polygon fill="lightgreen" stroke="black" points="2430.62,-441.37 2319.38,-441.37 2319.38,-390.62 2430.62,-390.62 2430.62,-441.37"/>
<text xml:space="preserve" text-anchor="middle" x="2375" y="-424.07" font-family="Times,serif" font-size="14.00">api.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2375" y="-409.82" font-family="Times,serif" font-size="14.00">134 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2375" y="-395.57" font-family="Times,serif" font-size="14.00">Future async API</text>
</g>
<!-- SpecKitError -->
<g id="node41" class="node">
<title>SpecKitError</title>
<polygon fill="lightgreen" stroke="black" points="2529.62,-441.37 2448.38,-441.37 2448.38,-390.62 2529.62,-390.62 2529.62,-441.37"/>
<text xml:space="preserve" text-anchor="middle" x="2489" y="-424.07" font-family="Times,serif" font-size="14.00">error.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2489" y="-409.82" font-family="Times,serif" font-size="14.00">88 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="2489" y="-395.57" font-family="Times,serif" font-size="14.00">Crate errors</text>
</g>
<!-- Legend -->
<g id="node42" class="node">
<title>Legend</title>
<polygon fill="lightblue" stroke="none" points="2951.75,-1062.74 2718.25,-1062.74 2718.25,-933.24 2951.75,-933.24 2951.75,-1062.74"/>
<polygon fill="red" stroke="none" points="2726.25,-1038.49 2726.25,-1058.74 2756.25,-1058.74 2756.25,-1038.49 2726.25,-1038.49"/>
<polygon fill="none" stroke="black" points="2726.25,-1038.49 2726.25,-1058.74 2756.25,-1058.74 2756.25,-1038.49 2726.25,-1038.49"/>
<text xml:space="preserve" text-anchor="start" x="2739.38" y="-1042.44" font-family="Times,serif" font-size="14.00"> </text>
<polygon fill="none" stroke="black" points="2756.25,-1038.49 2756.25,-1058.74 2943.75,-1058.74 2943.75,-1038.49 2756.25,-1038.49"/>
<text xml:space="preserve" text-anchor="start" x="2759.25" y="-1042.44" font-family="Times,serif" font-size="14.00">Critical split (&gt;1000 LOC)</text>
<polygon fill="orange" stroke="none" points="2726.25,-1018.24 2726.25,-1038.49 2756.25,-1038.49 2756.25,-1018.24 2726.25,-1018.24"/>
<polygon fill="none" stroke="black" points="2726.25,-1018.24 2726.25,-1038.49 2756.25,-1038.49 2756.25,-1018.24 2726.25,-1018.24"/>
<text xml:space="preserve" text-anchor="start" x="2739.38" y="-1022.19" font-family="Times,serif" font-size="14.00"> </text>
<polygon fill="none" stroke="black" points="2756.25,-1018.24 2756.25,-1038.49 2943.75,-1038.49 2943.75,-1018.24 2756.25,-1018.24"/>
<text xml:space="preserve" text-anchor="start" x="2759.25" y="-1022.19" font-family="Times,serif" font-size="14.00">Large module (700&#45;1000 LOC)</text>
<polygon fill="yellow" stroke="none" points="2726.25,-997.99 2726.25,-1018.24 2756.25,-1018.24 2756.25,-997.99 2726.25,-997.99"/>
<polygon fill="none" stroke="black" points="2726.25,-997.99 2726.25,-1018.24 2756.25,-1018.24 2756.25,-997.99 2726.25,-997.99"/>
<text xml:space="preserve" text-anchor="start" x="2739.38" y="-1001.94" font-family="Times,serif" font-size="14.00"> </text>
<polygon fill="none" stroke="black" points="2756.25,-997.99 2756.25,-1018.24 2943.75,-1018.24 2943.75,-997.99 2756.25,-997.99"/>
<text xml:space="preserve" text-anchor="start" x="2759.25" y="-1001.94" font-family="Times,serif" font-size="14.00">Medium module (400&#45;700 LOC)</text>
<polygon fill="lightgreen" stroke="none" points="2726.25,-977.74 2726.25,-997.99 2756.25,-997.99 2756.25,-977.74 2726.25,-977.74"/>
<polygon fill="none" stroke="black" points="2726.25,-977.74 2726.25,-997.99 2756.25,-997.99 2756.25,-977.74 2726.25,-977.74"/>
<text xml:space="preserve" text-anchor="start" x="2739.38" y="-981.69" font-family="Times,serif" font-size="14.00"> </text>
<polygon fill="none" stroke="black" points="2756.25,-977.74 2756.25,-997.99 2943.75,-997.99 2943.75,-977.74 2756.25,-977.74"/>
<text xml:space="preserve" text-anchor="start" x="2759.25" y="-981.69" font-family="Times,serif" font-size="14.00">Well&#45;sized (&lt;400 LOC)</text>
<polygon fill="lightpink" stroke="none" points="2726.25,-957.49 2726.25,-977.74 2756.25,-977.74 2756.25,-957.49 2726.25,-957.49"/>
<polygon fill="none" stroke="black" points="2726.25,-957.49 2726.25,-977.74 2756.25,-977.74 2756.25,-957.49 2726.25,-957.49"/>
<text xml:space="preserve" text-anchor="start" x="2739.38" y="-961.44" font-family="Times,serif" font-size="14.00"> </text>
<polygon fill="none" stroke="black" points="2756.25,-957.49 2756.25,-977.74 2943.75,-977.74 2943.75,-957.49 2756.25,-957.49"/>
<text xml:space="preserve" text-anchor="start" x="2759.25" y="-961.44" font-family="Times,serif" font-size="14.00">Potential dead code</text>
<polygon fill="white" stroke="none" points="2726.25,-937.24 2726.25,-957.49 2756.25,-957.49 2756.25,-937.24 2726.25,-937.24"/>
<polygon fill="none" stroke="black" points="2726.25,-937.24 2726.25,-957.49 2756.25,-957.49 2756.25,-937.24 2726.25,-937.24"/>
<text xml:space="preserve" text-anchor="start" x="2739.38" y="-941.19" font-family="Times,serif" font-size="14.00"> </text>
<polygon fill="none" stroke="black" points="2756.25,-937.24 2756.25,-957.49 2943.75,-957.49 2943.75,-937.24 2756.25,-937.24"/>
<text xml:space="preserve" text-anchor="start" x="2759.25" y="-941.19" font-family="Times,serif" font-size="14.00">Upstream code (not ours)</text>
</g>
<!-- Note1 -->
<g id="node43" class="node">
<title>Note1</title>
<polygon fill="lightyellow" stroke="black" points="2665.12,-1044.74 2526.88,-1044.74 2526.88,-951.24 2671.12,-951.24 2671.12,-1038.74 2665.12,-1044.74"/>
<polyline fill="none" stroke="black" points="2665.12,-1044.74 2665.12,-1038.74"/>
<polyline fill="none" stroke="black" points="2671.12,-1038.74 2665.12,-1038.74"/>
<text xml:space="preserve" text-anchor="middle" x="2599" y="-1027.44" font-family="Times,serif" font-size="14.00">CRITICAL:</text>
<text xml:space="preserve" text-anchor="middle" x="2599" y="-1013.19" font-family="Times,serif" font-size="14.00">handler.rs (1,561 LOC)</text>
<text xml:space="preserve" text-anchor="middle" x="2599" y="-998.94" font-family="Times,serif" font-size="14.00">Split into:</text>
<text xml:space="preserve" text-anchor="middle" x="2599" y="-984.69" font-family="Times,serif" font-size="14.00">&#45; handler_core.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2599" y="-970.44" font-family="Times,serif" font-size="14.00">&#45; handler_telemetry.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2599" y="-956.19" font-family="Times,serif" font-size="14.00">&#45; handler_mcp.rs</text>
</g>
<!-- Note1&#45;&gt;Handler -->
<g id="edge44" class="edge">
<title>Note1&#45;&gt;Handler</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M2566.96,-950.89C2566.96,-904.65 2566.96,-841 2566.96,-841 2566.96,-841 1451.33,-841 1451.33,-841"/>
<polygon fill="red" stroke="red" points="1451.33,-837.5 1441.33,-841 1451.33,-844.5 1451.33,-837.5"/>
</g>
<!-- Note2 -->
<g id="node44" class="node">
<title>Note2</title>
<polygon fill="lightyellow" stroke="black" points="2722.38,-605.37 2585.62,-605.37 2585.62,-526.12 2728.38,-526.12 2728.38,-599.37 2722.38,-605.37"/>
<polyline fill="none" stroke="black" points="2722.38,-605.37 2722.38,-599.37"/>
<polyline fill="none" stroke="black" points="2728.38,-599.37 2722.38,-599.37"/>
<text xml:space="preserve" text-anchor="middle" x="2657" y="-588.07" font-family="Times,serif" font-size="14.00">HIGH PRIORITY:</text>
<text xml:space="preserve" text-anchor="middle" x="2657" y="-573.82" font-family="Times,serif" font-size="14.00">quality_gate_handler.rs</text>
<text xml:space="preserve" text-anchor="middle" x="2657" y="-559.57" font-family="Times,serif" font-size="14.00">(1,254 LOC)</text>
<text xml:space="preserve" text-anchor="middle" x="2657" y="-545.32" font-family="Times,serif" font-size="14.00">Extract broker</text>
<text xml:space="preserve" text-anchor="middle" x="2657" y="-531.07" font-family="Times,serif" font-size="14.00">coordination</text>
</g>
<!-- Note2&#45;&gt;QualityGateHandler -->
<g id="edge45" class="edge">
<title>Note2&#45;&gt;QualityGateHandler</title>
<path fill="none" stroke="orange" stroke-dasharray="5,2" d="M2728.75,-533C2779.25,-533 2837.88,-533 2837.88,-533 2837.88,-533 2837.88,-454.06 2837.88,-454.06"/>
<polygon fill="orange" stroke="orange" points="2841.38,-454.06 2837.88,-444.06 2834.38,-454.06 2841.38,-454.06"/>
</g>
<!-- Note3 -->
<g id="node45" class="node">
<title>Note3</title>
<polygon fill="lightyellow" stroke="black" points="2910.62,-856.87 2757.38,-856.87 2757.38,-791.87 2916.62,-791.87 2916.62,-850.87 2910.62,-856.87"/>
<polyline fill="none" stroke="black" points="2910.62,-856.87 2910.62,-850.87"/>
<polyline fill="none" stroke="black" points="2916.62,-850.87 2910.62,-850.87"/>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-839.57" font-family="Times,serif" font-size="14.00">SPLIT:</text>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-825.32" font-family="Times,serif" font-size="14.00">consensus.rs (1,052 LOC)</text>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-811.07" font-family="Times,serif" font-size="14.00">state.rs (932 LOC)</text>
<text xml:space="preserve" text-anchor="middle" x="2837" y="-796.82" font-family="Times,serif" font-size="14.00">Into submodules</text>
</g>
<!-- Note3&#45;&gt;Consensus -->
<g id="edge46" class="edge">
<title>Note3&#45;&gt;Consensus</title>
<path fill="none" stroke="orange" stroke-dasharray="5,2" d="M2837,-791.65C2837,-791.65 2837,-719.63 2837,-719.63"/>
<polygon fill="orange" stroke="orange" points="2840.5,-719.63 2837,-709.63 2833.5,-719.63 2840.5,-719.63"/>
</g>
<!-- Note4 -->
<g id="node46" class="node">
<title>Note4</title>
<polygon fill="lightyellow" stroke="black" points="688.25,-455.62 535.75,-455.62 535.75,-376.37 694.25,-376.37 694.25,-449.62 688.25,-455.62"/>
<polyline fill="none" stroke="black" points="688.25,-455.62 688.25,-449.62"/>
<polyline fill="none" stroke="black" points="694.25,-449.62 688.25,-449.62"/>
<text xml:space="preserve" text-anchor="middle" x="615" y="-438.32" font-family="Times,serif" font-size="14.00">DEAD CODE?</text>
<text xml:space="preserve" text-anchor="middle" x="615" y="-424.07" font-family="Times,serif" font-size="14.00">ACE learning/constitution</text>
<text xml:space="preserve" text-anchor="middle" x="615" y="-409.82" font-family="Times,serif" font-size="14.00">config_validator</text>
<text xml:space="preserve" text-anchor="middle" x="615" y="-395.57" font-family="Times,serif" font-size="14.00">subagent_defaults</text>
<text xml:space="preserve" text-anchor="middle" x="615" y="-381.32" font-family="Times,serif" font-size="14.00">Run cargo&#45;udeps</text>
</g>
<!-- Note4&#45;&gt;ACELearning -->
<g id="edge47" class="edge">
<title>Note4&#45;&gt;ACELearning</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M535.52,-387C413.1,-387 192.42,-387 192.42,-387 192.42,-387 192.42,-304.26 192.42,-304.26"/>
<polygon fill="gray" stroke="gray" points="195.92,-304.26 192.42,-294.26 188.92,-304.26 195.92,-304.26"/>
</g>
<!-- Stats -->
<g id="node47" class="node">
<title>Stats</title>
<polygon fill="lightcyan" stroke="black" points="3138.12,-1074.99 2969.88,-1074.99 2969.88,-920.99 3144.12,-920.99 3144.12,-1068.99 3138.12,-1074.99"/>
<polyline fill="none" stroke="black" points="3138.12,-1074.99 3138.12,-1068.99"/>
<polyline fill="none" stroke="black" points="3144.12,-1068.99 3138.12,-1068.99"/>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-1057.69" font-family="Times,serif" font-size="14.00">Total Fork Code:</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-1043.44" font-family="Times,serif" font-size="14.00">25,164 LOC</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-1013.19" font-family="Times,serif" font-size="14.00">15,234 LOC implementation</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-998.94" font-family="Times,serif" font-size="14.00">9,508 LOC tests</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-984.69" font-family="Times,serif" font-size="14.00">422 LOC separate crate</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-954.44" font-family="Times,serif" font-size="14.00">Upstream touch: 5 files</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-940.19" font-family="Times,serif" font-size="14.00">~58 references</text>
<text xml:space="preserve" text-anchor="middle" x="3057" y="-925.94" font-family="Times,serif" font-size="14.00">Rebase risk: &lt;5%</text>
</g>
</g>
</svg>
