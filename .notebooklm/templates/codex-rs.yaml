version: "1.0"
metadata:
  author: "codex-rs"
  description: "Custom research templates for Codex-RS development"

templates:
  - name: "crate-audit"
    description: "Deep analysis of a Rust crate for stability, security, and maintenance status"
    mode: "deep"
    queryModifiers:
      - "security vulnerability"
      - "maintenance status"
      - "breaking changes"
      - "alternatives"
      - "CVE"
      - "soundness"
    queryPattern: "Audit the Rust crate '{topic}'. Focus on: 1) Recent CVEs or soundness issues, 2) Maintenance activity in 2024/2025, 3) Major breaking changes in recent versions, 4) Community alternatives."
    suggestedSteps:
      - "Check crates.io for recent version history, downloads, and dependent crates"
      - "Search GitHub issues for 'panic', 'unsound', 'memory leak', or 'CVE'"
      - "Find comparisons with major alternatives in the ecosystem"
      - "Look for 'post-mortem' or 'migration' blogs related to this crate"
      - "Check RustSec advisory database for known vulnerabilities"
    tags:
      - "rust"
      - "security"
      - "dependency-management"
      - "audit"

  - name: "arch-review"
    description: "Research architectural patterns for Rust implementations"
    mode: "deep"
    queryModifiers:
      - "design patterns"
      - "rust idiomatic"
      - "trade-offs"
      - "architecture"
    queryPattern: "Best practices for implementing {topic} in Rust. Contrast approaches, show idiomatic patterns, and highlight trade-offs."
    suggestedSteps:
      - "Identify the 3 most common design patterns for this problem in Rust"
      - "Find benchmarks comparing these approaches"
      - "Search 'Rust for Rustaceans' or expert blog citations"
      - "Look for real-world implementations in popular Rust projects"
      - "Find discussion of trade-offs in r/rust or internals.rust-lang.org"
    tags:
      - "architecture"
      - "design"
      - "rust"
      - "patterns"

  - name: "tui-patterns"
    description: "Research terminal UI patterns and ratatui best practices"
    mode: "fast"
    queryModifiers:
      - "ratatui"
      - "terminal UI"
      - "TUI"
      - "event handling"
    queryPattern: "TUI implementation patterns for {topic} using ratatui/crossterm. Focus on event handling, state management, and rendering."
    suggestedSteps:
      - "Search ratatui examples and templates"
      - "Find similar TUI applications on GitHub"
      - "Look for performance optimization techniques"
    tags:
      - "tui"
      - "ratatui"
      - "ui"

  - name: "upstream-sync"
    description: "Research upstream changes and migration strategies"
    mode: "deep"
    queryModifiers:
      - "migration"
      - "breaking changes"
      - "changelog"
      - "upgrade"
    queryPattern: "Migration strategy for {topic}. Find breaking changes, deprecations, and recommended upgrade paths."
    suggestedSteps:
      - "Check release notes and changelogs"
      - "Search for migration guides"
      - "Find community discussions about upgrade issues"
      - "Look for compatibility shims or gradual migration patterns"
    tags:
      - "migration"
      - "upstream"
      - "compatibility"

  - name: "risk-assessment"
    description: "Assess risk of code changes using forensic data"
    mode: "fast"
    queryModifiers:
      - "risk"
      - "impact"
      - "coupling"
      - "churn"
    queryPattern: "Risk assessment for modifying {topic}. Cross-reference with churn hotspots, logical coupling, and complexity metrics."
    suggestedSteps:
      - "Check churn_hotspots.md for file change frequency"
      - "Check logical_coupling.md for co-change dependencies"
      - "Check metrics.md for complexity scores"
      - "Identify safer alternatives or refactoring opportunities"
    tags:
      - "risk"
      - "forensics"
      - "refactoring"
