<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (0)
 -->
<!-- Title: spec_kit_pipeline_v2 Pages: 1 -->
<svg width="764pt" height="2546pt"
 viewBox="0.00 0.00 764.00 2546.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2541.9)">
<title>spec_kit_pipeline_v2</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-2541.9 760.25,-2541.9 760.25,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="378.12" y="-2520.6" font-family="Arial" font-size="14.00">Spec&#45;Kit Pipeline State Machine v2</text>
<text xml:space="preserve" text-anchor="middle" x="378.12" y="-2505.6" font-family="Arial" font-size="14.00">ACE&#45;Enhanced, No Retries, Strategic Quality Gates</text>
<g id="clust1" class="cluster">
<title>cluster_legend</title>
<polygon fill="#f5f5f5" stroke="black" points="550.25,-2059.36 550.25,-2491.9 748.25,-2491.9 748.25,-2059.36 550.25,-2059.36"/>
<text xml:space="preserve" text-anchor="middle" x="649.25" y="-2474.6" font-family="Arial" font-size="14.00">Pipeline v2 Changes</text>
</g>
<!-- init -->
<g id="node1" class="node">
<title>init</title>
<ellipse fill="#e3f2fd" stroke="black" cx="408.25" cy="-2442.9" rx="134.35" ry="48.08"/>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2459.6" font-family="Arial" font-size="14.00">/speckit.auto SPEC&#45;ID</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2444.6" font-family="Arial" font-size="14.00">• Validate config</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2429.6" font-family="Arial" font-size="14.00">• Initialize state</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2414.6" font-family="Arial" font-size="14.00">• Enable ACE + quality gates</text>
</g>
<!-- stage_check -->
<g id="node2" class="node">
<title>stage_check</title>
<polygon fill="#fff9c4" stroke="black" points="408.25,-2357.81 345.75,-2319.81 408.25,-2281.81 470.75,-2319.81 408.25,-2357.81"/>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2321.51" font-family="Arial" font-size="14.00">More</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2306.51" font-family="Arial" font-size="14.00">stages?</text>
</g>
<!-- init&#45;&gt;stage_check -->
<g id="edge1" class="edge">
<title>init&#45;&gt;stage_check</title>
<path fill="none" stroke="black" d="M408.25,-2394.39C408.25,-2386.19 408.25,-2377.66 408.25,-2369.44"/>
<polygon fill="black" stroke="black" points="411.75,-2369.59 408.25,-2359.59 404.75,-2369.59 411.75,-2369.59"/>
</g>
<!-- complete -->
<g id="node3" class="node">
<title>complete</title>
<ellipse fill="#c8e6c9" stroke="black" cx="200.25" cy="-2197.84" rx="106.77" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="200.25" y="-2207.04" font-family="Arial" font-size="14.00">Pipeline Complete</text>
<text xml:space="preserve" text-anchor="middle" x="200.25" y="-2192.04" font-family="Arial" font-size="14.00">• Finalize quality gates</text>
<text xml:space="preserve" text-anchor="middle" x="200.25" y="-2177.04" font-family="Arial" font-size="14.00">• Success message</text>
</g>
<!-- stage_check&#45;&gt;complete -->
<g id="edge2" class="edge">
<title>stage_check&#45;&gt;complete</title>
<path fill="none" stroke="black" d="M376.66,-2300.59C347.03,-2283.5 301.84,-2257.43 264.61,-2235.96"/>
<polygon fill="black" stroke="black" points="266.56,-2233.05 256.15,-2231.08 263.06,-2239.11 266.56,-2233.05"/>
<text xml:space="preserve" text-anchor="middle" x="316.86" y="-2254.31" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- ace_prefetch -->
<g id="node4" class="node">
<title>ace_prefetch</title>
<polygon fill="#e1bee7" stroke="black" stroke-width="2" points="491.25,-2231.84 325.25,-2231.84 325.25,-2163.84 491.25,-2163.84 491.25,-2231.84"/>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2214.54" font-family="Arial" font-size="14.00">ACE Pre&#45;fetch</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2199.54" font-family="Arial" font-size="14.00">• Get playbook bullets</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2184.54" font-family="Arial" font-size="14.00">• Cache in state</text>
<text xml:space="preserve" text-anchor="middle" x="408.25" y="-2169.54" font-family="Arial" font-size="14.00">• Scope: speckit.&lt;stage&gt;</text>
</g>
<!-- stage_check&#45;&gt;ace_prefetch -->
<g id="edge3" class="edge">
<title>stage_check&#45;&gt;ace_prefetch</title>
<path fill="none" stroke="black" d="M408.25,-2281.51C408.25,-2269.4 408.25,-2255.84 408.25,-2243.26"/>
<polygon fill="black" stroke="black" points="411.75,-2243.56 408.25,-2233.56 404.75,-2243.56 411.75,-2243.56"/>
<text xml:space="preserve" text-anchor="middle" x="416.5" y="-2254.31" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- qg_check -->
<g id="node5" class="node">
<title>qg_check</title>
<polygon fill="#ffe082" stroke="black" points="403.25,-2123.36 311.5,-2085.36 403.25,-2047.36 495,-2085.36 403.25,-2123.36"/>
<text xml:space="preserve" text-anchor="middle" x="403.25" y="-2087.06" font-family="Arial" font-size="14.00">Quality Gate</text>
<text xml:space="preserve" text-anchor="middle" x="403.25" y="-2072.06" font-family="Arial" font-size="14.00">Checkpoint?</text>
</g>
<!-- ace_prefetch&#45;&gt;qg_check -->
<g id="edge4" class="edge">
<title>ace_prefetch&#45;&gt;qg_check</title>
<path fill="none" stroke="black" d="M406.74,-2163.39C406.32,-2154.26 405.87,-2144.19 405.42,-2134.42"/>
<polygon fill="black" stroke="black" points="408.93,-2134.5 404.98,-2124.67 401.94,-2134.82 408.93,-2134.5"/>
</g>
<!-- qg_execute -->
<g id="node6" class="node">
<title>qg_execute</title>
<polygon fill="#ffccbc" stroke="black" points="369.62,-2000.86 190.88,-2000.86 190.88,-1902.86 369.62,-1902.86 369.62,-2000.86"/>
<text xml:space="preserve" text-anchor="middle" x="280.25" y="-1983.56" font-family="Arial" font-size="14.00">Execute Quality Gate</text>
<text xml:space="preserve" text-anchor="middle" x="280.25" y="-1968.56" font-family="Arial" font-size="14.00">• BeforeSpecify: Clarify</text>
<text xml:space="preserve" text-anchor="middle" x="280.25" y="-1953.56" font-family="Arial" font-size="14.00">• AfterSpecify: Checklist</text>
<text xml:space="preserve" text-anchor="middle" x="280.25" y="-1938.56" font-family="Arial" font-size="14.00">• AfterTasks: Analyze</text>
<text xml:space="preserve" text-anchor="middle" x="280.25" y="-1923.56" font-family="Arial" font-size="14.00">• Spawn 3 agents</text>
<text xml:space="preserve" text-anchor="middle" x="280.25" y="-1908.56" font-family="Arial" font-size="14.00">• ACE&#45;enhanced resolution</text>
</g>
<!-- qg_check&#45;&gt;qg_execute -->
<g id="edge5" class="edge">
<title>qg_check&#45;&gt;qg_execute</title>
<path fill="none" stroke="black" d="M378.06,-2057.43C365.08,-2043.55 348.72,-2026.07 333.13,-2009.39"/>
<polygon fill="black" stroke="black" points="335.97,-2007.31 326.58,-2002.4 330.86,-2012.09 335.97,-2007.31"/>
<text xml:space="preserve" text-anchor="middle" x="357.36" y="-2019.86" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- guardrail -->
<g id="node10" class="node">
<title>guardrail</title>
<polygon fill="#b3e5fc" stroke="black" points="418.88,-1552.86 277.62,-1552.86 277.62,-1484.86 418.88,-1484.86 418.88,-1552.86"/>
<text xml:space="preserve" text-anchor="middle" x="348.25" y="-1535.56" font-family="Arial" font-size="14.00">Phase: Guardrail</text>
<text xml:space="preserve" text-anchor="middle" x="348.25" y="-1520.56" font-family="Arial" font-size="14.00">• Execute shell script</text>
<text xml:space="preserve" text-anchor="middle" x="348.25" y="-1505.56" font-family="Arial" font-size="14.00">• Validate policy</text>
<text xml:space="preserve" text-anchor="middle" x="348.25" y="-1490.56" font-family="Arial" font-size="14.00">• Write telemetry</text>
</g>
<!-- qg_check&#45;&gt;guardrail -->
<g id="edge6" class="edge">
<title>qg_check&#45;&gt;guardrail</title>
<path fill="none" stroke="black" d="M404.12,-2047.24C404.66,-2020.9 405.25,-1984.71 405.25,-1952.86 405.25,-1952.86 405.25,-1952.86 405.25,-1607.86 405.25,-1591.44 398.18,-1575.67 389.01,-1562.13"/>
<polygon fill="black" stroke="black" points="392.03,-1560.33 383.29,-1554.35 386.39,-1564.48 392.03,-1560.33"/>
<text xml:space="preserve" text-anchor="middle" x="411.62" y="-1765.11" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- qg_process -->
<g id="node7" class="node">
<title>qg_process</title>
<polygon fill="#ffab91" stroke="black" points="377.5,-1865.86 135,-1865.86 135,-1797.86 377.5,-1797.86 377.5,-1865.86"/>
<text xml:space="preserve" text-anchor="middle" x="256.25" y="-1848.56" font-family="Arial" font-size="14.00">Process Issues</text>
<text xml:space="preserve" text-anchor="middle" x="256.25" y="-1833.56" font-family="Arial" font-size="14.00">• Auto&#45;resolve (55%→70% with ACE)</text>
<text xml:space="preserve" text-anchor="middle" x="256.25" y="-1818.56" font-family="Arial" font-size="14.00">• GPT&#45;5 validate (35%)</text>
<text xml:space="preserve" text-anchor="middle" x="256.25" y="-1803.56" font-family="Arial" font-size="14.00">• Escalate (5&#45;10%)</text>
</g>
<!-- qg_execute&#45;&gt;qg_process -->
<g id="edge7" class="edge">
<title>qg_execute&#45;&gt;qg_process</title>
<path fill="none" stroke="black" d="M270.42,-1902.52C268.73,-1894.22 266.98,-1885.62 265.31,-1877.42"/>
<polygon fill="black" stroke="black" points="268.75,-1876.75 263.32,-1867.64 261.89,-1878.14 268.75,-1876.75"/>
</g>
<!-- qg_human -->
<g id="node8" class="node">
<title>qg_human</title>
<polygon fill="#ff8a65" stroke="black" points="282.49,-1740.86 170.75,-1740.86 142.01,-1664.86 253.75,-1664.86 282.49,-1740.86"/>
<text xml:space="preserve" text-anchor="middle" x="212.25" y="-1704.56" font-family="Arial" font-size="14.00">Human</text>
<text xml:space="preserve" text-anchor="middle" x="212.25" y="-1689.56" font-family="Arial" font-size="14.00">Decision</text>
</g>
<!-- qg_process&#45;&gt;qg_human -->
<g id="edge9" class="edge">
<title>qg_process&#45;&gt;qg_human</title>
<path fill="none" stroke="black" d="M244.69,-1797.49C239.85,-1783.54 234.14,-1767.05 228.87,-1751.83"/>
<polygon fill="black" stroke="black" points="232.2,-1750.76 225.62,-1742.46 225.59,-1753.06 232.2,-1750.76"/>
<text xml:space="preserve" text-anchor="middle" x="259.94" y="-1770.36" font-family="Arial" font-size="10.00">Escalated</text>
<text xml:space="preserve" text-anchor="middle" x="259.94" y="-1759.86" font-family="Arial" font-size="10.00">(5&#45;10%)</text>
</g>
<!-- qg_done -->
<g id="node9" class="node">
<title>qg_done</title>
<polygon fill="#c5e1a5" stroke="black" points="364.12,-1627.86 272.38,-1627.86 272.38,-1589.86 364.12,-1589.86 364.12,-1627.86"/>
<text xml:space="preserve" text-anchor="middle" x="318.25" y="-1610.56" font-family="Arial" font-size="14.00">Quality Gate</text>
<text xml:space="preserve" text-anchor="middle" x="318.25" y="-1595.56" font-family="Arial" font-size="14.00">Complete</text>
</g>
<!-- qg_process&#45;&gt;qg_done -->
<g id="edge8" class="edge">
<title>qg_process&#45;&gt;qg_done</title>
<path fill="none" stroke="black" d="M277.2,-1797.59C280.23,-1791.83 283.06,-1785.78 285.25,-1779.86 302.8,-1732.44 311.53,-1673.96 315.46,-1639.41"/>
<polygon fill="black" stroke="black" points="318.91,-1640.07 316.49,-1629.76 311.95,-1639.33 318.91,-1640.07"/>
<text xml:space="preserve" text-anchor="middle" x="341.71" y="-1703.86" font-family="Arial" font-size="10.00">Auto&#45;resolved</text>
<text xml:space="preserve" text-anchor="middle" x="341.71" y="-1693.36" font-family="Arial" font-size="10.00">(55&#45;70%)</text>
</g>
<!-- qg_human&#45;&gt;qg_done -->
<g id="edge10" class="edge">
<title>qg_human&#45;&gt;qg_done</title>
<path fill="none" stroke="black" d="M254.14,-1665.5C265.63,-1655.53 277.84,-1644.93 288.49,-1635.69"/>
<polygon fill="black" stroke="black" points="290.62,-1638.48 295.88,-1629.28 286.03,-1633.19 290.62,-1638.48"/>
</g>
<!-- qg_done&#45;&gt;guardrail -->
<g id="edge11" class="edge">
<title>qg_done&#45;&gt;guardrail</title>
<path fill="none" stroke="black" d="M324.47,-1589.63C327.06,-1582.03 330.19,-1572.85 333.31,-1563.67"/>
<polygon fill="black" stroke="black" points="336.55,-1565.04 336.46,-1554.44 329.92,-1562.78 336.55,-1565.04"/>
</g>
<!-- guardrail_check -->
<g id="node11" class="node">
<title>guardrail_check</title>
<polygon fill="#ffe082" stroke="black" points="348.25,-1447.86 276,-1409.86 348.25,-1371.86 420.5,-1409.86 348.25,-1447.86"/>
<text xml:space="preserve" text-anchor="middle" x="348.25" y="-1411.56" font-family="Arial" font-size="14.00">Guardrail</text>
<text xml:space="preserve" text-anchor="middle" x="348.25" y="-1396.56" font-family="Arial" font-size="14.00">Passed?</text>
</g>
<!-- guardrail&#45;&gt;guardrail_check -->
<g id="edge12" class="edge">
<title>guardrail&#45;&gt;guardrail_check</title>
<path fill="none" stroke="black" d="M348.25,-1484.59C348.25,-1476.66 348.25,-1468.04 348.25,-1459.57"/>
<polygon fill="black" stroke="black" points="351.75,-1459.73 348.25,-1449.73 344.75,-1459.73 351.75,-1459.73"/>
</g>
<!-- guardrail_fail -->
<g id="node12" class="node">
<title>guardrail_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="133.25" cy="-1287.88" rx="102" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="133.25" y="-1297.08" font-family="Arial" font-size="14.00">Halt: Guardrail Failed</text>
<text xml:space="preserve" text-anchor="middle" x="133.25" y="-1282.08" font-family="Arial" font-size="14.00">• Show error</text>
<text xml:space="preserve" text-anchor="middle" x="133.25" y="-1267.08" font-family="Arial" font-size="14.00">• Manual fix required</text>
</g>
<!-- guardrail_check&#45;&gt;guardrail_fail -->
<g id="edge14" class="edge">
<title>guardrail_check&#45;&gt;guardrail_fail</title>
<path fill="none" stroke="black" d="M313.71,-1389.58C282.76,-1372.31 236.54,-1346.52 198.63,-1325.37"/>
<polygon fill="black" stroke="black" points="200.44,-1322.37 190,-1320.55 197.03,-1328.48 200.44,-1322.37"/>
<text xml:space="preserve" text-anchor="middle" x="260.32" y="-1344.36" font-family="Arial" font-size="10.00">Failed</text>
</g>
<!-- agents_phase -->
<g id="node13" class="node">
<title>agents_phase</title>
<polygon fill="#c5cae9" stroke="black" points="457,-1321.88 253.5,-1321.88 253.5,-1253.88 457,-1253.88 457,-1321.88"/>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1304.58" font-family="Arial" font-size="14.00">Phase: ExecutingAgents</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1289.58" font-family="Arial" font-size="14.00">• Build prompt with ACE bullets</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1274.58" font-family="Arial" font-size="14.00">• Apply ACE routing</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1259.58" font-family="Arial" font-size="14.00">• Spawn agents</text>
</g>
<!-- guardrail_check&#45;&gt;agents_phase -->
<g id="edge13" class="edge">
<title>guardrail_check&#45;&gt;agents_phase</title>
<path fill="none" stroke="black" d="M350.37,-1372.54C351.08,-1360.29 351.89,-1346.47 352.64,-1333.64"/>
<polygon fill="black" stroke="black" points="356.13,-1333.92 353.22,-1323.73 349.14,-1333.51 356.13,-1333.92"/>
<text xml:space="preserve" text-anchor="middle" x="368.46" y="-1344.36" font-family="Arial" font-size="10.00">Passed</text>
</g>
<!-- prompt_build -->
<g id="node14" class="node">
<title>prompt_build</title>
<polygon fill="#9fa8da" stroke="black" points="434.5,-1213.41 276,-1213.41 276,-1145.41 434.5,-1145.41 434.5,-1213.41"/>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1196.11" font-family="Arial" font-size="14.00">Build Prompt</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1181.11" font-family="Arial" font-size="14.00">• Load artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1166.11" font-family="Arial" font-size="14.00">• Inject ACE bullets</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1151.11" font-family="Arial" font-size="14.00">• Add agent instructions</text>
</g>
<!-- agents_phase&#45;&gt;prompt_build -->
<g id="edge15" class="edge">
<title>agents_phase&#45;&gt;prompt_build</title>
<path fill="none" stroke="black" d="M355.25,-1253.49C355.25,-1244.47 355.25,-1234.56 355.25,-1225.03"/>
<polygon fill="black" stroke="black" points="358.75,-1225.2 355.25,-1215.2 351.75,-1225.2 358.75,-1225.2"/>
</g>
<!-- spawn_agents -->
<g id="node15" class="node">
<title>spawn_agents</title>
<polygon fill="#7986cb" stroke="black" points="493.75,-1108.41 216.75,-1108.41 216.75,-1040.41 493.75,-1040.41 493.75,-1108.41"/>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1091.11" font-family="Arial" font-size="14.00">Spawn Agents (Cost&#45;Optimized)</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1076.11" font-family="Arial" font-size="14.00">• Standard: Flash&#45;Lite + Haiku + GPT&#45;Pro</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1061.11" font-family="Arial" font-size="14.00">• Implement: 2.5 Pro + Opus + GPT&#45;Codex</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-1046.11" font-family="Arial" font-size="14.00">• Parallel execution</text>
</g>
<!-- prompt_build&#45;&gt;spawn_agents -->
<g id="edge16" class="edge">
<title>prompt_build&#45;&gt;spawn_agents</title>
<path fill="none" stroke="black" d="M355.25,-1144.97C355.25,-1137.06 355.25,-1128.51 355.25,-1120.19"/>
<polygon fill="black" stroke="black" points="358.75,-1120.19 355.25,-1110.19 351.75,-1120.19 358.75,-1120.19"/>
</g>
<!-- agents_wait -->
<g id="node16" class="node">
<title>agents_wait</title>
<polygon fill="#5c6bc0" stroke="black" points="443.37,-1003.41 303.19,-1003.41 267.13,-927.41 407.31,-927.41 443.37,-1003.41"/>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-967.11" font-family="Arial" font-size="14.00">Wait for</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-952.11" font-family="Arial" font-size="14.00">Completion</text>
</g>
<!-- spawn_agents&#45;&gt;agents_wait -->
<g id="edge17" class="edge">
<title>spawn_agents&#45;&gt;agents_wait</title>
<path fill="none" stroke="black" d="M355.25,-1040.14C355.25,-1032.21 355.25,-1023.58 355.25,-1015.12"/>
<polygon fill="black" stroke="black" points="358.75,-1015.27 355.25,-1005.27 351.75,-1015.27 358.75,-1015.27"/>
</g>
<!-- agents_check -->
<g id="node17" class="node">
<title>agents_check</title>
<polygon fill="#ffe082" stroke="black" points="355.25,-890.41 268.75,-852.41 355.25,-814.41 441.75,-852.41 355.25,-890.41"/>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-854.11" font-family="Arial" font-size="14.00">All agents</text>
<text xml:space="preserve" text-anchor="middle" x="355.25" y="-839.11" font-family="Arial" font-size="14.00">completed?</text>
</g>
<!-- agents_wait&#45;&gt;agents_check -->
<g id="edge18" class="edge">
<title>agents_wait&#45;&gt;agents_check</title>
<path fill="none" stroke="black" d="M355.25,-927.14C355.25,-919.08 355.25,-910.45 355.25,-902.04"/>
<polygon fill="black" stroke="black" points="358.75,-902.28 355.25,-892.28 351.75,-902.28 358.75,-902.28"/>
</g>
<!-- agents_degrade -->
<g id="node18" class="node">
<title>agents_degrade</title>
<polygon fill="#fff9c4" stroke="black" points="327.5,-767.91 133,-767.91 133,-699.91 327.5,-699.91 327.5,-767.91"/>
<text xml:space="preserve" text-anchor="middle" x="230.25" y="-750.61" font-family="Arial" font-size="14.00">Degraded Mode</text>
<text xml:space="preserve" text-anchor="middle" x="230.25" y="-735.61" font-family="Arial" font-size="14.00">• 2/3 consensus acceptable</text>
<text xml:space="preserve" text-anchor="middle" x="230.25" y="-720.61" font-family="Arial" font-size="14.00">• Schedule follow&#45;up checklist</text>
<text xml:space="preserve" text-anchor="middle" x="230.25" y="-705.61" font-family="Arial" font-size="14.00">• Continue pipeline</text>
</g>
<!-- agents_check&#45;&gt;agents_degrade -->
<g id="edge20" class="edge">
<title>agents_check&#45;&gt;agents_degrade</title>
<path fill="none" stroke="black" d="M328.13,-826.13C312.31,-811.39 291.99,-792.45 273.96,-775.65"/>
<polygon fill="black" stroke="black" points="276.68,-773.39 266.98,-769.14 271.91,-778.51 276.68,-773.39"/>
<text xml:space="preserve" text-anchor="middle" x="310" y="-786.91" font-family="Arial" font-size="10.00">Failures</text>
</g>
<!-- consensus_phase -->
<g id="node19" class="node">
<title>consensus_phase</title>
<polygon fill="#a5d6a7" stroke="black" points="367,-662.91 181.5,-662.91 181.5,-594.91 367,-594.91 367,-662.91"/>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-645.61" font-family="Arial" font-size="14.00">Phase: CheckingConsensus</text>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-630.61" font-family="Arial" font-size="14.00">• Query local&#45;memory</text>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-615.61" font-family="Arial" font-size="14.00">• Synthesize results</text>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-600.61" font-family="Arial" font-size="14.00">• Validate agreement</text>
</g>
<!-- agents_check&#45;&gt;consensus_phase -->
<g id="edge19" class="edge">
<title>agents_check&#45;&gt;consensus_phase</title>
<path fill="none" stroke="black" d="M356.61,-814.57C356.42,-782.84 352.8,-736.5 336.25,-699.91 331.78,-690.03 325.42,-680.54 318.47,-671.91"/>
<polygon fill="black" stroke="black" points="321.2,-669.72 312.04,-664.39 315.88,-674.27 321.2,-669.72"/>
<text xml:space="preserve" text-anchor="middle" x="367.86" y="-729.66" font-family="Arial" font-size="10.00">All OK</text>
</g>
<!-- agents_degrade&#45;&gt;consensus_phase -->
<g id="edge21" class="edge">
<title>agents_degrade&#45;&gt;consensus_phase</title>
<path fill="none" stroke="black" d="M244.54,-699.47C248.07,-691.2 251.9,-682.22 255.61,-673.54"/>
<polygon fill="black" stroke="black" points="258.73,-675.14 259.44,-664.57 252.29,-672.39 258.73,-675.14"/>
</g>
<!-- consensus_check -->
<g id="node20" class="node">
<title>consensus_check</title>
<polygon fill="#ffe082" stroke="black" points="274.25,-557.91 190.75,-519.91 274.25,-481.91 357.75,-519.91 274.25,-557.91"/>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-521.61" font-family="Arial" font-size="14.00">Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-506.61" font-family="Arial" font-size="14.00">OK?</text>
</g>
<!-- consensus_phase&#45;&gt;consensus_check -->
<g id="edge22" class="edge">
<title>consensus_phase&#45;&gt;consensus_check</title>
<path fill="none" stroke="black" d="M274.25,-594.64C274.25,-586.71 274.25,-578.08 274.25,-569.62"/>
<polygon fill="black" stroke="black" points="277.75,-569.77 274.25,-559.77 270.75,-569.77 277.75,-569.77"/>
</g>
<!-- consensus_degrade -->
<g id="node21" class="node">
<title>consensus_degrade</title>
<polygon fill="#fff9c4" stroke="black" points="146.5,-421.43 0,-421.43 0,-353.43 146.5,-353.43 146.5,-421.43"/>
<text xml:space="preserve" text-anchor="middle" x="73.25" y="-404.13" font-family="Arial" font-size="14.00">Degraded Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="73.25" y="-389.13" font-family="Arial" font-size="14.00">• 2/3 majority</text>
<text xml:space="preserve" text-anchor="middle" x="73.25" y="-374.13" font-family="Arial" font-size="14.00">• Schedule checklist</text>
<text xml:space="preserve" text-anchor="middle" x="73.25" y="-359.13" font-family="Arial" font-size="14.00">• Continue</text>
</g>
<!-- consensus_check&#45;&gt;consensus_degrade -->
<g id="edge24" class="edge">
<title>consensus_check&#45;&gt;consensus_degrade</title>
<path fill="none" stroke="black" d="M240.61,-497.07C211.7,-478.3 169.28,-450.77 134.38,-428.11"/>
<polygon fill="black" stroke="black" points="136.32,-425.2 126.03,-422.69 132.51,-431.07 136.32,-425.2"/>
<text xml:space="preserve" text-anchor="middle" x="206.78" y="-454.41" font-family="Arial" font-size="10.00">Degraded</text>
<text xml:space="preserve" text-anchor="middle" x="206.78" y="-443.91" font-family="Arial" font-size="10.00">(2/3)</text>
</g>
<!-- consensus_fail -->
<g id="node22" class="node">
<title>consensus_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="274.25" cy="-387.43" rx="109.96" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-396.63" font-family="Arial" font-size="14.00">Halt: Consensus Failed</text>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-381.63" font-family="Arial" font-size="14.00">• Show conflicts</text>
<text xml:space="preserve" text-anchor="middle" x="274.25" y="-366.63" font-family="Arial" font-size="14.00">• Manual resolution</text>
</g>
<!-- consensus_check&#45;&gt;consensus_fail -->
<g id="edge25" class="edge">
<title>consensus_check&#45;&gt;consensus_fail</title>
<path fill="none" stroke="black" d="M274.25,-481.52C274.25,-467.61 274.25,-451.63 274.25,-436.88"/>
<polygon fill="black" stroke="black" points="277.75,-436.89 274.25,-426.89 270.75,-436.89 277.75,-436.89"/>
<text xml:space="preserve" text-anchor="middle" x="287.38" y="-454.41" font-family="Arial" font-size="10.00">Failed</text>
<text xml:space="preserve" text-anchor="middle" x="287.38" y="-443.91" font-family="Arial" font-size="10.00">(&lt;2/3)</text>
</g>
<!-- validate_check -->
<g id="node25" class="node">
<title>validate_check</title>
<polygon fill="#ffe082" stroke="black" points="319.25,-312.95 247.75,-274.95 319.25,-236.95 390.75,-274.95 319.25,-312.95"/>
<text xml:space="preserve" text-anchor="middle" x="319.25" y="-276.65" font-family="Arial" font-size="14.00">Stage ==</text>
<text xml:space="preserve" text-anchor="middle" x="319.25" y="-261.65" font-family="Arial" font-size="14.00">Validate?</text>
</g>
<!-- consensus_check&#45;&gt;validate_check -->
<g id="edge23" class="edge">
<title>consensus_check&#45;&gt;validate_check</title>
<path fill="none" stroke="black" d="M314.33,-499.6C342.12,-483.79 376.95,-458.55 393.25,-424.91 407.77,-394.93 406,-380.73 393.25,-349.95 385.94,-332.3 372.14,-316.66 358.43,-304.36"/>
<polygon fill="black" stroke="black" points="360.99,-301.95 351.11,-298.13 356.45,-307.28 360.99,-301.95"/>
<text xml:space="preserve" text-anchor="middle" x="436.86" y="-383.18" font-family="Arial" font-size="10.00">Consensus OK</text>
</g>
<!-- consensus_degrade&#45;&gt;validate_check -->
<g id="edge26" class="edge">
<title>consensus_degrade&#45;&gt;validate_check</title>
<path fill="none" stroke="black" d="M146.72,-353.43C186.93,-335.38 235.61,-313.52 270.99,-297.63"/>
<polygon fill="black" stroke="black" points="271.99,-301.01 279.68,-293.72 269.12,-294.63 271.99,-301.01"/>
</g>
<!-- ace_feedback -->
<g id="node23" class="node">
<title>ace_feedback</title>
<polygon fill="#e1bee7" stroke="black" stroke-width="2" points="233.5,-176.48 87,-176.48 87,-108.48 233.5,-108.48 233.5,-176.48"/>
<text xml:space="preserve" text-anchor="middle" x="160.25" y="-159.18" font-family="Arial" font-size="14.00">ACE Learning</text>
<text xml:space="preserve" text-anchor="middle" x="160.25" y="-144.18" font-family="Arial" font-size="14.00">• Send feedback</text>
<text xml:space="preserve" text-anchor="middle" x="160.25" y="-129.18" font-family="Arial" font-size="14.00">• Update playbook</text>
<text xml:space="preserve" text-anchor="middle" x="160.25" y="-114.18" font-family="Arial" font-size="14.00">• Improve for next run</text>
</g>
<!-- advance -->
<g id="node24" class="node">
<title>advance</title>
<polygon fill="#b2dfdb" stroke="black" points="405.5,-68 277,-68 277,0 405.5,0 405.5,-68"/>
<text xml:space="preserve" text-anchor="middle" x="341.25" y="-50.7" font-family="Arial" font-size="14.00">Advance Stage</text>
<text xml:space="preserve" text-anchor="middle" x="341.25" y="-35.7" font-family="Arial" font-size="14.00">• Clear ACE cache</text>
<text xml:space="preserve" text-anchor="middle" x="341.25" y="-20.7" font-family="Arial" font-size="14.00">• Persist costs</text>
<text xml:space="preserve" text-anchor="middle" x="341.25" y="-5.7" font-family="Arial" font-size="14.00">• Next stage index</text>
</g>
<!-- ace_feedback&#45;&gt;advance -->
<g id="edge29" class="edge">
<title>ace_feedback&#45;&gt;advance</title>
<path fill="none" stroke="black" d="M217.02,-108.08C235.3,-97.33 255.71,-85.32 274.63,-74.19"/>
<polygon fill="black" stroke="black" points="276.22,-77.32 283.06,-69.23 272.67,-71.28 276.22,-77.32"/>
</g>
<!-- advance&#45;&gt;stage_check -->
<g id="edge30" class="edge">
<title>advance&#45;&gt;stage_check</title>
<path fill="none" stroke="black" d="M405.93,-45.64C458.24,-58.37 523.25,-85.47 523.25,-141.48 523.25,-2198.84 523.25,-2198.84 523.25,-2198.84 523.25,-2242.03 483.91,-2275.74 451.25,-2296.28"/>
<polygon fill="black" stroke="black" points="449.87,-2293.03 443.12,-2301.2 453.49,-2299.02 449.87,-2293.03"/>
</g>
<!-- validate_check&#45;&gt;ace_feedback -->
<g id="edge27" class="edge">
<title>validate_check&#45;&gt;ace_feedback</title>
<path fill="none" stroke="black" d="M291.55,-251.23C269.09,-232.79 236.86,-206.34 209.95,-184.26"/>
<polygon fill="black" stroke="black" points="212.17,-181.55 202.22,-177.92 207.73,-186.97 212.17,-181.55"/>
<text xml:space="preserve" text-anchor="middle" x="277.39" y="-204.2" font-family="Arial" font-size="10.00">Other stages</text>
</g>
<!-- validate_fail -->
<g id="node26" class="node">
<title>validate_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="373.25" cy="-142.48" rx="122.15" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="373.25" y="-151.68" font-family="Arial" font-size="14.00">Halt: Validation Failed</text>
<text xml:space="preserve" text-anchor="middle" x="373.25" y="-136.68" font-family="Arial" font-size="14.00">• Manual review required</text>
<text xml:space="preserve" text-anchor="middle" x="373.25" y="-121.68" font-family="Arial" font-size="14.00">• Fix tests/implementation</text>
</g>
<!-- validate_check&#45;&gt;validate_fail -->
<g id="edge28" class="edge">
<title>validate_check&#45;&gt;validate_fail</title>
<path fill="none" stroke="black" d="M331.91,-243.36C338.48,-227.5 346.64,-207.78 353.97,-190.06"/>
<polygon fill="black" stroke="black" points="357,-191.88 357.59,-181.3 350.54,-189.21 357,-191.88"/>
<text xml:space="preserve" text-anchor="middle" x="366.73" y="-209.45" font-family="Arial" font-size="10.00">Validate</text>
<text xml:space="preserve" text-anchor="middle" x="366.73" y="-198.95" font-family="Arial" font-size="10.00">+ failed</text>
</g>
<!-- leg_ace -->
<g id="node27" class="node">
<title>leg_ace</title>
<polygon fill="#e1bee7" stroke="black" stroke-width="2" points="724.38,-2460.9 574.12,-2460.9 574.12,-2424.9 724.38,-2424.9 724.38,-2460.9"/>
<text xml:space="preserve" text-anchor="middle" x="649.25" y="-2437.1" font-family="Arial" font-size="14.00">NEW: ACE Integration</text>
</g>
<!-- leg_quality -->
<g id="node28" class="node">
<title>leg_quality</title>
<polygon fill="#ffccbc" stroke="black" points="727,-2337.81 571.5,-2337.81 571.5,-2301.81 727,-2301.81 727,-2337.81"/>
<text xml:space="preserve" text-anchor="middle" x="649.25" y="-2314.01" font-family="Arial" font-size="14.00">Strategic Quality Gates</text>
</g>
<!-- leg_ace&#45;&gt;leg_quality -->
<!-- leg_degrade -->
<g id="node29" class="node">
<title>leg_degrade</title>
<polygon fill="#fff9c4" stroke="black" points="740.5,-2215.84 558,-2215.84 558,-2179.84 740.5,-2179.84 740.5,-2215.84"/>
<text xml:space="preserve" text-anchor="middle" x="649.25" y="-2192.04" font-family="Arial" font-size="14.00">Degraded Mode (no retries)</text>
</g>
<!-- leg_quality&#45;&gt;leg_degrade -->
<!-- leg_halt -->
<g id="node30" class="node">
<title>leg_halt</title>
<path fill="#ffcdd2" stroke="black" d="M677.88,-2103.36C677.88,-2103.36 620.62,-2103.36 620.62,-2103.36 614.62,-2103.36 608.62,-2097.36 608.62,-2091.36 608.62,-2091.36 608.62,-2079.36 608.62,-2079.36 608.62,-2073.36 614.62,-2067.36 620.62,-2067.36 620.62,-2067.36 677.88,-2067.36 677.88,-2067.36 683.88,-2067.36 689.88,-2073.36 689.88,-2079.36 689.88,-2079.36 689.88,-2091.36 689.88,-2091.36 689.88,-2097.36 683.88,-2103.36 677.88,-2103.36"/>
<text xml:space="preserve" text-anchor="middle" x="649.25" y="-2079.56" font-family="Arial" font-size="14.00">Halt Points</text>
</g>
<!-- leg_degrade&#45;&gt;leg_halt -->
</g>
</svg>
