<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (0)
 -->
<!-- Title: spec_kit_pipeline_state_machine Pages: 1 -->
<svg width="1029pt" height="2866pt"
 viewBox="0.00 0.00 1029.00 2866.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2861.75)">
<title>spec_kit_pipeline_state_machine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-2861.75 1024.77,-2861.75 1024.77,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="510.39" y="-2840.45" font-family="Arial" font-size="14.00">Spec&#45;Kit Pipeline State Machine</text>
<text xml:space="preserve" text-anchor="middle" x="510.39" y="-2825.45" font-family="Arial" font-size="14.00">Detailed /speckit.auto Workflow</text>
<g id="clust1" class="cluster">
<title>cluster_legend</title>
<polygon fill="#f5f5f5" stroke="black" points="852.77,-2331.5 852.77,-2811.75 1012.77,-2811.75 1012.77,-2331.5 852.77,-2331.5"/>
<text xml:space="preserve" text-anchor="middle" x="932.77" y="-2794.45" font-family="Arial" font-size="14.00">State Machine Phases</text>
</g>
<!-- init -->
<g id="node1" class="node">
<title>init</title>
<ellipse fill="#e3f2fd" stroke="black" cx="323.77" cy="-2762.75" rx="118.44" ry="48.08"/>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2779.45" font-family="Arial" font-size="14.00">/speckit.auto SPEC&#45;ID</text>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2764.45" font-family="Arial" font-size="14.00">• Validate config</text>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2749.45" font-family="Arial" font-size="14.00">• Initialize SpecAutoState</text>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2734.45" font-family="Arial" font-size="14.00">• Set resume_from stage</text>
</g>
<!-- stage_check -->
<g id="node2" class="node">
<title>stage_check</title>
<polygon fill="#fff9c4" stroke="black" points="323.77,-2677.67 217.77,-2639.67 323.77,-2601.67 429.77,-2639.67 323.77,-2677.67"/>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2641.37" font-family="Arial" font-size="14.00">Current Stage</text>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2626.37" font-family="Arial" font-size="14.00">&lt; stages.len()?</text>
</g>
<!-- init&#45;&gt;stage_check -->
<g id="edge1" class="edge">
<title>init&#45;&gt;stage_check</title>
<path fill="none" stroke="black" d="M323.77,-2714.24C323.77,-2706.05 323.77,-2697.52 323.77,-2689.29"/>
<polygon fill="black" stroke="black" points="327.27,-2689.45 323.77,-2679.45 320.27,-2689.45 327.27,-2689.45"/>
</g>
<!-- complete -->
<g id="node3" class="node">
<title>complete</title>
<ellipse fill="#c8e6c9" stroke="black" cx="106.77" cy="-2496.58" rx="106.77" ry="48.08"/>
<text xml:space="preserve" text-anchor="middle" x="106.77" y="-2513.28" font-family="Arial" font-size="14.00">Pipeline Complete</text>
<text xml:space="preserve" text-anchor="middle" x="106.77" y="-2498.28" font-family="Arial" font-size="14.00">• Finalize quality gates</text>
<text xml:space="preserve" text-anchor="middle" x="106.77" y="-2483.28" font-family="Arial" font-size="14.00">• Clear state</text>
<text xml:space="preserve" text-anchor="middle" x="106.77" y="-2468.28" font-family="Arial" font-size="14.00">• Success message</text>
</g>
<!-- stage_check&#45;&gt;complete -->
<g id="edge2" class="edge">
<title>stage_check&#45;&gt;complete</title>
<path fill="none" stroke="black" d="M286.96,-2614.73C256.64,-2595.02 212.8,-2566.52 175.96,-2542.56"/>
<polygon fill="black" stroke="black" points="178.31,-2539.92 168.02,-2537.4 174.5,-2545.79 178.31,-2539.92"/>
<text xml:space="preserve" text-anchor="middle" x="256.46" y="-2574.17" font-family="Arial" font-size="10.00">All stages</text>
<text xml:space="preserve" text-anchor="middle" x="256.46" y="-2563.67" font-family="Arial" font-size="10.00">complete</text>
</g>
<!-- qg_check -->
<g id="node4" class="node">
<title>qg_check</title>
<polygon fill="#ffe082" stroke="black" points="323.77,-2534.58 232.02,-2496.58 323.77,-2458.58 415.52,-2496.58 323.77,-2534.58"/>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2498.28" font-family="Arial" font-size="14.00">Quality Gate</text>
<text xml:space="preserve" text-anchor="middle" x="323.77" y="-2483.28" font-family="Arial" font-size="14.00">Checkpoint?</text>
</g>
<!-- stage_check&#45;&gt;qg_check -->
<g id="edge3" class="edge">
<title>stage_check&#45;&gt;qg_check</title>
<path fill="none" stroke="black" d="M323.77,-2601.23C323.77,-2584.35 323.77,-2564.21 323.77,-2546.19"/>
<polygon fill="black" stroke="black" points="327.27,-2546.22 323.77,-2536.22 320.27,-2546.22 327.27,-2546.22"/>
<text xml:space="preserve" text-anchor="middle" x="350.77" y="-2568.92" font-family="Arial" font-size="10.00">More stages</text>
</g>
<!-- qg_execute -->
<g id="node5" class="node">
<title>qg_execute</title>
<polygon fill="#ffccbc" stroke="black" points="291.02,-2391.5 120.52,-2391.5 120.52,-2323.5 291.02,-2323.5 291.02,-2391.5"/>
<text xml:space="preserve" text-anchor="middle" x="205.77" y="-2374.2" font-family="Arial" font-size="14.00">Execute Quality Gate</text>
<text xml:space="preserve" text-anchor="middle" x="205.77" y="-2359.2" font-family="Arial" font-size="14.00">• Spawn 3 agents</text>
<text xml:space="preserve" text-anchor="middle" x="205.77" y="-2344.2" font-family="Arial" font-size="14.00">• Check issues</text>
<text xml:space="preserve" text-anchor="middle" x="205.77" y="-2329.2" font-family="Arial" font-size="14.00">• Auto&#45;resolve or escalate</text>
</g>
<!-- qg_check&#45;&gt;qg_execute -->
<g id="edge4" class="edge">
<title>qg_check&#45;&gt;qg_execute</title>
<path fill="none" stroke="black" d="M296.73,-2469.38C285.16,-2457.78 271.7,-2443.78 260.27,-2430.5 252.21,-2421.13 243.94,-2410.7 236.36,-2400.75"/>
<polygon fill="black" stroke="black" points="239.34,-2398.89 230.53,-2393.01 233.75,-2403.1 239.34,-2398.89"/>
<text xml:space="preserve" text-anchor="middle" x="285.02" y="-2421" font-family="Arial" font-size="10.00">Checkpoint</text>
<text xml:space="preserve" text-anchor="middle" x="285.02" y="-2410.5" font-family="Arial" font-size="10.00">required</text>
</g>
<!-- guardrail_phase -->
<g id="node7" class="node">
<title>guardrail_phase</title>
<polygon fill="#b3e5fc" stroke="black" points="338.15,-2154.5 129.4,-2154.5 129.4,-2086.5 338.15,-2086.5 338.15,-2154.5"/>
<text xml:space="preserve" text-anchor="middle" x="233.77" y="-2137.2" font-family="Arial" font-size="14.00">Phase: Guardrail</text>
<text xml:space="preserve" text-anchor="middle" x="233.77" y="-2122.2" font-family="Arial" font-size="14.00">• Determine guardrail command</text>
<text xml:space="preserve" text-anchor="middle" x="233.77" y="-2107.2" font-family="Arial" font-size="14.00">• Execute shell script</text>
<text xml:space="preserve" text-anchor="middle" x="233.77" y="-2092.2" font-family="Arial" font-size="14.00">• Wait for task completion</text>
</g>
<!-- qg_check&#45;&gt;guardrail_phase -->
<g id="edge5" class="edge">
<title>qg_check&#45;&gt;guardrail_phase</title>
<path fill="none" stroke="black" d="M328.65,-2460.35C335.01,-2403.35 341.41,-2288.45 304.77,-2201 299.02,-2187.26 289.86,-2174.31 280.02,-2163"/>
<polygon fill="black" stroke="black" points="282.76,-2160.8 273.42,-2155.8 277.6,-2165.53 282.76,-2160.8"/>
<text xml:space="preserve" text-anchor="middle" x="361.18" y="-2296" font-family="Arial" font-size="10.00">No checkpoint</text>
</g>
<!-- qg_human -->
<g id="node6" class="node">
<title>qg_human</title>
<polygon fill="#ffab91" stroke="black" points="296.23,-2277 152.33,-2277 115.32,-2201 259.21,-2201 296.23,-2277"/>
<text xml:space="preserve" text-anchor="middle" x="205.77" y="-2240.7" font-family="Arial" font-size="14.00">Human</text>
<text xml:space="preserve" text-anchor="middle" x="205.77" y="-2225.7" font-family="Arial" font-size="14.00">Intervention</text>
</g>
<!-- qg_execute&#45;&gt;qg_human -->
<g id="edge6" class="edge">
<title>qg_execute&#45;&gt;qg_human</title>
<path fill="none" stroke="black" d="M205.77,-2323.12C205.77,-2312.43 205.77,-2300.36 205.77,-2288.8"/>
<polygon fill="black" stroke="black" points="209.27,-2289 205.77,-2279 202.27,-2289 209.27,-2289"/>
<text xml:space="preserve" text-anchor="middle" x="227.52" y="-2296" font-family="Arial" font-size="10.00">Escalated</text>
</g>
<!-- qg_execute&#45;&gt;guardrail_phase -->
<g id="edge7" class="edge">
<title>qg_execute&#45;&gt;guardrail_phase</title>
<path fill="none" stroke="black" d="M120.33,-2333.61C92.17,-2321.56 63.9,-2303.56 47.52,-2277 29.79,-2248.25 28.91,-2229.19 47.52,-2201 64.26,-2175.66 90.91,-2158.36 118.88,-2146.57"/>
<polygon fill="black" stroke="black" points="119.81,-2149.97 127.82,-2143.03 117.24,-2143.46 119.81,-2149.97"/>
<text xml:space="preserve" text-anchor="middle" x="77.15" y="-2234.75" font-family="Arial" font-size="10.00">Auto&#45;resolved</text>
</g>
<!-- qg_human&#45;&gt;guardrail_phase -->
<g id="edge8" class="edge">
<title>qg_human&#45;&gt;guardrail_phase</title>
<path fill="none" stroke="black" d="M214.71,-2200.82C217.37,-2189.73 220.32,-2177.47 223.09,-2165.96"/>
<polygon fill="black" stroke="black" points="226.49,-2166.8 225.42,-2156.26 219.68,-2165.16 226.49,-2166.8"/>
<text xml:space="preserve" text-anchor="middle" x="245.82" y="-2173.5" font-family="Arial" font-size="10.00">Human OK</text>
</g>
<!-- guardrail_fail -->
<g id="node11" class="node">
<title>guardrail_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="264.77" cy="-1613" rx="103.06" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="264.77" y="-1622.2" font-family="Arial" font-size="14.00">Halt Pipeline</text>
<text xml:space="preserve" text-anchor="middle" x="264.77" y="-1607.2" font-family="Arial" font-size="14.00">• Show error</text>
<text xml:space="preserve" text-anchor="middle" x="264.77" y="-1592.2" font-family="Arial" font-size="14.00">• Provide resume hint</text>
</g>
<!-- qg_human&#45;&gt;guardrail_fail -->
<g id="edge9" class="edge">
<title>qg_human&#45;&gt;guardrail_fail</title>
<path fill="none" stroke="black" d="M117.24,-2200.63C87.99,-2181.98 62.77,-2155.92 62.77,-2121.5 62.77,-2121.5 62.77,-2121.5 62.77,-1738 62.77,-1684.89 114.12,-1653.81 165.04,-1636.05"/>
<polygon fill="black" stroke="black" points="166.05,-1639.4 174.44,-1632.94 163.85,-1632.76 166.05,-1639.4"/>
<text xml:space="preserve" text-anchor="middle" x="94.27" y="-1909" font-family="Arial" font-size="10.00">Human blocks</text>
</g>
<!-- guardrail_exec -->
<g id="node8" class="node">
<title>guardrail_exec</title>
<polygon fill="#81d4fa" stroke="black" points="321.52,-2049.5 172.02,-2049.5 172.02,-1936.5 321.52,-1936.5 321.52,-2049.5"/>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-2032.2" font-family="Arial" font-size="14.00">Execute Guardrail</text>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-2017.2" font-family="Arial" font-size="14.00">• /guardrail.plan</text>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-2002.2" font-family="Arial" font-size="14.00">• /guardrail.tasks</text>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-1987.2" font-family="Arial" font-size="14.00">• /guardrail.implement</text>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-1972.2" font-family="Arial" font-size="14.00">• /guardrail.validate</text>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-1957.2" font-family="Arial" font-size="14.00">• /guardrail.audit</text>
<text xml:space="preserve" text-anchor="middle" x="246.77" y="-1942.2" font-family="Arial" font-size="14.00">• /guardrail.unlock</text>
</g>
<!-- guardrail_phase&#45;&gt;guardrail_exec -->
<g id="edge10" class="edge">
<title>guardrail_phase&#45;&gt;guardrail_exec</title>
<path fill="none" stroke="black" d="M237.22,-2086.2C238.03,-2078.42 238.91,-2069.87 239.81,-2061.2"/>
<polygon fill="black" stroke="black" points="243.29,-2061.6 240.84,-2051.3 236.33,-2060.88 243.29,-2061.6"/>
</g>
<!-- task_wait -->
<g id="node9" class="node">
<title>task_wait</title>
<polygon fill="#4fc3f7" stroke="black" points="362.01,-1890 205.74,-1890 165.54,-1814 321.81,-1814 362.01,-1890"/>
<text xml:space="preserve" text-anchor="middle" x="263.77" y="-1853.7" font-family="Arial" font-size="14.00">Wait for Task</text>
<text xml:space="preserve" text-anchor="middle" x="263.77" y="-1838.7" font-family="Arial" font-size="14.00">Completion</text>
</g>
<!-- guardrail_exec&#45;&gt;task_wait -->
<g id="edge11" class="edge">
<title>guardrail_exec&#45;&gt;task_wait</title>
<path fill="none" stroke="black" d="M253.59,-1936.26C254.99,-1924.83 256.45,-1912.88 257.82,-1901.71"/>
<polygon fill="black" stroke="black" points="261.27,-1902.27 259.01,-1891.92 254.33,-1901.42 261.27,-1902.27"/>
</g>
<!-- guardrail_check -->
<g id="node10" class="node">
<title>guardrail_check</title>
<polygon fill="#ffe082" stroke="black" points="264.77,-1777 190.27,-1739 264.77,-1701 339.27,-1739 264.77,-1777"/>
<text xml:space="preserve" text-anchor="middle" x="264.77" y="-1740.7" font-family="Arial" font-size="14.00">Guardrail</text>
<text xml:space="preserve" text-anchor="middle" x="264.77" y="-1725.7" font-family="Arial" font-size="14.00">Success?</text>
</g>
<!-- task_wait&#45;&gt;guardrail_check -->
<g id="edge12" class="edge">
<title>task_wait&#45;&gt;guardrail_check</title>
<path fill="none" stroke="black" d="M264.11,-1813.73C264.18,-1805.68 264.26,-1797.05 264.34,-1788.63"/>
<polygon fill="black" stroke="black" points="267.83,-1788.91 264.42,-1778.87 260.83,-1788.84 267.83,-1788.91"/>
</g>
<!-- guardrail_check&#45;&gt;guardrail_fail -->
<g id="edge14" class="edge">
<title>guardrail_check&#45;&gt;guardrail_fail</title>
<path fill="none" stroke="black" d="M264.77,-1700.46C264.77,-1688.34 264.77,-1674.74 264.77,-1661.98"/>
<polygon fill="black" stroke="black" points="268.27,-1662.07 264.77,-1652.07 261.27,-1662.07 268.27,-1662.07"/>
<text xml:space="preserve" text-anchor="middle" x="277.9" y="-1673.5" font-family="Arial" font-size="10.00">Failed</text>
</g>
<!-- agents_phase -->
<g id="node12" class="node">
<title>agents_phase</title>
<polygon fill="#c5cae9" stroke="black" points="549.27,-1654.5 386.27,-1654.5 386.27,-1571.5 549.27,-1571.5 549.27,-1654.5"/>
<text xml:space="preserve" text-anchor="middle" x="467.77" y="-1637.2" font-family="Arial" font-size="14.00">Phase: ExecutingAgents</text>
<text xml:space="preserve" text-anchor="middle" x="467.77" y="-1622.2" font-family="Arial" font-size="14.00">• Build stage prompt</text>
<text xml:space="preserve" text-anchor="middle" x="467.77" y="-1607.2" font-family="Arial" font-size="14.00">• Apply ACE routing</text>
<text xml:space="preserve" text-anchor="middle" x="467.77" y="-1592.2" font-family="Arial" font-size="14.00">• Set aggregator effort</text>
<text xml:space="preserve" text-anchor="middle" x="467.77" y="-1577.2" font-family="Arial" font-size="14.00">• Spawn agents</text>
</g>
<!-- guardrail_check&#45;&gt;agents_phase -->
<g id="edge13" class="edge">
<title>guardrail_check&#45;&gt;agents_phase</title>
<path fill="none" stroke="black" d="M297.84,-1717.8C323.2,-1702.31 359.23,-1680.3 391.59,-1660.54"/>
<polygon fill="black" stroke="black" points="393.05,-1663.75 399.76,-1655.55 389.4,-1657.77 393.05,-1663.75"/>
<text xml:space="preserve" text-anchor="middle" x="385.4" y="-1673.5" font-family="Arial" font-size="10.00">Success</text>
</g>
<!-- prompt_build -->
<g id="node13" class="node">
<title>prompt_build</title>
<polygon fill="#9fa8da" stroke="black" points="534.52,-1534.5 391.02,-1534.5 391.02,-1466.5 534.52,-1466.5 534.52,-1534.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1517.2" font-family="Arial" font-size="14.00">Build Stage Prompt</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1502.2" font-family="Arial" font-size="14.00">• Load spec artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1487.2" font-family="Arial" font-size="14.00">• Add retry context</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1472.2" font-family="Arial" font-size="14.00">• Apply ACE injection</text>
</g>
<!-- agents_phase&#45;&gt;prompt_build -->
<g id="edge15" class="edge">
<title>agents_phase&#45;&gt;prompt_build</title>
<path fill="none" stroke="black" d="M465.93,-1571.17C465.56,-1563.06 465.17,-1554.51 464.8,-1546.28"/>
<polygon fill="black" stroke="black" points="468.3,-1546.28 464.35,-1536.45 461.31,-1546.6 468.3,-1546.28"/>
</g>
<!-- ace_routing -->
<g id="node14" class="node">
<title>ace_routing</title>
<polygon fill="#7986cb" stroke="black" points="537.52,-1429.5 388.02,-1429.5 388.02,-1316.5 537.52,-1316.5 537.52,-1429.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1412.2" font-family="Arial" font-size="14.00">ACE Route Selection</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1397.2" font-family="Arial" font-size="14.00">• Analyze prompt size</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1382.2" font-family="Arial" font-size="14.00">• Check conflict retry</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1367.2" font-family="Arial" font-size="14.00">• Set aggregator effort</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1352.2" font-family="Arial" font-size="14.00"> &#160;&#45; low (standard)</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1337.2" font-family="Arial" font-size="14.00"> &#160;&#45; medium (complex)</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1322.2" font-family="Arial" font-size="14.00"> &#160;&#45; high (conflict)</text>
</g>
<!-- prompt_build&#45;&gt;ace_routing -->
<g id="edge16" class="edge">
<title>prompt_build&#45;&gt;ace_routing</title>
<path fill="none" stroke="black" d="M462.77,-1466.2C462.77,-1458.42 462.77,-1449.87 462.77,-1441.2"/>
<polygon fill="black" stroke="black" points="466.27,-1441.3 462.77,-1431.3 459.27,-1441.3 466.27,-1441.3"/>
</g>
<!-- spawn_agents -->
<g id="node15" class="node">
<title>spawn_agents</title>
<polygon fill="#5c6bc0" stroke="black" points="551.77,-1279.5 373.77,-1279.5 373.77,-1196.5 551.77,-1196.5 551.77,-1279.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1262.2" font-family="Arial" font-size="14.00">Spawn Agents</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1247.2" font-family="Arial" font-size="14.00">• Gemini (gemini&#45;1.5&#45;pro)</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1232.2" font-family="Arial" font-size="14.00">• Claude (claude&#45;sonnet&#45;4)</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1217.2" font-family="Arial" font-size="14.00">• GPT Pro (gpt&#45;5&#45;codex)</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1202.2" font-family="Arial" font-size="14.00">• [+GPT Codex if Tier 3]</text>
</g>
<!-- ace_routing&#45;&gt;spawn_agents -->
<g id="edge17" class="edge">
<title>ace_routing&#45;&gt;spawn_agents</title>
<path fill="none" stroke="black" d="M462.77,-1316.37C462.77,-1308.04 462.77,-1299.49 462.77,-1291.24"/>
<polygon fill="black" stroke="black" points="466.27,-1291.36 462.77,-1281.36 459.27,-1291.36 466.27,-1291.36"/>
</g>
<!-- agents_wait -->
<g id="node16" class="node">
<title>agents_wait</title>
<polygon fill="#3f51b5" stroke="black" points="547.01,-1159.5 413.01,-1159.5 378.54,-1083.5 512.54,-1083.5 547.01,-1159.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1123.2" font-family="Arial" font-size="14.00">Wait for All</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1108.2" font-family="Arial" font-size="14.00">Agents</text>
</g>
<!-- spawn_agents&#45;&gt;agents_wait -->
<g id="edge18" class="edge">
<title>spawn_agents&#45;&gt;agents_wait</title>
<path fill="none" stroke="black" d="M462.77,-1196.31C462.77,-1188.09 462.77,-1179.37 462.77,-1170.92"/>
<polygon fill="black" stroke="black" points="466.27,-1171.14 462.77,-1161.14 459.27,-1171.14 466.27,-1171.14"/>
</g>
<!-- agent_retry_check -->
<g id="node17" class="node">
<title>agent_retry_check</title>
<polygon fill="#ffe082" stroke="black" points="462.77,-1046.5 373.27,-1008.5 462.77,-970.5 552.27,-1008.5 462.77,-1046.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-1010.2" font-family="Arial" font-size="14.00">Agents</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-995.2" font-family="Arial" font-size="14.00">Completed?</text>
</g>
<!-- agents_wait&#45;&gt;agent_retry_check -->
<g id="edge19" class="edge">
<title>agents_wait&#45;&gt;agent_retry_check</title>
<path fill="none" stroke="black" d="M462.77,-1083.23C462.77,-1075.18 462.77,-1066.55 462.77,-1058.13"/>
<polygon fill="black" stroke="black" points="466.27,-1058.37 462.77,-1048.37 459.27,-1058.37 466.27,-1058.37"/>
</g>
<!-- agent_retry -->
<g id="node18" class="node">
<title>agent_retry</title>
<polygon fill="#ffccbc" stroke="black" points="352.15,-913.5 221.4,-913.5 221.4,-830.5 352.15,-830.5 352.15,-913.5"/>
<text xml:space="preserve" text-anchor="middle" x="286.77" y="-896.2" font-family="Arial" font-size="14.00">Retry Agent</text>
<text xml:space="preserve" text-anchor="middle" x="286.77" y="-881.2" font-family="Arial" font-size="14.00">Execution</text>
<text xml:space="preserve" text-anchor="middle" x="286.77" y="-866.2" font-family="Arial" font-size="14.00">• Max 3 attempts</text>
<text xml:space="preserve" text-anchor="middle" x="286.77" y="-851.2" font-family="Arial" font-size="14.00">• Add retry context</text>
<text xml:space="preserve" text-anchor="middle" x="286.77" y="-836.2" font-family="Arial" font-size="14.00">• Re&#45;spawn agents</text>
</g>
<!-- agent_retry_check&#45;&gt;agent_retry -->
<g id="edge21" class="edge">
<title>agent_retry_check&#45;&gt;agent_retry</title>
<path fill="none" stroke="black" d="M431.31,-983.45C408.56,-966.07 377.06,-942 349.28,-920.77"/>
<polygon fill="black" stroke="black" points="351.68,-918.2 341.61,-914.91 347.43,-923.76 351.68,-918.2"/>
<text xml:space="preserve" text-anchor="middle" x="409.29" y="-943" font-family="Arial" font-size="10.00">Failures</text>
<text xml:space="preserve" text-anchor="middle" x="409.29" y="-932.5" font-family="Arial" font-size="10.00">retry &lt; 3</text>
</g>
<!-- agent_fail -->
<g id="node19" class="node">
<title>agent_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="636.77" cy="-872" rx="63.29" ry="26.87"/>
<text xml:space="preserve" text-anchor="middle" x="636.77" y="-873.7" font-family="Arial" font-size="14.00">Max Retries</text>
<text xml:space="preserve" text-anchor="middle" x="636.77" y="-858.7" font-family="Arial" font-size="14.00">Exhausted</text>
</g>
<!-- agent_retry_check&#45;&gt;agent_fail -->
<g id="edge22" class="edge">
<title>agent_retry_check&#45;&gt;agent_fail</title>
<path fill="none" stroke="black" d="M493.88,-983.45C523.06,-960.9 566.79,-927.09 598.19,-902.83"/>
<polygon fill="black" stroke="black" points="600.13,-905.75 605.9,-896.87 595.85,-900.21 600.13,-905.75"/>
<text xml:space="preserve" text-anchor="middle" x="581.94" y="-943" font-family="Arial" font-size="10.00">Failures</text>
<text xml:space="preserve" text-anchor="middle" x="581.94" y="-932.5" font-family="Arial" font-size="10.00">retry &gt;= 3</text>
</g>
<!-- consensus_phase -->
<g id="node20" class="node">
<title>consensus_phase</title>
<polygon fill="#a5d6a7" stroke="black" points="555.52,-906 370.02,-906 370.02,-838 555.52,-838 555.52,-906"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-888.7" font-family="Arial" font-size="14.00">Phase: CheckingConsensus</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-873.7" font-family="Arial" font-size="14.00">• Query local&#45;memory</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-858.7" font-family="Arial" font-size="14.00">• Synthesize results</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-843.7" font-family="Arial" font-size="14.00">• Validate agreement</text>
</g>
<!-- agent_retry_check&#45;&gt;consensus_phase -->
<g id="edge20" class="edge">
<title>agent_retry_check&#45;&gt;consensus_phase</title>
<path fill="none" stroke="black" d="M462.77,-970.03C462.77,-953.74 462.77,-934.52 462.77,-917.51"/>
<polygon fill="black" stroke="black" points="466.27,-917.66 462.77,-907.66 459.27,-917.66 466.27,-917.66"/>
<text xml:space="preserve" text-anchor="middle" x="489.77" y="-937.75" font-family="Arial" font-size="10.00">All complete</text>
</g>
<!-- agent_retry&#45;&gt;prompt_build -->
<g id="edge23" class="edge">
<title>agent_retry&#45;&gt;prompt_build</title>
<path fill="none" stroke="black" d="M296.07,-913.97C301.29,-940.5 306.77,-975.87 306.77,-1007.5 306.77,-1374 306.77,-1374 306.77,-1374 306.77,-1416.92 343.06,-1447.63 380.63,-1467.93"/>
<polygon fill="black" stroke="black" points="378.87,-1470.96 389.36,-1472.43 382.08,-1464.73 378.87,-1470.96"/>
</g>
<!-- query_memory -->
<g id="node21" class="node">
<title>query_memory</title>
<polygon fill="#81c784" stroke="black" points="555.15,-793.5 370.4,-793.5 370.4,-725.5 555.15,-725.5 555.15,-793.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-776.2" font-family="Arial" font-size="14.00">Query Local&#45;Memory</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-761.2" font-family="Arial" font-size="14.00">• Search by spec_id + stage</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-746.2" font-family="Arial" font-size="14.00">• Collect agent artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-731.2" font-family="Arial" font-size="14.00">• Extract verdicts</text>
</g>
<!-- consensus_phase&#45;&gt;query_memory -->
<g id="edge24" class="edge">
<title>consensus_phase&#45;&gt;query_memory</title>
<path fill="none" stroke="black" d="M462.77,-837.55C462.77,-827.38 462.77,-816.03 462.77,-805.25"/>
<polygon fill="black" stroke="black" points="466.27,-805.35 462.77,-795.35 459.27,-805.35 466.27,-805.35"/>
</g>
<!-- synthesize -->
<g id="node22" class="node">
<title>synthesize</title>
<polygon fill="#66bb6a" stroke="black" points="546.15,-688.5 379.4,-688.5 379.4,-620.5 546.15,-620.5 546.15,-688.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-671.2" font-family="Arial" font-size="14.00">Synthesize Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-656.2" font-family="Arial" font-size="14.00">• Compare agent outputs</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-641.2" font-family="Arial" font-size="14.00">• Check agreement</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-626.2" font-family="Arial" font-size="14.00">• Detect conflicts</text>
</g>
<!-- query_memory&#45;&gt;synthesize -->
<g id="edge25" class="edge">
<title>query_memory&#45;&gt;synthesize</title>
<path fill="none" stroke="black" d="M462.77,-725.06C462.77,-717.15 462.77,-708.6 462.77,-700.28"/>
<polygon fill="black" stroke="black" points="466.27,-700.29 462.77,-690.29 459.27,-700.29 466.27,-700.29"/>
</g>
<!-- consensus_check -->
<g id="node23" class="node">
<title>consensus_check</title>
<polygon fill="#ffe082" stroke="black" points="462.77,-583.5 379.27,-545.5 462.77,-507.5 546.27,-545.5 462.77,-583.5"/>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-547.2" font-family="Arial" font-size="14.00">Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="462.77" y="-532.2" font-family="Arial" font-size="14.00">OK?</text>
</g>
<!-- synthesize&#45;&gt;consensus_check -->
<g id="edge26" class="edge">
<title>synthesize&#45;&gt;consensus_check</title>
<path fill="none" stroke="black" d="M462.77,-620.23C462.77,-612.3 462.77,-603.68 462.77,-595.21"/>
<polygon fill="black" stroke="black" points="466.27,-595.37 462.77,-585.37 459.27,-595.37 466.27,-595.37"/>
</g>
<!-- consensus_retry_check -->
<g id="node24" class="node">
<title>consensus_retry_check</title>
<polygon fill="#ffe082" stroke="black" points="525.77,-450.5 443.02,-412.5 525.77,-374.5 608.52,-412.5 525.77,-450.5"/>
<text xml:space="preserve" text-anchor="middle" x="525.77" y="-414.2" font-family="Arial" font-size="14.00">Retry</text>
<text xml:space="preserve" text-anchor="middle" x="525.77" y="-399.2" font-family="Arial" font-size="14.00">Count &lt; 3?</text>
</g>
<!-- consensus_check&#45;&gt;consensus_retry_check -->
<g id="edge28" class="edge">
<title>consensus_check&#45;&gt;consensus_retry_check</title>
<path fill="none" stroke="black" d="M477.54,-513.79C486.07,-496.05 496.91,-473.51 506.15,-454.3"/>
<polygon fill="black" stroke="black" points="509.26,-455.91 510.44,-445.39 502.95,-452.88 509.26,-455.91"/>
<text xml:space="preserve" text-anchor="middle" x="522.8" y="-480" font-family="Arial" font-size="10.00">Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="522.8" y="-469.5" font-family="Arial" font-size="10.00">failed</text>
</g>
<!-- validate_check -->
<g id="node29" class="node">
<title>validate_check</title>
<polygon fill="#ffe082" stroke="black" points="348.77,-450.5 277.27,-412.5 348.77,-374.5 420.27,-412.5 348.77,-450.5"/>
<text xml:space="preserve" text-anchor="middle" x="348.77" y="-414.2" font-family="Arial" font-size="14.00">Stage ==</text>
<text xml:space="preserve" text-anchor="middle" x="348.77" y="-399.2" font-family="Arial" font-size="14.00">Validate?</text>
</g>
<!-- consensus_check&#45;&gt;validate_check -->
<g id="edge27" class="edge">
<title>consensus_check&#45;&gt;validate_check</title>
<path fill="none" stroke="black" d="M439.43,-517.67C421.79,-497.41 397.47,-469.45 378.45,-447.6"/>
<polygon fill="black" stroke="black" points="381.12,-445.34 371.92,-440.1 375.84,-449.94 381.12,-445.34"/>
<text xml:space="preserve" text-anchor="middle" x="445.97" y="-474.75" font-family="Arial" font-size="10.00">Consensus OK</text>
</g>
<!-- consensus_retry -->
<g id="node25" class="node">
<title>consensus_retry</title>
<polygon fill="#ffccbc" stroke="black" points="804.77,-324 650.77,-324 650.77,-256 804.77,-256 804.77,-324"/>
<text xml:space="preserve" text-anchor="middle" x="727.77" y="-306.7" font-family="Arial" font-size="14.00">Retry Stage</text>
<text xml:space="preserve" text-anchor="middle" x="727.77" y="-291.7" font-family="Arial" font-size="14.00">• Increment retry count</text>
<text xml:space="preserve" text-anchor="middle" x="727.77" y="-276.7" font-family="Arial" font-size="14.00">• Add retry context</text>
<text xml:space="preserve" text-anchor="middle" x="727.77" y="-261.7" font-family="Arial" font-size="14.00">• Reset to Guardrail</text>
</g>
<!-- consensus_retry_check&#45;&gt;consensus_retry -->
<g id="edge29" class="edge">
<title>consensus_retry_check&#45;&gt;consensus_retry</title>
<path fill="none" stroke="black" d="M560.96,-390.51C588.74,-373.94 628.28,-350.35 661.89,-330.3"/>
<polygon fill="black" stroke="black" points="663.56,-333.38 670.36,-325.25 659.97,-327.37 663.56,-333.38"/>
<text xml:space="preserve" text-anchor="middle" x="641.08" y="-347" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- consensus_fail -->
<g id="node26" class="node">
<title>consensus_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="525.77" cy="-290" rx="107.3" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="525.77" y="-299.2" font-family="Arial" font-size="14.00">Consensus Failed</text>
<text xml:space="preserve" text-anchor="middle" x="525.77" y="-284.2" font-family="Arial" font-size="14.00">• Show disagreements</text>
<text xml:space="preserve" text-anchor="middle" x="525.77" y="-269.2" font-family="Arial" font-size="14.00">• Manual resolution</text>
</g>
<!-- consensus_retry_check&#45;&gt;consensus_fail -->
<g id="edge30" class="edge">
<title>consensus_retry_check&#45;&gt;consensus_fail</title>
<path fill="none" stroke="black" d="M525.77,-374.03C525.77,-362.94 525.77,-350.65 525.77,-338.99"/>
<polygon fill="black" stroke="black" points="529.27,-339.13 525.77,-329.13 522.27,-339.13 529.27,-339.13"/>
<text xml:space="preserve" text-anchor="middle" x="532.15" y="-347" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- consensus_retry&#45;&gt;guardrail_phase -->
<g id="edge31" class="edge">
<title>consensus_retry&#45;&gt;guardrail_phase</title>
<path fill="none" stroke="black" d="M727.77,-324.25C727.77,-348.44 727.77,-382 727.77,-411.5 727.77,-1994 727.77,-1994 727.77,-1994 727.77,-2071.62 495.79,-2101.79 349.77,-2113.1"/>
<polygon fill="black" stroke="black" points="349.76,-2109.59 340.05,-2113.83 350.28,-2116.57 349.76,-2109.59"/>
</g>
<!-- advance -->
<g id="node27" class="node">
<title>advance</title>
<polygon fill="#b2dfdb" stroke="black" points="777.65,-83 601.9,-83 601.9,0 777.65,0 777.65,-83"/>
<text xml:space="preserve" text-anchor="middle" x="689.77" y="-65.7" font-family="Arial" font-size="14.00">Advance Pipeline</text>
<text xml:space="preserve" text-anchor="middle" x="689.77" y="-50.7" font-family="Arial" font-size="14.00">• Persist cost summary</text>
<text xml:space="preserve" text-anchor="middle" x="689.77" y="-35.7" font-family="Arial" font-size="14.00">• Reset retry count</text>
<text xml:space="preserve" text-anchor="middle" x="689.77" y="-20.7" font-family="Arial" font-size="14.00">• Increment stage index</text>
<text xml:space="preserve" text-anchor="middle" x="689.77" y="-5.7" font-family="Arial" font-size="14.00">• Reset to Guardrail phase</text>
</g>
<!-- advance&#45;&gt;stage_check -->
<g id="edge40" class="edge">
<title>advance&#45;&gt;stage_check</title>
<path fill="none" stroke="black" d="M777.89,-83.33C807.32,-103.4 832.77,-131.01 832.77,-166.5 832.77,-2497.58 832.77,-2497.58 832.77,-2497.58 832.77,-2581.87 570.29,-2617.86 422.31,-2631.45"/>
<polygon fill="black" stroke="black" points="422.14,-2627.95 412.49,-2632.33 422.76,-2634.92 422.14,-2627.95"/>
</g>
<!-- cost_persist -->
<g id="node28" class="node">
<title>cost_persist</title>
<polygon fill="#80deea" stroke="black" points="504.02,-201.5 339.52,-201.5 339.52,-133.5 504.02,-133.5 504.02,-201.5"/>
<text xml:space="preserve" text-anchor="middle" x="421.77" y="-184.2" font-family="Arial" font-size="14.00">Persist Cost Summary</text>
<text xml:space="preserve" text-anchor="middle" x="421.77" y="-169.2" font-family="Arial" font-size="14.00">• Attach routing notes</text>
<text xml:space="preserve" text-anchor="middle" x="421.77" y="-154.2" font-family="Arial" font-size="14.00">• Write JSON summary</text>
<text xml:space="preserve" text-anchor="middle" x="421.77" y="-139.2" font-family="Arial" font-size="14.00">• Record per&#45;agent costs</text>
</g>
<!-- cost_persist&#45;&gt;advance -->
<g id="edge39" class="edge">
<title>cost_persist&#45;&gt;advance</title>
<path fill="none" stroke="black" d="M493.94,-133.11C523.88,-119.26 559.09,-102.96 591.34,-88.04"/>
<polygon fill="black" stroke="black" points="592.72,-91.26 600.32,-83.89 589.78,-84.91 592.72,-91.26"/>
</g>
<!-- validate_check&#45;&gt;cost_persist -->
<g id="edge32" class="edge">
<title>validate_check&#45;&gt;cost_persist</title>
<path fill="none" stroke="black" d="M345.02,-376.07C342.84,-342.93 342.98,-292.57 358.02,-252 363.48,-237.28 372.48,-223.01 382.02,-210.56"/>
<polygon fill="black" stroke="black" points="384.54,-213.01 388.07,-203.02 379.08,-208.63 384.54,-213.01"/>
<text xml:space="preserve" text-anchor="middle" x="383.9" y="-285.75" font-family="Arial" font-size="10.00">Not validate</text>
</g>
<!-- validate_fail_check -->
<g id="node30" class="node">
<title>validate_fail_check</title>
<polygon fill="#ffe082" stroke="black" points="241.77,-328 171.02,-290 241.77,-252 312.52,-290 241.77,-328"/>
<text xml:space="preserve" text-anchor="middle" x="241.77" y="-291.7" font-family="Arial" font-size="14.00">Failed</text>
<text xml:space="preserve" text-anchor="middle" x="241.77" y="-276.7" font-family="Arial" font-size="14.00">Validate?</text>
</g>
<!-- validate_check&#45;&gt;validate_fail_check -->
<g id="edge33" class="edge">
<title>validate_check&#45;&gt;validate_fail_check</title>
<path fill="none" stroke="black" d="M322.31,-388.33C311.99,-378.84 300.32,-367.52 290.52,-356.5 282.46,-347.43 274.33,-337.1 267.09,-327.37"/>
<polygon fill="black" stroke="black" points="270.07,-325.51 261.34,-319.5 264.42,-329.64 270.07,-325.51"/>
<text xml:space="preserve" text-anchor="middle" x="312.65" y="-347" font-family="Arial" font-size="10.00">Is validate</text>
</g>
<!-- validate_fail_check&#45;&gt;cost_persist -->
<g id="edge35" class="edge">
<title>validate_fail_check&#45;&gt;cost_persist</title>
<path fill="none" stroke="black" d="M261.92,-262.41C272.7,-249.47 286.81,-234.39 301.77,-223.5 307.97,-218.98 319.14,-213.07 332.24,-206.8"/>
<polygon fill="black" stroke="black" points="333.65,-210 341.22,-202.59 330.68,-203.66 333.65,-210"/>
<text xml:space="preserve" text-anchor="middle" x="318.27" y="-224.5" font-family="Arial" font-size="10.00">Passed</text>
</g>
<!-- validate_retry_check -->
<g id="node31" class="node">
<title>validate_retry_check</title>
<polygon fill="#ffe082" stroke="black" points="241.77,-205.5 162.02,-167.5 241.77,-129.5 321.52,-167.5 241.77,-205.5"/>
<text xml:space="preserve" text-anchor="middle" x="241.77" y="-169.2" font-family="Arial" font-size="14.00">Validate</text>
<text xml:space="preserve" text-anchor="middle" x="241.77" y="-154.2" font-family="Arial" font-size="14.00">Retry &lt; 2?</text>
</g>
<!-- validate_fail_check&#45;&gt;validate_retry_check -->
<g id="edge34" class="edge">
<title>validate_fail_check&#45;&gt;validate_retry_check</title>
<path fill="none" stroke="black" d="M241.77,-251.53C241.77,-240.65 241.77,-228.61 241.77,-217.15"/>
<polygon fill="black" stroke="black" points="245.27,-217.46 241.77,-207.46 238.27,-217.46 245.27,-217.46"/>
<text xml:space="preserve" text-anchor="middle" x="254.9" y="-224.5" font-family="Arial" font-size="10.00">Failed</text>
</g>
<!-- validate_retry -->
<g id="node32" class="node">
<title>validate_retry</title>
<polygon fill="#ffccbc" stroke="black" points="201.4,-75.5 66.15,-75.5 66.15,-7.5 201.4,-7.5 201.4,-75.5"/>
<text xml:space="preserve" text-anchor="middle" x="133.77" y="-58.2" font-family="Arial" font-size="14.00">Retry Impl+Validate</text>
<text xml:space="preserve" text-anchor="middle" x="133.77" y="-43.2" font-family="Arial" font-size="14.00">• Insert stages</text>
<text xml:space="preserve" text-anchor="middle" x="133.77" y="-28.2" font-family="Arial" font-size="14.00">• Increment counter</text>
<text xml:space="preserve" text-anchor="middle" x="133.77" y="-13.2" font-family="Arial" font-size="14.00">• Re&#45;execute</text>
</g>
<!-- validate_retry_check&#45;&gt;validate_retry -->
<g id="edge36" class="edge">
<title>validate_retry_check&#45;&gt;validate_retry</title>
<path fill="none" stroke="black" d="M218.87,-140.2C204.76,-124 186.35,-102.86 170.26,-84.4"/>
<polygon fill="black" stroke="black" points="173.02,-82.24 163.82,-76.99 167.74,-86.83 173.02,-82.24"/>
<text xml:space="preserve" text-anchor="middle" x="199.26" y="-102" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- validate_fail -->
<g id="node33" class="node">
<title>validate_fail</title>
<ellipse fill="#ffcdd2" stroke="black" cx="329.77" cy="-41.5" rx="109.96" ry="37.48"/>
<text xml:space="preserve" text-anchor="middle" x="329.77" y="-50.7" font-family="Arial" font-size="14.00">Validation Failed</text>
<text xml:space="preserve" text-anchor="middle" x="329.77" y="-35.7" font-family="Arial" font-size="14.00">• Max retries exceeded</text>
<text xml:space="preserve" text-anchor="middle" x="329.77" y="-20.7" font-family="Arial" font-size="14.00">• Manual fix required</text>
</g>
<!-- validate_retry_check&#45;&gt;validate_fail -->
<g id="edge37" class="edge">
<title>validate_retry_check&#45;&gt;validate_fail</title>
<path fill="none" stroke="black" d="M261.52,-138.67C272.21,-123.61 285.68,-104.64 297.82,-87.53"/>
<polygon fill="black" stroke="black" points="300.59,-89.67 303.52,-79.49 294.88,-85.62 300.59,-89.67"/>
<text xml:space="preserve" text-anchor="middle" x="292.15" y="-102" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- validate_retry&#45;&gt;guardrail_phase -->
<g id="edge38" class="edge">
<title>validate_retry&#45;&gt;guardrail_phase</title>
<path fill="none" stroke="black" d="M133.77,-75.92C133.77,-100.88 133.77,-135.82 133.77,-166.5 133.77,-1614 133.77,-1614 133.77,-1614 133.77,-1710.99 122.38,-1961.32 162.77,-2049.5 167.48,-2059.77 174.39,-2069.35 182.09,-2077.93"/>
<polygon fill="black" stroke="black" points="179.5,-2080.28 188.95,-2085.07 184.55,-2075.43 179.5,-2080.28"/>
</g>
<!-- leg_guardrail -->
<g id="node34" class="node">
<title>leg_guardrail</title>
<polygon fill="#b3e5fc" stroke="black" points="989.9,-2780.75 875.65,-2780.75 875.65,-2744.75 989.9,-2744.75 989.9,-2780.75"/>
<text xml:space="preserve" text-anchor="middle" x="932.77" y="-2756.95" font-family="Arial" font-size="14.00">Guardrail Phase</text>
</g>
<!-- leg_agents -->
<g id="node35" class="node">
<title>leg_agents</title>
<polygon fill="#c5cae9" stroke="black" points="993.27,-2657.67 872.27,-2657.67 872.27,-2621.67 993.27,-2621.67 993.27,-2657.67"/>
<text xml:space="preserve" text-anchor="middle" x="932.77" y="-2633.87" font-family="Arial" font-size="14.00">Executing Agents</text>
</g>
<!-- leg_guardrail&#45;&gt;leg_agents -->
<!-- leg_consensus -->
<g id="node36" class="node">
<title>leg_consensus</title>
<polygon fill="#a5d6a7" stroke="black" points="1004.52,-2514.58 861.02,-2514.58 861.02,-2478.58 1004.52,-2478.58 1004.52,-2514.58"/>
<text xml:space="preserve" text-anchor="middle" x="932.77" y="-2490.78" font-family="Arial" font-size="14.00">Checking Consensus</text>
</g>
<!-- leg_agents&#45;&gt;leg_consensus -->
<!-- leg_qg -->
<g id="node37" class="node">
<title>leg_qg</title>
<polygon fill="#ffccbc" stroke="black" points="978.65,-2375.5 886.9,-2375.5 886.9,-2339.5 978.65,-2339.5 978.65,-2375.5"/>
<text xml:space="preserve" text-anchor="middle" x="932.77" y="-2351.7" font-family="Arial" font-size="14.00">Quality Gate</text>
</g>
<!-- leg_consensus&#45;&gt;leg_qg -->
</g>
</svg>
