<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (0)
 -->
<!-- Title: spec_kit_module_architecture Pages: 1 -->
<svg width="1367pt" height="1590pt"
 viewBox="0.00 0.00 1367.00 1590.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1585.62)">
<title>spec_kit_module_architecture</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1585.62 1362.53,-1585.62 1362.53,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="679.26" y="-1564.33" font-family="Arial" font-size="14.00">Spec&#45;Kit Module Architecture</text>
<text xml:space="preserve" text-anchor="middle" x="679.26" y="-1549.33" font-family="Arial" font-size="14.00">Refactored Handler Structure (2025&#45;10&#45;29)</text>
<g id="clust1" class="cluster">
<title>cluster_entry</title>
<polygon fill="#e8eaf6" stroke="black" points="178.53,-1156.12 178.53,-1301.12 608.53,-1301.12 608.53,-1156.12 178.53,-1156.12"/>
<text xml:space="preserve" text-anchor="middle" x="393.53" y="-1283.83" font-family="Arial" font-size="14.00">Layer 1: Entry Points (Routing)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_commands</title>
<polygon fill="#c5e1a5" stroke="black" points="251.53,-982.62 251.53,-1127.62 508.53,-1127.62 508.53,-982.62 251.53,-982.62"/>
<text xml:space="preserve" text-anchor="middle" x="380.03" y="-1110.33" font-family="Arial" font-size="14.00">Layer 2: Command Handlers (132 lines)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_coordinators</title>
<polygon fill="#b2dfdb" stroke="black" points="442.53,-577.12 442.53,-943.62 647.53,-943.62 647.53,-577.12 442.53,-577.12"/>
<text xml:space="preserve" text-anchor="middle" x="545.03" y="-926.33" font-family="Arial" font-size="14.00">Layer 3: Workflow Coordinators</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_orchestrators</title>
<polygon fill="#ffccbc" stroke="black" points="655.53,-370.62 655.53,-744.62 913.53,-744.62 913.53,-370.62 655.53,-370.62"/>
<text xml:space="preserve" text-anchor="middle" x="784.53" y="-727.33" font-family="Arial" font-size="14.00">Layer 4: Agent &amp; Lifecycle Orchestration</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_core</title>
<polygon fill="#fff9c4" stroke="black" points="55.53,-179.12 55.53,-530.62 503.53,-530.62 503.53,-179.12 55.53,-179.12"/>
<text xml:space="preserve" text-anchor="middle" x="279.53" y="-513.33" font-family="Arial" font-size="14.00">Layer 5: Core Infrastructure</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_quality</title>
<polygon fill="#f8bbd0" stroke="black" points="948.53,-592.12 948.53,-943.62 1350.53,-943.62 1350.53,-592.12 948.53,-592.12"/>
<text xml:space="preserve" text-anchor="middle" x="1149.53" y="-926.33" font-family="Arial" font-size="14.00">Layer 6: Quality Gates &amp; ACE</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_external</title>
<polygon fill="#cfd8dc" stroke="black" points="607.53,-8 607.53,-331.62 913.53,-331.62 913.53,-8 607.53,-8"/>
<text xml:space="preserve" text-anchor="middle" x="760.53" y="-314.32" font-family="Arial" font-size="14.00">External Services</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_legend</title>
<polygon fill="#fafafa" stroke="black" points="924.53,-1006.12 924.53,-1481.62 1070.53,-1481.62 1070.53,-1006.12 924.53,-1006.12"/>
<text xml:space="preserve" text-anchor="middle" x="997.53" y="-1464.33" font-family="Arial" font-size="14.00">Module Relationships</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_sizes</title>
<polygon fill="#f5f5f5" stroke="black" points="1103.53,-1329.62 1103.53,-1535.62 1337.53,-1535.62 1337.53,-1329.62 1103.53,-1329.62"/>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1518.33" font-family="Arial" font-size="14.00">Module Sizes (Post&#45;Refactoring)</text>
</g>
<!-- chatwidget -->
<g id="node1" class="node">
<title>chatwidget</title>
<polygon fill="#e1bee7" stroke="black" points="558.53,-1458.62 438.53,-1458.62 434.53,-1454.62 434.53,-1360.62 554.53,-1360.62 558.53,-1364.62 558.53,-1458.62"/>
<polyline fill="none" stroke="black" points="554.53,-1454.62 434.53,-1454.62"/>
<polyline fill="none" stroke="black" points="554.53,-1454.62 554.53,-1360.62"/>
<polyline fill="none" stroke="black" points="554.53,-1454.62 558.53,-1458.62"/>
<text xml:space="preserve" text-anchor="middle" x="496.53" y="-1441.33" font-family="Arial" font-size="14.00">ChatWidget</text>
<text xml:space="preserve" text-anchor="middle" x="496.53" y="-1426.33" font-family="Arial" font-size="14.00">(Parent Module)</text>
<text xml:space="preserve" text-anchor="middle" x="496.53" y="-1411.33" font-family="Arial" font-size="14.00">• spec_auto_state</text>
<text xml:space="preserve" text-anchor="middle" x="496.53" y="-1396.33" font-family="Arial" font-size="14.00">• mcp_manager</text>
<text xml:space="preserve" text-anchor="middle" x="496.53" y="-1381.33" font-family="Arial" font-size="14.00">• config</text>
<text xml:space="preserve" text-anchor="middle" x="496.53" y="-1366.33" font-family="Arial" font-size="14.00">• history</text>
</g>
<!-- routing -->
<g id="node2" class="node">
<title>routing</title>
<polygon fill="#c5cae9" stroke="black" points="400.9,-1247.12 186.15,-1247.12 186.15,-1164.12 400.9,-1164.12 400.9,-1247.12"/>
<text xml:space="preserve" text-anchor="middle" x="293.53" y="-1229.83" font-family="Arial" font-size="14.00">routing.rs</text>
<text xml:space="preserve" text-anchor="middle" x="293.53" y="-1214.83" font-family="Arial" font-size="14.00">try_dispatch_spec_kit_command</text>
<text xml:space="preserve" text-anchor="middle" x="293.53" y="-1199.83" font-family="Arial" font-size="14.00">• Parse /speckit.* commands</text>
<text xml:space="preserve" text-anchor="middle" x="293.53" y="-1184.83" font-family="Arial" font-size="14.00">• Validate args</text>
<text xml:space="preserve" text-anchor="middle" x="293.53" y="-1169.83" font-family="Arial" font-size="14.00">• Delegate to handlers</text>
</g>
<!-- chatwidget&#45;&gt;routing -->
<g id="edge1" class="edge">
<title>chatwidget&#45;&gt;routing</title>
<path fill="none" stroke="black" d="M447.9,-1360.24C416,-1328.5 374.44,-1287.14 342.47,-1255.33"/>
<polygon fill="black" stroke="black" points="345.2,-1253.1 335.64,-1248.53 340.26,-1258.06 345.2,-1253.1"/>
<text xml:space="preserve" text-anchor="middle" x="423.61" y="-1310.12" font-family="Arial" font-size="10.00">User input</text>
</g>
<!-- handler_facade -->
<g id="node20" class="node">
<title>handler_facade</title>
<polygon fill="#e1bee7" stroke="black" stroke-width="2" points="782.4,-1247.12 618.65,-1247.12 618.65,-1164.12 782.4,-1164.12 782.4,-1247.12"/>
<text xml:space="preserve" text-anchor="middle" x="700.53" y="-1229.83" font-family="Arial" font-size="14.00">handler.rs</text>
<text xml:space="preserve" text-anchor="middle" x="700.53" y="-1214.83" font-family="Arial" font-size="14.00">(35 lines)</text>
<text xml:space="preserve" text-anchor="middle" x="700.53" y="-1199.83" font-family="Arial" font-size="14.00">Re&#45;export Facade</text>
<text xml:space="preserve" text-anchor="middle" x="700.53" y="-1184.83" font-family="Arial" font-size="14.00">• Backward compatibility</text>
<text xml:space="preserve" text-anchor="middle" x="700.53" y="-1169.83" font-family="Arial" font-size="14.00">• Clean public API</text>
</g>
<!-- chatwidget&#45;&gt;handler_facade -->
<g id="edge32" class="edge">
<title>chatwidget&#45;&gt;handler_facade</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M550.43,-1360.2C570.26,-1341.99 592.7,-1320.9 612.53,-1301.12 626.99,-1286.7 642.31,-1270.57 656.04,-1255.77"/>
<polygon fill="black" stroke="black" points="658.24,-1258.54 662.46,-1248.83 653.1,-1253.79 658.24,-1258.54"/>
<text xml:space="preserve" text-anchor="middle" x="628.53" y="-1310.12" font-family="Arial" font-size="10.00">Legacy API</text>
</g>
<!-- cmd_handlers -->
<g id="node4" class="node">
<title>cmd_handlers</title>
<polygon fill="#aed581" stroke="black" points="475.53,-1073.62 291.53,-1073.62 291.53,-990.62 475.53,-990.62 475.53,-1073.62"/>
<text xml:space="preserve" text-anchor="middle" x="383.53" y="-1056.33" font-family="Arial" font-size="14.00">command_handlers.rs</text>
<text xml:space="preserve" text-anchor="middle" x="383.53" y="-1041.33" font-family="Arial" font-size="14.00">• handle_spec_status</text>
<text xml:space="preserve" text-anchor="middle" x="383.53" y="-1026.33" font-family="Arial" font-size="14.00">• handle_spec_consensus</text>
<text xml:space="preserve" text-anchor="middle" x="383.53" y="-1011.33" font-family="Arial" font-size="14.00">• handle_guardrail</text>
<text xml:space="preserve" text-anchor="middle" x="383.53" y="-996.33" font-family="Arial" font-size="14.00">• halt_spec_auto_with_error</text>
</g>
<!-- routing&#45;&gt;cmd_handlers -->
<g id="edge2" class="edge">
<title>routing&#45;&gt;cmd_handlers</title>
<path fill="none" stroke="black" d="M314.85,-1163.98C327.43,-1140.02 343.45,-1109.49 356.85,-1083.95"/>
<polygon fill="black" stroke="black" points="359.79,-1085.89 361.34,-1075.41 353.59,-1082.64 359.79,-1085.89"/>
</g>
<!-- command_reg -->
<g id="node3" class="node">
<title>command_reg</title>
<polygon fill="#c5cae9" stroke="black" points="600.4,-1239.62 418.65,-1239.62 418.65,-1171.62 600.4,-1171.62 600.4,-1239.62"/>
<text xml:space="preserve" text-anchor="middle" x="509.53" y="-1222.33" font-family="Arial" font-size="14.00">command_registry.rs</text>
<text xml:space="preserve" text-anchor="middle" x="509.53" y="-1207.33" font-family="Arial" font-size="14.00">Dynamic Trait Registry</text>
<text xml:space="preserve" text-anchor="middle" x="509.53" y="-1192.33" font-family="Arial" font-size="14.00">• Register slash commands</text>
<text xml:space="preserve" text-anchor="middle" x="509.53" y="-1177.33" font-family="Arial" font-size="14.00">• Hook system integration</text>
</g>
<!-- pipeline -->
<g id="node5" class="node">
<title>pipeline</title>
<polygon fill="#80cbc4" stroke="black" points="638.9,-889.62 484.15,-889.62 484.15,-791.62 638.9,-791.62 638.9,-889.62"/>
<text xml:space="preserve" text-anchor="middle" x="561.53" y="-872.33" font-family="Arial" font-size="14.00">pipeline_coordinator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="561.53" y="-857.33" font-family="Arial" font-size="14.00">(677 lines)</text>
<text xml:space="preserve" text-anchor="middle" x="561.53" y="-842.33" font-family="Arial" font-size="14.00">• handle_spec_auto</text>
<text xml:space="preserve" text-anchor="middle" x="561.53" y="-827.33" font-family="Arial" font-size="14.00">• advance_spec_auto</text>
<text xml:space="preserve" text-anchor="middle" x="561.53" y="-812.33" font-family="Arial" font-size="14.00">• on_spec_auto_task_*</text>
<text xml:space="preserve" text-anchor="middle" x="561.53" y="-797.33" font-family="Arial" font-size="14.00">• State machine logic</text>
</g>
<!-- cmd_handlers&#45;&gt;pipeline -->
<g id="edge3" class="edge">
<title>cmd_handlers&#45;&gt;pipeline</title>
<path fill="none" stroke="black" d="M423.58,-990.43C437.87,-975.77 454.01,-959.05 468.53,-943.62 482.31,-928.97 497.06,-912.96 510.65,-898.06"/>
<polygon fill="black" stroke="black" points="512.91,-900.78 517.06,-891.03 507.74,-896.07 512.91,-900.78"/>
<text xml:space="preserve" text-anchor="middle" x="498.81" y="-957.88" font-family="Arial" font-size="10.00">handle_spec_auto</text>
</g>
<!-- consensus_coord -->
<g id="node6" class="node">
<title>consensus_coord</title>
<polygon fill="#4db6ac" stroke="black" points="639.15,-683.12 455.9,-683.12 455.9,-585.12 639.15,-585.12 639.15,-683.12"/>
<text xml:space="preserve" text-anchor="middle" x="547.53" y="-665.83" font-family="Arial" font-size="14.00">consensus_coordinator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="547.53" y="-650.83" font-family="Arial" font-size="14.00">(190 lines)</text>
<text xml:space="preserve" text-anchor="middle" x="547.53" y="-635.83" font-family="Arial" font-size="14.00">• block_on_sync</text>
<text xml:space="preserve" text-anchor="middle" x="547.53" y="-620.83" font-family="Arial" font-size="14.00">• run_consensus_with_retry</text>
<text xml:space="preserve" text-anchor="middle" x="547.53" y="-605.83" font-family="Arial" font-size="14.00">• persist_cost_summary</text>
<text xml:space="preserve" text-anchor="middle" x="547.53" y="-590.83" font-family="Arial" font-size="14.00">• MCP retry logic</text>
</g>
<!-- cmd_handlers&#45;&gt;consensus_coord -->
<g id="edge4" class="edge">
<title>cmd_handlers&#45;&gt;consensus_coord</title>
<path fill="none" stroke="black" d="M375.92,-990.55C368.67,-940.85 362.98,-855.43 394.53,-791.62 408.93,-762.5 427.25,-767.29 450.53,-744.62 467.41,-728.18 484.81,-709.27 500.12,-691.84"/>
<polygon fill="black" stroke="black" points="502.53,-694.4 506.46,-684.56 497.25,-689.8 502.53,-694.4"/>
<text xml:space="preserve" text-anchor="middle" x="435.03" y="-836.38" font-family="Arial" font-size="10.00">handle_consensus</text>
</g>
<!-- guardrail -->
<g id="node12" class="node">
<title>guardrail</title>
<polygon fill="#fff59d" stroke="black" points="495.03,-469.12 308.03,-469.12 308.03,-386.12 495.03,-386.12 495.03,-469.12"/>
<text xml:space="preserve" text-anchor="middle" x="401.53" y="-451.82" font-family="Arial" font-size="14.00">guardrail.rs</text>
<text xml:space="preserve" text-anchor="middle" x="401.53" y="-436.82" font-family="Arial" font-size="14.00">(26KB)</text>
<text xml:space="preserve" text-anchor="middle" x="401.53" y="-421.82" font-family="Arial" font-size="14.00">• handle_guardrail_impl</text>
<text xml:space="preserve" text-anchor="middle" x="401.53" y="-406.82" font-family="Arial" font-size="14.00">• validate_guardrail_schema</text>
<text xml:space="preserve" text-anchor="middle" x="401.53" y="-391.82" font-family="Arial" font-size="14.00">• collect_guardrail_outcome</text>
</g>
<!-- cmd_handlers&#45;&gt;guardrail -->
<g id="edge5" class="edge">
<title>cmd_handlers&#45;&gt;guardrail</title>
<path fill="none" stroke="black" d="M371.84,-990.34C370.3,-984.42 368.81,-978.38 367.53,-972.62 348,-885.01 340.72,-863.06 333.03,-773.62 325.55,-686.71 351.7,-637.07 373.53,-538.62 377.75,-519.59 382.89,-498.83 387.61,-480.53"/>
<polygon fill="black" stroke="black" points="390.97,-481.51 390.1,-470.95 384.19,-479.75 390.97,-481.51"/>
<text xml:space="preserve" text-anchor="middle" x="368.28" y="-758.88" font-family="Arial" font-size="10.00">handle_guardrail</text>
</g>
<!-- pipeline&#45;&gt;consensus_coord -->
<g id="edge8" class="edge">
<title>pipeline&#45;&gt;consensus_coord</title>
<path fill="none" stroke="black" d="M553.32,-791.41C552.51,-785.44 551.8,-779.4 551.28,-773.62 548.94,-747.88 547.9,-719.34 547.49,-694.89"/>
<polygon fill="black" stroke="black" points="550.99,-695.07 547.35,-685.12 543.99,-695.17 550.99,-695.07"/>
<text xml:space="preserve" text-anchor="middle" x="574.9" y="-764.12" font-family="Arial" font-size="10.00">Check</text>
<text xml:space="preserve" text-anchor="middle" x="574.9" y="-753.62" font-family="Arial" font-size="10.00">consensus</text>
</g>
<!-- agent_orch -->
<g id="node7" class="node">
<title>agent_orch</title>
<polygon fill="#ffab91" stroke="black" points="889.53,-690.62 663.53,-690.62 663.53,-577.62 889.53,-577.62 889.53,-690.62"/>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-673.33" font-family="Arial" font-size="14.00">agent_orchestrator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-658.33" font-family="Arial" font-size="14.00">(519 lines)</text>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-643.33" font-family="Arial" font-size="14.00">• auto_submit_spec_stage_prompt</text>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-628.33" font-family="Arial" font-size="14.00">• apply_aggregator_effort</text>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-613.33" font-family="Arial" font-size="14.00">• on_spec_auto_agents_complete</text>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-598.33" font-family="Arial" font-size="14.00">• record_agent_costs</text>
<text xml:space="preserve" text-anchor="middle" x="776.53" y="-583.33" font-family="Arial" font-size="14.00">• schedule_degraded_follow_up</text>
</g>
<!-- pipeline&#45;&gt;agent_orch -->
<g id="edge7" class="edge">
<title>pipeline&#45;&gt;agent_orch</title>
<path fill="none" stroke="black" d="M612.48,-791.16C641.55,-763.51 678.32,-728.53 709.69,-698.7"/>
<polygon fill="black" stroke="black" points="712.03,-701.31 716.86,-691.88 707.2,-696.23 712.03,-701.31"/>
<text xml:space="preserve" text-anchor="middle" x="664.77" y="-764.12" font-family="Arial" font-size="10.00">Spawn</text>
<text xml:space="preserve" text-anchor="middle" x="664.77" y="-753.62" font-family="Arial" font-size="10.00">agents</text>
</g>
<!-- pipeline&#45;&gt;guardrail -->
<g id="edge6" class="edge">
<title>pipeline&#45;&gt;guardrail</title>
<path fill="none" stroke="black" d="M483.87,-799.98C451.26,-781.62 418.79,-760.42 409.78,-744.62 362.64,-662.07 375.52,-546.55 388.77,-480.47"/>
<polygon fill="black" stroke="black" points="392.13,-481.51 390.76,-471 385.28,-480.07 392.13,-481.51"/>
<text xml:space="preserve" text-anchor="middle" x="428.15" y="-635.12" font-family="Arial" font-size="10.00">Execute</text>
<text xml:space="preserve" text-anchor="middle" x="428.15" y="-624.62" font-family="Arial" font-size="10.00">guardrail</text>
</g>
<!-- qg_handler -->
<g id="node13" class="node">
<title>qg_handler</title>
<polygon fill="#f48fb1" stroke="black" points="1342.03,-882.12 1137.03,-882.12 1137.03,-799.12 1342.03,-799.12 1342.03,-882.12"/>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-864.83" font-family="Arial" font-size="14.00">quality_gate_handler.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-849.83" font-family="Arial" font-size="14.00">(925 lines)</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-834.83" font-family="Arial" font-size="14.00">• determine_quality_checkpoint</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-819.83" font-family="Arial" font-size="14.00">• execute_quality_checkpoint</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-804.83" font-family="Arial" font-size="14.00">• on_quality_gate_*</text>
</g>
<!-- pipeline&#45;&gt;qg_handler -->
<g id="edge9" class="edge">
<title>pipeline&#45;&gt;qg_handler</title>
<path fill="none" stroke="black" d="M639.12,-880.52C750.59,-932.15 960.93,-1008.22 1127.53,-943.38 1155.3,-932.57 1180.36,-911.3 1199.71,-890.9"/>
<polygon fill="black" stroke="black" points="1202.16,-893.4 1206.35,-883.66 1197.01,-888.67 1202.16,-893.4"/>
<text xml:space="preserve" text-anchor="middle" x="808.53" y="-963.12" font-family="Arial" font-size="10.00">Quality</text>
<text xml:space="preserve" text-anchor="middle" x="808.53" y="-952.62" font-family="Arial" font-size="10.00">checkpoints</text>
</g>
<!-- consensus -->
<g id="node9" class="node">
<title>consensus</title>
<polygon fill="#fff59d" stroke="black" points="289.53,-476.62 63.53,-476.62 63.53,-378.62 289.53,-378.62 289.53,-476.62"/>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-459.32" font-family="Arial" font-size="14.00">consensus.rs</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-444.32" font-family="Arial" font-size="14.00">(35KB)</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-429.32" font-family="Arial" font-size="14.00">• run_spec_consensus</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-414.32" font-family="Arial" font-size="14.00">• collect_consensus_artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-399.32" font-family="Arial" font-size="14.00">• load_latest_consensus_synthesis</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-384.32" font-family="Arial" font-size="14.00">• ConsensusVerdict types</text>
</g>
<!-- consensus_coord&#45;&gt;consensus -->
<g id="edge15" class="edge">
<title>consensus_coord&#45;&gt;consensus</title>
<path fill="none" stroke="black" d="M459.27,-584.65C453.65,-582 448.04,-579.47 442.53,-577.12 381.03,-550.97 358.07,-562.86 299.53,-530.62 276.66,-518.04 253.99,-500.92 234.46,-484.31"/>
<polygon fill="black" stroke="black" points="237,-481.88 227.15,-477.98 232.42,-487.17 237,-481.88"/>
<text xml:space="preserve" text-anchor="middle" x="431.17" y="-544.88" font-family="Arial" font-size="10.00">run_spec_consensus</text>
</g>
<!-- validation_life -->
<g id="node8" class="node">
<title>validation_life</title>
<polygon fill="#ff8a65" stroke="black" points="905.03,-476.62 682.03,-476.62 682.03,-378.62 905.03,-378.62 905.03,-476.62"/>
<text xml:space="preserve" text-anchor="middle" x="793.53" y="-459.32" font-family="Arial" font-size="14.00">validation_lifecycle.rs</text>
<text xml:space="preserve" text-anchor="middle" x="793.53" y="-444.32" font-family="Arial" font-size="14.00">(170 lines)</text>
<text xml:space="preserve" text-anchor="middle" x="793.53" y="-429.32" font-family="Arial" font-size="14.00">• compute_validate_payload_hash</text>
<text xml:space="preserve" text-anchor="middle" x="793.53" y="-414.32" font-family="Arial" font-size="14.00">• record_validate_lifecycle_event</text>
<text xml:space="preserve" text-anchor="middle" x="793.53" y="-399.32" font-family="Arial" font-size="14.00">• cleanup_spec_auto_with_cancel</text>
<text xml:space="preserve" text-anchor="middle" x="793.53" y="-384.32" font-family="Arial" font-size="14.00">• Telemetry emission</text>
</g>
<!-- agent_orch&#45;&gt;validation_life -->
<g id="edge11" class="edge">
<title>agent_orch&#45;&gt;validation_life</title>
<path fill="none" stroke="black" d="M781.17,-577.24C783.47,-549.6 786.25,-516.21 788.58,-488.09"/>
<polygon fill="black" stroke="black" points="792.06,-488.56 789.4,-478.31 785.08,-487.98 792.06,-488.56"/>
<text xml:space="preserve" text-anchor="middle" x="803.13" y="-550.12" font-family="Arial" font-size="10.00">Lifecycle</text>
<text xml:space="preserve" text-anchor="middle" x="803.13" y="-539.62" font-family="Arial" font-size="10.00">events</text>
</g>
<!-- mcp -->
<g id="node17" class="node">
<title>mcp</title>
<path fill="#b0bec5" stroke="black" d="M759.65,-119.75C759.65,-125.47 727.32,-130.12 687.53,-130.12 647.73,-130.12 615.4,-125.47 615.4,-119.75 615.4,-119.75 615.4,-26.38 615.4,-26.38 615.4,-20.65 647.73,-16 687.53,-16 727.32,-16 759.65,-20.65 759.65,-26.38 759.65,-26.38 759.65,-119.75 759.65,-119.75"/>
<path fill="none" stroke="black" d="M759.65,-119.75C759.65,-114.03 727.32,-109.38 687.53,-109.38 647.73,-109.38 615.4,-114.03 615.4,-119.75"/>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-97.26" font-family="Arial" font-size="14.00">MCP Manager</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-82.26" font-family="Arial" font-size="14.00">local&#45;memory server</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-67.26" font-family="Arial" font-size="14.00">• store_memory</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-52.26" font-family="Arial" font-size="14.00">• search</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-37.26" font-family="Arial" font-size="14.00">• Consensus artifacts</text>
</g>
<!-- agent_orch&#45;&gt;mcp -->
<g id="edge12" class="edge">
<title>agent_orch&#45;&gt;mcp</title>
<path fill="none" stroke="black" d="M666.91,-577.33C640.51,-561.31 617.99,-544.45 611.53,-530.62 578.43,-459.86 581.33,-253.07 606.53,-179.12 611.46,-164.65 619.28,-150.62 628.16,-137.77"/>
<polygon fill="black" stroke="black" points="630.86,-140.01 633.9,-129.87 625.19,-135.9 630.86,-140.01"/>
<text xml:space="preserve" text-anchor="middle" x="599.24" y="-351.12" font-family="Arial" font-size="10.00">Store</text>
<text xml:space="preserve" text-anchor="middle" x="599.24" y="-340.62" font-family="Arial" font-size="10.00">costs</text>
</g>
<!-- agents_external -->
<g id="node19" class="node">
<title>agents_external</title>
<polygon fill="#b0bec5" stroke="black" points="905.4,-270.12 777.65,-270.12 777.65,-266.12 773.65,-266.12 773.65,-262.12 777.65,-262.12 777.65,-210.12 773.65,-210.12 773.65,-206.12 777.65,-206.12 777.65,-202.12 905.4,-202.12 905.4,-270.12"/>
<polyline fill="none" stroke="black" points="777.65,-266.12 781.65,-266.12 781.65,-262.12 777.65,-262.12"/>
<polyline fill="none" stroke="black" points="777.65,-210.12 781.65,-210.12 781.65,-206.12 777.65,-206.12"/>
<text xml:space="preserve" text-anchor="middle" x="841.53" y="-252.82" font-family="Arial" font-size="14.00">External AI Agents</text>
<text xml:space="preserve" text-anchor="middle" x="841.53" y="-237.82" font-family="Arial" font-size="14.00">• Gemini API</text>
<text xml:space="preserve" text-anchor="middle" x="841.53" y="-222.82" font-family="Arial" font-size="14.00">• Claude API</text>
<text xml:space="preserve" text-anchor="middle" x="841.53" y="-207.82" font-family="Arial" font-size="14.00">• GPT API</text>
</g>
<!-- agent_orch&#45;&gt;agents_external -->
<g id="edge10" class="edge">
<title>agent_orch&#45;&gt;agents_external</title>
<path fill="none" stroke="black" d="M680.85,-577.26C665.76,-563.98 652.28,-548.41 643.53,-530.62 612.14,-466.81 601.42,-427.93 643.53,-370.62 670.83,-333.47 698.49,-353.29 742.53,-339.62 754.07,-336.04 758.59,-338.51 768.53,-331.62 787.88,-318.22 804.43,-298.1 816.86,-279.87"/>
<polygon fill="black" stroke="black" points="819.76,-281.83 822.32,-271.54 813.91,-277.99 819.76,-281.83"/>
<text xml:space="preserve" text-anchor="middle" x="658.53" y="-423.38" font-family="Arial" font-size="10.00">Spawn</text>
</g>
<!-- validation_life&#45;&gt;mcp -->
<g id="edge14" class="edge">
<title>validation_life&#45;&gt;mcp</title>
<path fill="none" stroke="black" d="M876.32,-378.32C891.75,-365.25 905.77,-349.64 914.53,-331.62 944.17,-270.67 951.02,-236.24 914.53,-179.12 883.04,-129.86 821.9,-103.36 770.99,-89.3"/>
<polygon fill="black" stroke="black" points="772,-85.94 761.43,-86.79 770.22,-92.71 772,-85.94"/>
<text xml:space="preserve" text-anchor="middle" x="953.64" y="-237.12" font-family="Arial" font-size="10.00">Store</text>
<text xml:space="preserve" text-anchor="middle" x="953.64" y="-226.62" font-family="Arial" font-size="10.00">events</text>
</g>
<!-- filesystem -->
<g id="node18" class="node">
<title>filesystem</title>
<polygon fill="#b0bec5" stroke="black" points="759.65,-277.62 756.65,-281.62 735.65,-281.62 732.65,-277.62 615.4,-277.62 615.4,-194.62 759.65,-194.62 759.65,-277.62"/>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-260.32" font-family="Arial" font-size="14.00">Filesystem</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-245.32" font-family="Arial" font-size="14.00">• docs/SPEC&#45;*/</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-230.32" font-family="Arial" font-size="14.00">• Evidence repository</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-215.32" font-family="Arial" font-size="14.00">• Cost summaries</text>
<text xml:space="preserve" text-anchor="middle" x="687.53" y="-200.32" font-family="Arial" font-size="14.00">• Telemetry JSON</text>
</g>
<!-- validation_life&#45;&gt;filesystem -->
<g id="edge13" class="edge">
<title>validation_life&#45;&gt;filesystem</title>
<path fill="none" stroke="black" d="M766.5,-378.32C751.04,-350.68 731.67,-316.03 715.97,-287.98"/>
<polygon fill="black" stroke="black" points="719.05,-286.31 711.11,-279.29 712.94,-289.73 719.05,-286.31"/>
<text xml:space="preserve" text-anchor="middle" x="776.84" y="-351.12" font-family="Arial" font-size="10.00">Write</text>
<text xml:space="preserve" text-anchor="middle" x="776.84" y="-340.62" font-family="Arial" font-size="10.00">telemetry</text>
</g>
<!-- evidence -->
<g id="node11" class="node">
<title>evidence</title>
<polygon fill="#fff59d" stroke="black" points="259.53,-277.62 93.53,-277.62 93.53,-194.62 259.53,-194.62 259.53,-277.62"/>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-260.32" font-family="Arial" font-size="14.00">evidence.rs</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-245.32" font-family="Arial" font-size="14.00">(22KB)</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-230.32" font-family="Arial" font-size="14.00">• FilesystemEvidence</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-215.32" font-family="Arial" font-size="14.00">• write_telemetry_bundle</text>
<text xml:space="preserve" text-anchor="middle" x="176.53" y="-200.32" font-family="Arial" font-size="14.00">• Evidence validation</text>
</g>
<!-- consensus&#45;&gt;evidence -->
<g id="edge17" class="edge">
<title>consensus&#45;&gt;evidence</title>
<path fill="none" stroke="black" d="M176.53,-378.32C176.53,-351.16 176.53,-317.25 176.53,-289.46"/>
<polygon fill="black" stroke="black" points="180.03,-289.48 176.53,-279.48 173.03,-289.48 180.03,-289.48"/>
<text xml:space="preserve" text-anchor="middle" x="193.78" y="-345.88" font-family="Arial" font-size="10.00">Validate</text>
</g>
<!-- consensus&#45;&gt;mcp -->
<g id="edge16" class="edge">
<title>consensus&#45;&gt;mcp</title>
<path fill="none" stroke="black" d="M274.77,-378.21C283.02,-375.28 291.34,-372.69 299.53,-370.62 331.92,-362.46 421.82,-379.29 449.53,-360.62 523.87,-310.53 482.87,-250.18 537.53,-179.12 555.83,-155.33 581.04,-134.79 605.58,-118.34"/>
<polygon fill="black" stroke="black" points="607.2,-121.47 613.66,-113.07 603.37,-115.6 607.2,-121.47"/>
<text xml:space="preserve" text-anchor="middle" x="555.53" y="-237.12" font-family="Arial" font-size="10.00">Query</text>
<text xml:space="preserve" text-anchor="middle" x="555.53" y="-226.62" font-family="Arial" font-size="10.00">artifacts</text>
</g>
<!-- state -->
<g id="node10" class="node">
<title>state</title>
<polygon fill="#fff59d" stroke="black" points="449.53,-285.12 277.53,-285.12 277.53,-187.12 449.53,-187.12 449.53,-285.12"/>
<text xml:space="preserve" text-anchor="middle" x="363.53" y="-267.82" font-family="Arial" font-size="14.00">state.rs</text>
<text xml:space="preserve" text-anchor="middle" x="363.53" y="-252.82" font-family="Arial" font-size="14.00">(28KB)</text>
<text xml:space="preserve" text-anchor="middle" x="363.53" y="-237.82" font-family="Arial" font-size="14.00">• SpecAutoState</text>
<text xml:space="preserve" text-anchor="middle" x="363.53" y="-222.82" font-family="Arial" font-size="14.00">• SpecAutoPhase enum</text>
<text xml:space="preserve" text-anchor="middle" x="363.53" y="-207.82" font-family="Arial" font-size="14.00">• ValidateLifecycle</text>
<text xml:space="preserve" text-anchor="middle" x="363.53" y="-192.82" font-family="Arial" font-size="14.00">• QualityCheckpoint types</text>
</g>
<!-- guardrail&#45;&gt;state -->
<g id="edge19" class="edge">
<title>guardrail&#45;&gt;state</title>
<path fill="none" stroke="black" d="M393.37,-385.97C388.16,-359.95 381.3,-325.75 375.47,-296.69"/>
<polygon fill="black" stroke="black" points="378.91,-296.03 373.51,-286.91 372.04,-297.4 378.91,-296.03"/>
<text xml:space="preserve" text-anchor="middle" x="417.03" y="-351.12" font-family="Arial" font-size="10.00">Update</text>
<text xml:space="preserve" text-anchor="middle" x="417.03" y="-340.62" font-family="Arial" font-size="10.00">pipeline state</text>
</g>
<!-- guardrail&#45;&gt;filesystem -->
<g id="edge18" class="edge">
<title>guardrail&#45;&gt;filesystem</title>
<path fill="none" stroke="black" d="M461.97,-385.76C473.29,-377.66 484.9,-369.05 495.53,-360.62 506.5,-351.92 507.77,-347.97 519.03,-339.62 546.09,-319.56 577.25,-299.78 605.35,-283.02"/>
<polygon fill="black" stroke="black" points="607.02,-286.1 613.84,-278 603.45,-280.08 607.02,-286.1"/>
<text xml:space="preserve" text-anchor="middle" x="542.28" y="-351.12" font-family="Arial" font-size="10.00">Read/write</text>
<text xml:space="preserve" text-anchor="middle" x="542.28" y="-340.62" font-family="Arial" font-size="10.00">telemetry</text>
</g>
<!-- qg_broker -->
<g id="node14" class="node">
<title>qg_broker</title>
<polygon fill="#f48fb1" stroke="black" points="1125.9,-668.12 977.15,-668.12 977.15,-600.12 1125.9,-600.12 1125.9,-668.12"/>
<text xml:space="preserve" text-anchor="middle" x="1051.53" y="-650.83" font-family="Arial" font-size="14.00">quality_gate_broker.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1051.53" y="-635.83" font-family="Arial" font-size="14.00">• GPT&#45;5 validation</text>
<text xml:space="preserve" text-anchor="middle" x="1051.53" y="-620.83" font-family="Arial" font-size="14.00">• Human escalation</text>
<text xml:space="preserve" text-anchor="middle" x="1051.53" y="-605.83" font-family="Arial" font-size="14.00">• Result processing</text>
</g>
<!-- qg_handler&#45;&gt;qg_broker -->
<g id="edge20" class="edge">
<title>qg_handler&#45;&gt;qg_broker</title>
<path fill="none" stroke="black" d="M1201.93,-798.73C1169.4,-763.34 1122.55,-712.38 1089.81,-676.77"/>
<polygon fill="black" stroke="black" points="1092.59,-674.62 1083.25,-669.63 1087.44,-679.36 1092.59,-674.62"/>
<text xml:space="preserve" text-anchor="middle" x="1197.84" y="-758.88" font-family="Arial" font-size="10.00">Escalate</text>
</g>
<!-- quality -->
<g id="node15" class="node">
<title>quality</title>
<polygon fill="#f48fb1" stroke="black" points="1315.03,-668.12 1164.03,-668.12 1164.03,-600.12 1315.03,-600.12 1315.03,-668.12"/>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-650.83" font-family="Arial" font-size="14.00">quality.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-635.83" font-family="Arial" font-size="14.00">• Issue classification</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-620.83" font-family="Arial" font-size="14.00">• Auto&#45;resolution logic</text>
<text xml:space="preserve" text-anchor="middle" x="1239.53" y="-605.83" font-family="Arial" font-size="14.00">• merge_agent_issues</text>
</g>
<!-- qg_handler&#45;&gt;quality -->
<g id="edge21" class="edge">
<title>qg_handler&#45;&gt;quality</title>
<path fill="none" stroke="black" d="M1239.53,-798.73C1239.53,-764.38 1239.53,-715.38 1239.53,-679.96"/>
<polygon fill="black" stroke="black" points="1243.03,-680.03 1239.53,-670.03 1236.03,-680.03 1243.03,-680.03"/>
<text xml:space="preserve" text-anchor="middle" x="1257.53" y="-764.12" font-family="Arial" font-size="10.00">Classify</text>
<text xml:space="preserve" text-anchor="middle" x="1257.53" y="-753.62" font-family="Arial" font-size="10.00">issues</text>
</g>
<!-- qg_broker&#45;&gt;agents_external -->
<g id="edge22" class="edge">
<title>qg_broker&#45;&gt;agents_external</title>
<path fill="none" stroke="black" d="M1035.08,-599.72C1010.28,-549.6 961.5,-452.13 917.53,-370.62 901.09,-340.17 881.79,-306.28 866.75,-280.27"/>
<polygon fill="black" stroke="black" points="869.81,-278.56 861.76,-271.67 863.75,-282.07 869.81,-278.56"/>
<text xml:space="preserve" text-anchor="middle" x="1019.25" y="-428.62" font-family="Arial" font-size="10.00">GPT&#45;5</text>
<text xml:space="preserve" text-anchor="middle" x="1019.25" y="-418.12" font-family="Arial" font-size="10.00">validation</text>
</g>
<!-- ace_modules -->
<g id="node16" class="node">
<title>ace_modules</title>
<polygon fill="#f48fb1" stroke="black" points="1118.65,-889.62 956.4,-889.62 956.4,-791.62 1118.65,-791.62 1118.65,-889.62"/>
<text xml:space="preserve" text-anchor="middle" x="1037.53" y="-872.33" font-family="Arial" font-size="14.00">ACE Modules</text>
<text xml:space="preserve" text-anchor="middle" x="1037.53" y="-857.33" font-family="Arial" font-size="14.00">• ace_curator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1037.53" y="-842.33" font-family="Arial" font-size="14.00">• ace_reflector.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1037.53" y="-827.33" font-family="Arial" font-size="14.00">• ace_orchestrator.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1037.53" y="-812.33" font-family="Arial" font-size="14.00">• ace_route_selector.rs</text>
<text xml:space="preserve" text-anchor="middle" x="1037.53" y="-797.33" font-family="Arial" font-size="14.00">• ace_prompt_injector.rs</text>
</g>
<!-- ace_modules&#45;&gt;pipeline -->
<g id="edge23" class="edge">
<title>ace_modules&#45;&gt;pipeline</title>
<path fill="none" stroke="black" d="M1005.9,-889.88C989.71,-910.5 968.01,-932.23 942.53,-943.38 845.01,-986.02 725.54,-939.07 646.67,-895.56"/>
<polygon fill="black" stroke="black" points="648.53,-892.59 638.1,-890.74 645.1,-898.69 648.53,-892.59"/>
<text xml:space="preserve" text-anchor="middle" x="859.53" y="-963.12" font-family="Arial" font-size="10.00">Route</text>
<text xml:space="preserve" text-anchor="middle" x="859.53" y="-952.62" font-family="Arial" font-size="10.00">selection</text>
</g>
<!-- ace_modules&#45;&gt;agent_orch -->
<g id="edge24" class="edge">
<title>ace_modules&#45;&gt;agent_orch</title>
<path fill="none" stroke="black" d="M975.67,-791.16C939.94,-763.16 894.6,-727.64 856.21,-697.56"/>
<polygon fill="black" stroke="black" points="858.85,-695.18 848.82,-691.77 854.53,-700.69 858.85,-695.18"/>
<text xml:space="preserve" text-anchor="middle" x="971.1" y="-764.12" font-family="Arial" font-size="10.00">Prompt</text>
<text xml:space="preserve" text-anchor="middle" x="971.1" y="-753.62" font-family="Arial" font-size="10.00">injection</text>
</g>
<!-- mcp&#45;&gt;consensus -->
<g id="edge26" class="edge">
<title>mcp&#45;&gt;consensus</title>
<path fill="none" stroke="black" d="M614.95,-74.34C459.78,-76.63 103.74,-91.55 29.03,-179.12 -14.96,-230.69 -3.43,-272.12 29.03,-331.62 37.28,-346.76 49.1,-359.85 62.49,-371.05"/>
<polygon fill="black" stroke="black" points="60.29,-373.77 70.32,-377.21 64.62,-368.27 60.29,-373.77"/>
<text xml:space="preserve" text-anchor="middle" x="56.78" y="-237.12" font-family="Arial" font-size="10.00">Query</text>
<text xml:space="preserve" text-anchor="middle" x="56.78" y="-226.62" font-family="Arial" font-size="10.00">for synthesis</text>
</g>
<!-- agents_external&#45;&gt;mcp -->
<g id="edge25" class="edge">
<title>agents_external&#45;&gt;mcp</title>
<path fill="none" stroke="black" d="M809.62,-201.75C791.65,-182.96 768.62,-158.88 747.42,-136.7"/>
<polygon fill="black" stroke="black" points="750.19,-134.53 740.75,-129.73 745.13,-139.37 750.19,-134.53"/>
<text xml:space="preserve" text-anchor="middle" x="795.19" y="-159.62" font-family="Arial" font-size="10.00">Store</text>
<text xml:space="preserve" text-anchor="middle" x="795.19" y="-149.12" font-family="Arial" font-size="10.00">verdicts</text>
</g>
<!-- handler_facade&#45;&gt;cmd_handlers -->
<g id="edge27" class="edge">
<title>handler_facade&#45;&gt;cmd_handlers</title>
<path fill="none" stroke="#9c27b0" stroke-dasharray="5,2" d="M631.02,-1163.14C624.9,-1160.46 618.68,-1158.07 612.53,-1156.12 573.09,-1143.68 558.12,-1162.21 520.03,-1146.12 485.52,-1131.55 452.97,-1105.29 428.31,-1081.74"/>
<polygon fill="#9c27b0" stroke="#9c27b0" points="430.94,-1079.42 421.34,-1074.94 426.05,-1084.43 430.94,-1079.42"/>
<text xml:space="preserve" text-anchor="middle" x="541.78" y="-1136.62" font-family="Arial" font-size="10.00">Re&#45;export</text>
</g>
<!-- handler_facade&#45;&gt;pipeline -->
<g id="edge28" class="edge">
<title>handler_facade&#45;&gt;pipeline</title>
<path fill="none" stroke="#9c27b0" stroke-dasharray="5,2" d="M639.08,-1163.45C627.49,-1153.04 616.63,-1140.97 609.03,-1127.62 568.88,-1057.17 560.45,-962.11 559.72,-901.33"/>
<polygon fill="#9c27b0" stroke="#9c27b0" points="563.22,-901.52 559.67,-891.53 556.22,-901.55 563.22,-901.52"/>
<text xml:space="preserve" text-anchor="middle" x="630.78" y="-1027.88" font-family="Arial" font-size="10.00">Re&#45;export</text>
</g>
<!-- handler_facade&#45;&gt;consensus_coord -->
<g id="edge30" class="edge">
<title>handler_facade&#45;&gt;consensus_coord</title>
<path fill="none" stroke="#9c27b0" stroke-dasharray="5,2" d="M697.61,-1163.5C689.99,-1059.16 668.99,-789.73 652.53,-752.62 642.67,-730.4 626.99,-709.44 610.73,-691.55"/>
<polygon fill="#9c27b0" stroke="#9c27b0" points="613.67,-689.56 604.28,-684.66 608.56,-694.35 613.67,-689.56"/>
<text xml:space="preserve" text-anchor="middle" x="703.73" y="-957.88" font-family="Arial" font-size="10.00">Re&#45;export</text>
</g>
<!-- handler_facade&#45;&gt;agent_orch -->
<g id="edge29" class="edge">
<title>handler_facade&#45;&gt;agent_orch</title>
<path fill="none" stroke="#9c27b0" stroke-dasharray="5,2" d="M706.05,-1163.21C719.07,-1065.64 751.77,-820.62 767.63,-701.8"/>
<polygon fill="#9c27b0" stroke="#9c27b0" points="771.05,-702.58 768.91,-692.21 764.12,-701.66 771.05,-702.58"/>
<text xml:space="preserve" text-anchor="middle" x="755.9" y="-957.88" font-family="Arial" font-size="10.00">Re&#45;export</text>
</g>
<!-- handler_facade&#45;&gt;validation_life -->
<g id="edge31" class="edge">
<title>handler_facade&#45;&gt;validation_life</title>
<path fill="none" stroke="#9c27b0" stroke-dasharray="5,2" d="M745.06,-1163.31C788.13,-1120.3 851.08,-1048.69 880.53,-972.62 896.41,-931.6 911.85,-619.05 898.53,-577.12 887.96,-543.88 866.96,-511.67 846.5,-485.8"/>
<polygon fill="#9c27b0" stroke="#9c27b0" points="849.27,-483.66 840.25,-478.1 843.83,-488.07 849.27,-483.66"/>
<text xml:space="preserve" text-anchor="middle" x="921.29" y="-836.38" font-family="Arial" font-size="10.00">Re&#45;export</text>
</g>
<!-- leg_call -->
<g id="node21" class="node">
<title>leg_call</title>
<path fill="none" stroke="black" d="M1032.9,-1427.62C1032.9,-1427.62 962.15,-1427.62 962.15,-1427.62 956.15,-1427.62 950.15,-1421.62 950.15,-1415.62 950.15,-1415.62 950.15,-1403.62 950.15,-1403.62 950.15,-1397.62 956.15,-1391.62 962.15,-1391.62 962.15,-1391.62 1032.9,-1391.62 1032.9,-1391.62 1038.9,-1391.62 1044.9,-1397.62 1044.9,-1403.62 1044.9,-1403.62 1044.9,-1415.62 1044.9,-1415.62 1044.9,-1421.62 1038.9,-1427.62 1032.9,-1427.62"/>
<text xml:space="preserve" text-anchor="middle" x="997.53" y="-1403.83" font-family="Arial" font-size="14.00">Function Call</text>
</g>
<!-- leg_reexport -->
<g id="node22" class="node">
<title>leg_reexport</title>
<polygon fill="none" stroke="#9c27b0" stroke-dasharray="5,2" points="1035.9,-1223.62 959.15,-1223.62 959.15,-1187.62 1035.9,-1187.62 1035.9,-1223.62"/>
<text xml:space="preserve" text-anchor="middle" x="997.53" y="-1199.83" font-family="Arial" font-size="14.00">Re&#45;export</text>
</g>
<!-- leg_call&#45;&gt;leg_reexport -->
<!-- leg_data -->
<g id="node23" class="node">
<title>leg_data</title>
<polygon fill="none" stroke="blue" stroke-dasharray="1,5" points="1035.9,-1050.12 959.15,-1050.12 959.15,-1014.12 1035.9,-1014.12 1035.9,-1050.12"/>
<text xml:space="preserve" text-anchor="middle" x="997.53" y="-1026.33" font-family="Arial" font-size="14.00">Data Flow</text>
</g>
<!-- leg_reexport&#45;&gt;leg_data -->
<!-- size_table -->
<g id="node24" class="node">
<title>size_table</title>
<polygon fill="#fffde7" stroke="black" points="1323.03,-1481.62 1112.03,-1481.62 1112.03,-1337.62 1329.03,-1337.62 1329.03,-1475.62 1323.03,-1481.62"/>
<polyline fill="none" stroke="black" points="1323.03,-1481.62 1323.03,-1475.62"/>
<polyline fill="none" stroke="black" points="1329.03,-1475.62 1323.03,-1475.62"/>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1464.33" font-family="Arial" font-size="14.00">validation_lifecycle: 170 lines</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1449.33" font-family="Arial" font-size="14.00">command_handlers: 132 lines</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1434.33" font-family="Arial" font-size="14.00">consensus_coordinator: 190 lines</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1419.33" font-family="Arial" font-size="14.00">agent_orchestrator: 519 lines</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1404.33" font-family="Arial" font-size="14.00">pipeline_coordinator: 677 lines</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1389.33" font-family="Arial" font-size="14.00">handler (facade): 35 lines</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1358.33" font-family="Arial" font-size="14.00">Total: 1,723 lines (was 1,561)</text>
<text xml:space="preserve" text-anchor="middle" x="1220.53" y="-1343.33" font-family="Arial" font-size="14.00">Reduction: 98% in handler.rs</text>
</g>
</g>
</svg>
