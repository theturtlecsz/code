<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (0)
 -->
<!-- Title: spec_kit_multi_agent_consensus Pages: 1 -->
<svg width="1428pt" height="1222pt"
 viewBox="0.00 0.00 1428.00 1222.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1218.17)">
<title>spec_kit_multi_agent_consensus</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1218.17 1424,-1218.17 1424,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="710" y="-1196.87" font-family="Arial" font-size="14.00">Spec&#45;Kit Multi&#45;Agent Consensus Flow</text>
<text xml:space="preserve" text-anchor="middle" x="710" y="-1181.87" font-family="Arial" font-size="14.00">How AI Agents Collaborate</text>
<g id="clust1" class="cluster">
<title>cluster_agents</title>
<polygon fill="#e8eaf6" stroke="black" points="438,-1046.17 438,-1168.17 1180,-1168.17 1180,-1046.17 438,-1046.17"/>
<text xml:space="preserve" text-anchor="middle" x="809" y="-1150.87" font-family="Arial" font-size="14.00">Parallel Agent Execution</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_storage</title>
<polygon fill="#e0f2f1" stroke="black" points="8,-894.67 8,-1027.17 851,-1027.17 851,-894.67 8,-894.67"/>
<text xml:space="preserve" text-anchor="middle" x="429.5" y="-1009.87" font-family="Arial" font-size="14.00">Artifact Storage (Local&#45;Memory MCP)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_legend</title>
<polygon fill="#fafafa" stroke="black" points="1188,-804.67 1188,-1145.67 1412,-1145.67 1412,-804.67 1188,-804.67"/>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-1128.37" font-family="Arial" font-size="14.00">Agent Tiers</text>
</g>
<!-- trigger -->
<g id="node1" class="node">
<title>trigger</title>
<ellipse fill="#e3f2fd" stroke="black" cx="343" cy="-282.58" rx="91.92" ry="26.87"/>
<text xml:space="preserve" text-anchor="middle" x="343" y="-284.28" font-family="Arial" font-size="14.00">Stage Trigger</text>
<text xml:space="preserve" text-anchor="middle" x="343" y="-269.28" font-family="Arial" font-size="14.00">(e.g., /speckit.plan)</text>
</g>
<!-- build_prompt -->
<g id="node2" class="node">
<title>build_prompt</title>
<polygon fill="#ffe082" stroke="black" points="830.75,-197.5 687.25,-197.5 687.25,-114.5 830.75,-114.5 830.75,-197.5"/>
<text xml:space="preserve" text-anchor="middle" x="759" y="-180.2" font-family="Arial" font-size="14.00">Build Stage Prompt</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-165.2" font-family="Arial" font-size="14.00">• Load spec artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-150.2" font-family="Arial" font-size="14.00">• Load constitution</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-135.2" font-family="Arial" font-size="14.00">• Add retry context</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-120.2" font-family="Arial" font-size="14.00">• Apply ACE injection</text>
</g>
<!-- trigger&#45;&gt;build_prompt -->
<g id="edge1" class="edge">
<title>trigger&#45;&gt;build_prompt</title>
<path fill="none" stroke="black" d="M386.97,-258.81C404.41,-250.38 424.84,-241.25 444,-234.5 520.95,-207.39 611.69,-186.14 675.96,-172.81"/>
<polygon fill="black" stroke="black" points="676.27,-176.32 685.36,-170.88 674.86,-169.46 676.27,-176.32"/>
</g>
<!-- tier_select -->
<g id="node3" class="node">
<title>tier_select</title>
<polygon fill="#fff9c4" stroke="black" points="1041.75,-68 814.25,-68 814.25,0 1041.75,0 1041.75,-68"/>
<text xml:space="preserve" text-anchor="middle" x="928" y="-50.7" font-family="Arial" font-size="14.00">Select Agent Tier</text>
<text xml:space="preserve" text-anchor="middle" x="928" y="-35.7" font-family="Arial" font-size="14.00">• Tier 2: 3 agents (standard)</text>
<text xml:space="preserve" text-anchor="middle" x="928" y="-20.7" font-family="Arial" font-size="14.00">• Tier 3: 4 agents (implement)</text>
<text xml:space="preserve" text-anchor="middle" x="928" y="-5.7" font-family="Arial" font-size="14.00">• Tier 4: 5 agents (auto with arbiter)</text>
</g>
<!-- build_prompt&#45;&gt;tier_select -->
<g id="edge2" class="edge">
<title>build_prompt&#45;&gt;tier_select</title>
<path fill="none" stroke="black" d="M816.69,-114.04C834.52,-101.38 854.13,-87.45 871.86,-74.87"/>
<polygon fill="black" stroke="black" points="873.57,-77.94 879.7,-69.29 869.52,-72.23 873.57,-77.94"/>
</g>
<!-- gemini -->
<g id="node4" class="node">
<title>gemini</title>
<polygon fill="#ce93d8" stroke="black" points="576.38,-1137.17 445.62,-1137.17 445.62,-1054.17 576.38,-1054.17 576.38,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="511" y="-1119.87" font-family="Arial" font-size="14.00">Agent: Gemini</text>
<text xml:space="preserve" text-anchor="middle" x="511" y="-1104.87" font-family="Arial" font-size="14.00">gemini&#45;1.5&#45;pro&#45;002</text>
<text xml:space="preserve" text-anchor="middle" x="511" y="-1089.87" font-family="Arial" font-size="14.00">• Process prompt</text>
<text xml:space="preserve" text-anchor="middle" x="511" y="-1074.87" font-family="Arial" font-size="14.00">• Generate output</text>
<text xml:space="preserve" text-anchor="middle" x="511" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: ~$0.15</text>
</g>
<!-- tier_select&#45;&gt;gemini -->
<g id="edge3" class="edge">
<title>tier_select&#45;&gt;gemini</title>
<path fill="none" stroke="black" d="M902.33,-68.45C887.21,-91.49 871,-123.52 871,-155 871,-950.42 871,-950.42 871,-950.42 871,-985.26 881.25,-1004.25 855,-1027.17 809.69,-1066.73 642,-1026.95 585,-1046.17 582.48,-1047.02 579.97,-1047.97 577.47,-1049.02"/>
<polygon fill="black" stroke="black" points="576.24,-1045.72 568.66,-1053.12 579.2,-1052.07 576.24,-1045.72"/>
</g>
<!-- claude -->
<g id="node5" class="node">
<title>claude</title>
<polygon fill="#90caf9" stroke="black" points="717.62,-1137.17 594.38,-1137.17 594.38,-1054.17 717.62,-1054.17 717.62,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="656" y="-1119.87" font-family="Arial" font-size="14.00">Agent: Claude</text>
<text xml:space="preserve" text-anchor="middle" x="656" y="-1104.87" font-family="Arial" font-size="14.00">claude&#45;sonnet&#45;4</text>
<text xml:space="preserve" text-anchor="middle" x="656" y="-1089.87" font-family="Arial" font-size="14.00">• Process prompt</text>
<text xml:space="preserve" text-anchor="middle" x="656" y="-1074.87" font-family="Arial" font-size="14.00">• Generate output</text>
<text xml:space="preserve" text-anchor="middle" x="656" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: ~$0.30</text>
</g>
<!-- tier_select&#45;&gt;claude -->
<g id="edge4" class="edge">
<title>tier_select&#45;&gt;claude</title>
<path fill="none" stroke="black" d="M919.83,-68.4C914.68,-92.35 909,-125.47 909,-155 909,-950.42 909,-950.42 909,-950.42 909,-989.99 915.76,-1011.27 885,-1036.17 857.48,-1058.44 759.44,-1034.55 726,-1046.17 723.76,-1046.94 721.53,-1047.81 719.32,-1048.76"/>
<polygon fill="black" stroke="black" points="717.92,-1045.55 710.44,-1053.05 720.96,-1051.85 717.92,-1045.55"/>
</g>
<!-- code -->
<g id="node6" class="node">
<title>code</title>
<polygon fill="#a5d6a7" stroke="black" points="858.62,-1137.17 735.38,-1137.17 735.38,-1054.17 858.62,-1054.17 858.62,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="797" y="-1119.87" font-family="Arial" font-size="14.00">Agent: Code</text>
<text xml:space="preserve" text-anchor="middle" x="797" y="-1104.87" font-family="Arial" font-size="14.00">Native (Rust)</text>
<text xml:space="preserve" text-anchor="middle" x="797" y="-1089.87" font-family="Arial" font-size="14.00">• Process prompt</text>
<text xml:space="preserve" text-anchor="middle" x="797" y="-1074.87" font-family="Arial" font-size="14.00">• Generate output</text>
<text xml:space="preserve" text-anchor="middle" x="797" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: $0.00</text>
</g>
<!-- tier_select&#45;&gt;code -->
<g id="edge5" class="edge">
<title>tier_select&#45;&gt;code</title>
<path fill="none" stroke="black" d="M936.17,-68.4C941.32,-92.35 947,-125.47 947,-155 947,-884.67 947,-884.67 947,-884.67 947,-1039.9 925.54,-1031.31 920,-1036.17 902.3,-1051.68 889.73,-1037.12 868,-1046.17 866.2,-1046.92 864.4,-1047.72 862.6,-1048.56"/>
<polygon fill="black" stroke="black" points="861.03,-1045.43 853.73,-1053.11 864.22,-1051.66 861.03,-1045.43"/>
</g>
<!-- gpt_codex -->
<g id="node7" class="node">
<title>gpt_codex</title>
<polygon fill="#ffab91" stroke="black" stroke-dasharray="5,2" points="1007.38,-1137.17 876.62,-1137.17 876.62,-1054.17 1007.38,-1054.17 1007.38,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="942" y="-1119.87" font-family="Arial" font-size="14.00">Agent: GPT&#45;Codex</text>
<text xml:space="preserve" text-anchor="middle" x="942" y="-1104.87" font-family="Arial" font-size="14.00">(Tier 3 only)</text>
<text xml:space="preserve" text-anchor="middle" x="942" y="-1089.87" font-family="Arial" font-size="14.00">gpt&#45;5&#45;codex</text>
<text xml:space="preserve" text-anchor="middle" x="942" y="-1074.87" font-family="Arial" font-size="14.00">• Code generation</text>
<text xml:space="preserve" text-anchor="middle" x="942" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: ~$0.50</text>
</g>
<!-- tier_select&#45;&gt;gpt_codex -->
<g id="edge6" class="edge">
<title>tier_select&#45;&gt;gpt_codex</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M966.13,-68.33C987.14,-90.49 1009,-121.57 1009,-155 1009,-950.42 1009,-950.42 1009,-950.42 1009,-983.59 994.24,-1017.4 978.58,-1043.94"/>
<polygon fill="black" stroke="black" points="975.6,-1042.1 973.35,-1052.45 981.57,-1045.76 975.6,-1042.1"/>
<text xml:space="preserve" text-anchor="middle" x="1021.38" y="-592.17" font-family="Arial" font-size="10.00">Tier 3</text>
</g>
<!-- gpt_pro -->
<g id="node8" class="node">
<title>gpt_pro</title>
<polygon fill="#ffcc80" stroke="black" points="1172.25,-1137.17 1025.75,-1137.17 1025.75,-1054.17 1172.25,-1054.17 1172.25,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="1099" y="-1119.87" font-family="Arial" font-size="14.00">Agent: GPT&#45;Pro</text>
<text xml:space="preserve" text-anchor="middle" x="1099" y="-1104.87" font-family="Arial" font-size="14.00">gpt&#45;5&#45;codex</text>
<text xml:space="preserve" text-anchor="middle" x="1099" y="-1089.87" font-family="Arial" font-size="14.00">• Aggregator role</text>
<text xml:space="preserve" text-anchor="middle" x="1099" y="-1074.87" font-family="Arial" font-size="14.00">• Effort: low/med/high</text>
<text xml:space="preserve" text-anchor="middle" x="1099" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: ~$0.40</text>
</g>
<!-- tier_select&#45;&gt;gpt_pro -->
<g id="edge7" class="edge">
<title>tier_select&#45;&gt;gpt_pro</title>
<path fill="none" stroke="black" d="M1016.24,-68.39C1050.65,-87.6 1082,-115.85 1082,-155 1082,-950.42 1082,-950.42 1082,-950.42 1082,-981.09 1085.84,-1015.17 1089.87,-1042.51"/>
<polygon fill="black" stroke="black" points="1086.39,-1042.93 1091.36,-1052.28 1093.31,-1041.87 1086.39,-1042.93"/>
</g>
<!-- store_gemini -->
<g id="node9" class="node">
<title>store_gemini</title>
<path fill="#b2dfdb" stroke="black" d="M181.62,-987.67C181.62,-992.36 144.59,-996.17 99,-996.17 53.41,-996.17 16.38,-992.36 16.38,-987.67 16.38,-987.67 16.38,-911.17 16.38,-911.17 16.38,-906.48 53.41,-902.67 99,-902.67 144.59,-902.67 181.62,-906.48 181.62,-911.17 181.62,-911.17 181.62,-987.67 181.62,-987.67"/>
<path fill="none" stroke="black" d="M181.62,-987.67C181.62,-982.98 144.59,-979.17 99,-979.17 53.41,-979.17 16.38,-982.98 16.38,-987.67"/>
<text xml:space="preserve" text-anchor="middle" x="99" y="-966.12" font-family="Arial" font-size="14.00">Store Gemini Verdict</text>
<text xml:space="preserve" text-anchor="middle" x="99" y="-951.12" font-family="Arial" font-size="14.00">• domain: spec&#45;kit</text>
<text xml:space="preserve" text-anchor="middle" x="99" y="-936.12" font-family="Arial" font-size="14.00">• tags: [spec:ID, stage:X]</text>
<text xml:space="preserve" text-anchor="middle" x="99" y="-921.12" font-family="Arial" font-size="14.00">• importance: 8</text>
</g>
<!-- gemini&#45;&gt;store_gemini -->
<g id="edge8" class="edge">
<title>gemini&#45;&gt;store_gemini</title>
<path fill="none" stroke="black" d="M445.17,-1090.13C378.28,-1083.42 273.12,-1067 191,-1027.17 178.02,-1020.87 165.33,-1012.36 153.72,-1003.29"/>
<polygon fill="black" stroke="black" points="156.21,-1000.8 146.23,-997.23 151.8,-1006.24 156.21,-1000.8"/>
</g>
<!-- store_claude -->
<g id="node10" class="node">
<title>store_claude</title>
<path fill="#b2dfdb" stroke="black" d="M339.88,-964.14C339.88,-965.95 308.56,-967.42 270,-967.42 231.44,-967.42 200.12,-965.95 200.12,-964.14 200.12,-964.14 200.12,-934.69 200.12,-934.69 200.12,-932.88 231.44,-931.42 270,-931.42 308.56,-931.42 339.88,-932.88 339.88,-934.69 339.88,-934.69 339.88,-964.14 339.88,-964.14"/>
<path fill="none" stroke="black" d="M339.88,-964.14C339.88,-962.34 308.56,-960.87 270,-960.87 231.44,-960.87 200.12,-962.34 200.12,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="270" y="-943.62" font-family="Arial" font-size="14.00">Store Claude Verdict</text>
</g>
<!-- claude&#45;&gt;store_claude -->
<g id="edge9" class="edge">
<title>claude&#45;&gt;store_claude</title>
<path fill="none" stroke="black" d="M602.09,-1053.82C596.51,-1050.84 590.77,-1048.21 585,-1046.17 535.39,-1028.63 396.92,-1048.89 349,-1027.17 324.53,-1016.07 303.12,-994.04 288.79,-976.41"/>
<polygon fill="black" stroke="black" points="291.81,-974.59 282.89,-968.87 286.29,-978.9 291.81,-974.59"/>
</g>
<!-- store_code -->
<g id="node11" class="node">
<title>store_code</title>
<path fill="#b2dfdb" stroke="black" d="M487.62,-964.14C487.62,-965.95 458.66,-967.42 423,-967.42 387.34,-967.42 358.38,-965.95 358.38,-964.14 358.38,-964.14 358.38,-934.69 358.38,-934.69 358.38,-932.88 387.34,-931.42 423,-931.42 458.66,-931.42 487.62,-932.88 487.62,-934.69 487.62,-934.69 487.62,-964.14 487.62,-964.14"/>
<path fill="none" stroke="black" d="M487.62,-964.14C487.62,-962.34 458.66,-960.87 423,-960.87 387.34,-960.87 358.38,-962.34 358.38,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="423" y="-943.62" font-family="Arial" font-size="14.00">Store Code Verdict</text>
</g>
<!-- code&#45;&gt;store_code -->
<g id="edge10" class="edge">
<title>code&#45;&gt;store_code</title>
<path fill="none" stroke="black" d="M743.89,-1053.83C738.38,-1050.85 732.71,-1048.21 727,-1046.17 630.44,-1011.56 589.67,-1071.14 497,-1027.17 473.72,-1016.12 453.87,-994.39 440.61,-976.86"/>
<polygon fill="black" stroke="black" points="443.53,-974.93 434.83,-968.88 437.86,-979.03 443.53,-974.93"/>
</g>
<!-- store_gpt_codex -->
<g id="node12" class="node">
<title>store_gpt_codex</title>
<path fill="#b2dfdb" stroke="black" stroke-dasharray="5,2" d="M674.5,-964.14C674.5,-965.95 636.63,-967.42 590,-967.42 543.37,-967.42 505.5,-965.95 505.5,-964.14 505.5,-964.14 505.5,-934.69 505.5,-934.69 505.5,-932.88 543.37,-931.42 590,-931.42 636.63,-931.42 674.5,-932.88 674.5,-934.69 674.5,-934.69 674.5,-964.14 674.5,-964.14"/>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M674.5,-964.14C674.5,-962.34 636.63,-960.87 590,-960.87 543.37,-960.87 505.5,-962.34 505.5,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="590" y="-943.62" font-family="Arial" font-size="14.00">Store GPT&#45;Codex Verdict</text>
</g>
<!-- gpt_codex&#45;&gt;store_gpt_codex -->
<g id="edge11" class="edge">
<title>gpt_codex&#45;&gt;store_gpt_codex</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M885.22,-1053.74C879.58,-1050.82 873.79,-1048.22 868,-1046.17 790.54,-1018.63 759.92,-1058.71 684,-1027.17 656.58,-1015.77 630.86,-993.66 613.28,-976.09"/>
<polygon fill="black" stroke="black" points="615.86,-973.72 606.39,-968.98 610.84,-978.59 615.86,-973.72"/>
</g>
<!-- store_gpt_pro -->
<g id="node13" class="node">
<title>store_gpt_pro</title>
<path fill="#b2dfdb" stroke="black" d="M843.12,-964.14C843.12,-965.95 809.45,-967.42 768,-967.42 726.55,-967.42 692.88,-965.95 692.88,-964.14 692.88,-964.14 692.88,-934.69 692.88,-934.69 692.88,-932.88 726.55,-931.42 768,-931.42 809.45,-931.42 843.12,-932.88 843.12,-934.69 843.12,-934.69 843.12,-964.14 843.12,-964.14"/>
<path fill="none" stroke="black" d="M843.12,-964.14C843.12,-962.34 809.45,-960.87 768,-960.87 726.55,-960.87 692.88,-962.34 692.88,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="768" y="-943.62" font-family="Arial" font-size="14.00">Store GPT&#45;Pro Verdict</text>
</g>
<!-- gpt_pro&#45;&gt;store_gpt_pro -->
<g id="edge12" class="edge">
<title>gpt_pro&#45;&gt;store_gpt_pro</title>
<path fill="none" stroke="black" d="M1031.08,-1053.81C1026.02,-1051.13 1020.96,-1048.56 1016,-1046.17 954.2,-1016.42 880.59,-988.95 829.7,-971.13"/>
<polygon fill="black" stroke="black" points="830.9,-967.84 820.31,-967.86 828.6,-974.45 830.9,-967.84"/>
</g>
<!-- query_artifacts -->
<g id="node14" class="node">
<title>query_artifacts</title>
<polygon fill="#b3e5fc" stroke="black" points="508,-865.67 336,-865.67 336,-797.67 508,-797.67 508,-865.67"/>
<text xml:space="preserve" text-anchor="middle" x="422" y="-848.37" font-family="Arial" font-size="14.00">Query Artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="422" y="-833.37" font-family="Arial" font-size="14.00">• Search local&#45;memory</text>
<text xml:space="preserve" text-anchor="middle" x="422" y="-818.37" font-family="Arial" font-size="14.00">• Filter by spec_id + stage</text>
<text xml:space="preserve" text-anchor="middle" x="422" y="-803.37" font-family="Arial" font-size="14.00">• Collect all verdicts</text>
</g>
<!-- store_gemini&#45;&gt;query_artifacts -->
<g id="edge13" class="edge">
<title>store_gemini&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M169.35,-904.81C176.54,-901.12 183.83,-897.66 191,-894.67 233.56,-876.9 282.68,-862.88 324.65,-852.7"/>
<polygon fill="black" stroke="black" points="325.33,-856.13 334.24,-850.41 323.7,-849.32 325.33,-856.13"/>
</g>
<!-- store_claude&#45;&gt;query_artifacts -->
<g id="edge14" class="edge">
<title>store_claude&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M292.76,-931.09C312.91,-915.74 343.09,-892.76 369.23,-872.85"/>
<polygon fill="black" stroke="black" points="371.24,-875.72 377.07,-866.88 367,-870.15 371.24,-875.72"/>
</g>
<!-- store_code&#45;&gt;query_artifacts -->
<g id="edge15" class="edge">
<title>store_code&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M422.85,-931.09C422.73,-916.88 422.55,-896.13 422.39,-877.33"/>
<polygon fill="black" stroke="black" points="425.89,-877.44 422.3,-867.48 418.89,-877.51 425.89,-877.44"/>
</g>
<!-- store_gpt_codex&#45;&gt;query_artifacts -->
<g id="edge16" class="edge">
<title>store_gpt_codex&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M564.85,-931.09C542.38,-915.61 508.63,-892.35 479.57,-872.33"/>
<polygon fill="black" stroke="black" points="481.79,-869.61 471.57,-866.82 477.82,-875.38 481.79,-869.61"/>
</g>
<!-- store_gpt_pro&#45;&gt;query_artifacts -->
<g id="edge17" class="edge">
<title>store_gpt_pro&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M745.64,-931.13C729.35,-919.31 706.32,-904.12 684,-894.67 631.68,-872.5 569.98,-857.4 519.6,-847.66"/>
<polygon fill="black" stroke="black" points="520.33,-844.24 509.86,-845.83 519.03,-851.12 520.33,-844.24"/>
</g>
<!-- synthesize_consensus -->
<g id="node15" class="node">
<title>synthesize_consensus</title>
<polygon fill="#81d4fa" stroke="black" points="471.62,-760.67 318.38,-760.67 318.38,-692.67 471.62,-692.67 471.62,-760.67"/>
<text xml:space="preserve" text-anchor="middle" x="395" y="-743.37" font-family="Arial" font-size="14.00">Synthesize Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="395" y="-728.37" font-family="Arial" font-size="14.00">• Parse verdict fields</text>
<text xml:space="preserve" text-anchor="middle" x="395" y="-713.37" font-family="Arial" font-size="14.00">• Compare outputs</text>
<text xml:space="preserve" text-anchor="middle" x="395" y="-698.37" font-family="Arial" font-size="14.00">• Calculate agreement</text>
</g>
<!-- query_artifacts&#45;&gt;synthesize_consensus -->
<g id="edge18" class="edge">
<title>query_artifacts&#45;&gt;synthesize_consensus</title>
<path fill="none" stroke="black" d="M413.23,-797.23C411.11,-789.14 408.82,-780.37 406.59,-771.87"/>
<polygon fill="black" stroke="black" points="410.03,-771.19 404.11,-762.4 403.26,-772.96 410.03,-771.19"/>
</g>
<!-- consensus_type -->
<g id="node16" class="node">
<title>consensus_type</title>
<polygon fill="#ffe082" stroke="black" points="389,-655.67 275.71,-637.67 389,-619.67 502.29,-637.67 389,-655.67"/>
<text xml:space="preserve" text-anchor="middle" x="389" y="-631.87" font-family="Arial" font-size="14.00">Consensus Type?</text>
</g>
<!-- synthesize_consensus&#45;&gt;consensus_type -->
<g id="edge19" class="edge">
<title>synthesize_consensus&#45;&gt;consensus_type</title>
<path fill="none" stroke="black" d="M392.7,-692.28C392.13,-684.01 391.52,-675.22 390.97,-667.2"/>
<polygon fill="black" stroke="black" points="394.46,-667.04 390.29,-657.3 387.48,-667.52 394.46,-667.04"/>
</g>
<!-- unanimous -->
<g id="node17" class="node">
<title>unanimous</title>
<polygon fill="#c8e6c9" stroke="black" points="458,-565.67 316,-565.67 316,-497.67 458,-497.67 458,-565.67"/>
<text xml:space="preserve" text-anchor="middle" x="387" y="-548.37" font-family="Arial" font-size="14.00">Unanimous (3/3)</text>
<text xml:space="preserve" text-anchor="middle" x="387" y="-533.37" font-family="Arial" font-size="14.00">• All agents agree</text>
<text xml:space="preserve" text-anchor="middle" x="387" y="-518.37" font-family="Arial" font-size="14.00">• consensus_ok: true</text>
<text xml:space="preserve" text-anchor="middle" x="387" y="-503.37" font-family="Arial" font-size="14.00">• degraded: false</text>
</g>
<!-- consensus_type&#45;&gt;unanimous -->
<g id="edge20" class="edge">
<title>consensus_type&#45;&gt;unanimous</title>
<path fill="none" stroke="black" d="M388.67,-619.49C388.45,-607.91 388.14,-592.05 387.85,-577.06"/>
<polygon fill="black" stroke="black" points="391.36,-577.29 387.67,-567.36 384.36,-577.43 391.36,-577.29"/>
<text xml:space="preserve" text-anchor="middle" x="408.92" y="-592.17" font-family="Arial" font-size="10.00">3/3 or 4/4</text>
</g>
<!-- majority -->
<g id="node18" class="node">
<title>majority</title>
<polygon fill="#fff9c4" stroke="black" points="298.12,-573.17 141.88,-573.17 141.88,-490.17 298.12,-490.17 298.12,-573.17"/>
<text xml:space="preserve" text-anchor="middle" x="220" y="-555.87" font-family="Arial" font-size="14.00">Majority (2/3)</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-540.87" font-family="Arial" font-size="14.00">• Gemini disagrees OR</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-525.87" font-family="Arial" font-size="14.00">• One agent missing</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-510.87" font-family="Arial" font-size="14.00">• consensus_ok: true</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-495.87" font-family="Arial" font-size="14.00">• degraded: true</text>
</g>
<!-- consensus_type&#45;&gt;majority -->
<g id="edge21" class="edge">
<title>consensus_type&#45;&gt;majority</title>
<path fill="none" stroke="black" d="M366.56,-622.86C348.41,-611.69 321.74,-595.27 296.11,-579.5"/>
<polygon fill="black" stroke="black" points="298,-576.56 287.65,-574.3 294.33,-582.52 298,-576.56"/>
<text xml:space="preserve" text-anchor="middle" x="336.26" y="-592.17" font-family="Arial" font-size="10.00">2/3</text>
</g>
<!-- conflict -->
<g id="node19" class="node">
<title>conflict</title>
<polygon fill="#ffcdd2" stroke="black" points="641.62,-565.67 476.38,-565.67 476.38,-497.67 641.62,-497.67 641.62,-565.67"/>
<text xml:space="preserve" text-anchor="middle" x="559" y="-548.37" font-family="Arial" font-size="14.00">Conflict (&lt;2/3)</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-533.37" font-family="Arial" font-size="14.00">• Multiple disagreements</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-518.37" font-family="Arial" font-size="14.00">• consensus_ok: false</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-503.37" font-family="Arial" font-size="14.00">• Requires resolution</text>
</g>
<!-- consensus_type&#45;&gt;conflict -->
<g id="edge22" class="edge">
<title>consensus_type&#45;&gt;conflict</title>
<path fill="none" stroke="black" d="M411.57,-622.86C432.75,-609.9 465.46,-589.89 494.69,-572.01"/>
<polygon fill="black" stroke="black" points="496.45,-575.04 503.15,-566.83 492.79,-569.07 496.45,-575.04"/>
<text xml:space="preserve" text-anchor="middle" x="468.52" y="-592.17" font-family="Arial" font-size="10.00">&lt;2/3</text>
</g>
<!-- degrade_check -->
<g id="node20" class="node">
<title>degrade_check</title>
<polygon fill="#ffe082" stroke="black" points="220,-433.17 143.94,-415.17 220,-397.17 296.06,-415.17 220,-433.17"/>
<text xml:space="preserve" text-anchor="middle" x="220" y="-409.37" font-family="Arial" font-size="14.00">Degraded?</text>
</g>
<!-- unanimous&#45;&gt;degrade_check -->
<g id="edge23" class="edge">
<title>unanimous&#45;&gt;degrade_check</title>
<path fill="none" stroke="black" d="M338.25,-497.24C308.97,-477.17 272.76,-452.34 248.17,-435.48"/>
<polygon fill="black" stroke="black" points="250.2,-432.63 239.97,-429.86 246.24,-438.4 250.2,-432.63"/>
</g>
<!-- majority&#45;&gt;degrade_check -->
<g id="edge24" class="edge">
<title>majority&#45;&gt;degrade_check</title>
<path fill="none" stroke="black" d="M220,-489.98C220,-474.96 220,-458.29 220,-444.59"/>
<polygon fill="black" stroke="black" points="223.5,-444.95 220,-434.95 216.5,-444.95 223.5,-444.95"/>
</g>
<!-- retry_check -->
<g id="node22" class="node">
<title>retry_check</title>
<polygon fill="#ffe082" stroke="black" points="559,-453.17 476.25,-415.17 559,-377.17 641.75,-415.17 559,-453.17"/>
<text xml:space="preserve" text-anchor="middle" x="559" y="-416.87" font-family="Arial" font-size="14.00">Retry</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-401.87" font-family="Arial" font-size="14.00">Count &lt; 3?</text>
</g>
<!-- conflict&#45;&gt;retry_check -->
<g id="edge28" class="edge">
<title>conflict&#45;&gt;retry_check</title>
<path fill="none" stroke="black" d="M559,-497.24C559,-487.05 559,-475.63 559,-464.66"/>
<polygon fill="black" stroke="black" points="562.5,-464.96 559,-454.96 555.5,-464.96 562.5,-464.96"/>
</g>
<!-- schedule_followup -->
<g id="node21" class="node">
<title>schedule_followup</title>
<polygon fill="#ffab91" stroke="black" points="184.25,-316.58 49.75,-316.58 49.75,-248.58 184.25,-248.58 184.25,-316.58"/>
<text xml:space="preserve" text-anchor="middle" x="117" y="-299.28" font-family="Arial" font-size="14.00">Schedule Follow&#45;up</text>
<text xml:space="preserve" text-anchor="middle" x="117" y="-284.28" font-family="Arial" font-size="14.00">• /speckit.checklist</text>
<text xml:space="preserve" text-anchor="middle" x="117" y="-269.28" font-family="Arial" font-size="14.00">• Review quality</text>
<text xml:space="preserve" text-anchor="middle" x="117" y="-254.28" font-family="Arial" font-size="14.00">• Manual check</text>
</g>
<!-- degrade_check&#45;&gt;schedule_followup -->
<g id="edge26" class="edge">
<title>degrade_check&#45;&gt;schedule_followup</title>
<path fill="none" stroke="black" d="M208.38,-399.44C194.42,-381.74 170.38,-351.26 150.46,-326"/>
<polygon fill="black" stroke="black" points="153.21,-323.84 144.27,-318.16 147.71,-328.17 153.21,-323.84"/>
<text xml:space="preserve" text-anchor="middle" x="182.92" y="-349.67" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- advance_stage -->
<g id="node25" class="node">
<title>advance_stage</title>
<polygon fill="#4db6ac" stroke="black" points="289.12,-197.5 126.88,-197.5 126.88,-114.5 289.12,-114.5 289.12,-197.5"/>
<text xml:space="preserve" text-anchor="middle" x="208" y="-180.2" font-family="Arial" font-size="14.00">Advance to</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-165.2" font-family="Arial" font-size="14.00">Next Stage</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-150.2" font-family="Arial" font-size="14.00">• Reset retry count</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-135.2" font-family="Arial" font-size="14.00">• Increment stage_index</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-120.2" font-family="Arial" font-size="14.00">• Persist cost summary</text>
</g>
<!-- degrade_check&#45;&gt;advance_stage -->
<g id="edge25" class="edge">
<title>degrade_check&#45;&gt;advance_stage</title>
<path fill="none" stroke="black" d="M219.19,-396.89C217.43,-358.99 213.14,-267.26 210.42,-208.85"/>
<polygon fill="black" stroke="black" points="213.93,-208.97 209.97,-199.14 206.94,-209.3 213.93,-208.97"/>
<text xml:space="preserve" text-anchor="middle" x="222.34" y="-278.33" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- schedule_followup&#45;&gt;advance_stage -->
<g id="edge27" class="edge">
<title>schedule_followup&#45;&gt;advance_stage</title>
<path fill="none" stroke="black" d="M141.39,-248.2C150.71,-235.43 161.56,-220.57 171.77,-206.61"/>
<polygon fill="black" stroke="black" points="174.39,-208.95 177.46,-198.81 168.74,-204.82 174.39,-208.95"/>
</g>
<!-- retry_stage -->
<g id="node23" class="node">
<title>retry_stage</title>
<polygon fill="#ffccbc" stroke="black" points="843.12,-324.08 674.88,-324.08 674.88,-241.08 843.12,-241.08 843.12,-324.08"/>
<text xml:space="preserve" text-anchor="middle" x="759" y="-306.78" font-family="Arial" font-size="14.00">Retry Stage</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-291.78" font-family="Arial" font-size="14.00">• Increment retry_count</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-276.78" font-family="Arial" font-size="14.00">• Add context:</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-261.78" font-family="Arial" font-size="14.00"> &#160;&#39;Previous attempt failed&#39;</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-246.78" font-family="Arial" font-size="14.00">• Reset to Guardrail</text>
</g>
<!-- retry_check&#45;&gt;retry_stage -->
<g id="edge29" class="edge">
<title>retry_check&#45;&gt;retry_stage</title>
<path fill="none" stroke="black" d="M592.48,-392.31C618.18,-375.52 654.63,-351.73 686.87,-330.68"/>
<polygon fill="black" stroke="black" points="688.55,-333.76 695.01,-325.36 684.72,-327.9 688.55,-333.76"/>
<text xml:space="preserve" text-anchor="middle" x="667.25" y="-349.67" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- max_retry -->
<g id="node24" class="node">
<title>max_retry</title>
<ellipse fill="#ef5350" stroke="black" cx="555" cy="-282.58" rx="102" ry="48.08"/>
<text xml:space="preserve" text-anchor="middle" x="555" y="-299.28" font-family="Arial" font-size="14.00">Max Retries</text>
<text xml:space="preserve" text-anchor="middle" x="555" y="-284.28" font-family="Arial" font-size="14.00">Reached</text>
<text xml:space="preserve" text-anchor="middle" x="555" y="-269.28" font-family="Arial" font-size="14.00">• Halt pipeline</text>
<text xml:space="preserve" text-anchor="middle" x="555" y="-254.28" font-family="Arial" font-size="14.00">• Manual intervention</text>
</g>
<!-- retry_check&#45;&gt;max_retry -->
<g id="edge30" class="edge">
<title>retry_check&#45;&gt;max_retry</title>
<path fill="none" stroke="black" d="M557.88,-377.44C557.54,-366.47 557.16,-354.15 556.79,-342.14"/>
<polygon fill="black" stroke="black" points="560.3,-342.17 556.49,-332.29 553.3,-342.39 560.3,-342.17"/>
<text xml:space="preserve" text-anchor="middle" x="563.61" y="-349.67" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- retry_stage&#45;&gt;build_prompt -->
<g id="edge31" class="edge">
<title>retry_stage&#45;&gt;build_prompt</title>
<path fill="none" stroke="black" d="M759,-240.79C759,-230.68 759,-219.71 759,-209.14"/>
<polygon fill="black" stroke="black" points="762.5,-209.4 759,-199.4 755.5,-209.4 762.5,-209.4"/>
</g>
<!-- cost_persist -->
<g id="node26" class="node">
<title>cost_persist</title>
<path fill="none" stroke="black" d="M240,-52C240,-52 176,-52 176,-52 170,-52 164,-46 164,-40 164,-40 164,-28 164,-28 164,-22 170,-16 176,-16 176,-16 240,-16 240,-16 246,-16 252,-22 252,-28 252,-28 252,-40 252,-40 252,-46 246,-52 240,-52"/>
<text xml:space="preserve" text-anchor="middle" x="208" y="-28.2" font-family="Arial" font-size="14.00">cost_persist</text>
</g>
<!-- advance_stage&#45;&gt;cost_persist -->
<g id="edge32" class="edge">
<title>advance_stage&#45;&gt;cost_persist</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M208,-114.04C208,-97.43 208,-78.65 208,-63.57"/>
<polygon fill="black" stroke="black" points="211.5,-63.89 208,-53.89 204.5,-63.89 211.5,-63.89"/>
<text xml:space="preserve" text-anchor="middle" x="223" y="-87" font-family="Arial" font-size="10.00">persist</text>
</g>
<!-- leg_tier2 -->
<g id="node27" class="node">
<title>leg_tier2</title>
<polygon fill="#e3f2fd" stroke="black" points="1404.38,-1114.67 1195.62,-1114.67 1195.62,-1076.67 1404.38,-1076.67 1404.38,-1114.67"/>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-1097.37" font-family="Arial" font-size="14.00">Tier 2: Gemini + Claude + Code</text>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-1082.37" font-family="Arial" font-size="14.00">$0.80&#45;1.00, 8&#45;12 min</text>
</g>
<!-- leg_tier3 -->
<g id="node28" class="node">
<title>leg_tier3</title>
<polygon fill="#ffe0b2" stroke="black" points="1371,-968.42 1229,-968.42 1229,-930.42 1371,-930.42 1371,-968.42"/>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-951.12" font-family="Arial" font-size="14.00">Tier 3: + GPT&#45;Codex</text>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-936.12" font-family="Arial" font-size="14.00">$2.00, 15&#45;20 min</text>
</g>
<!-- leg_tier2&#45;&gt;leg_tier3 -->
<!-- leg_tier4 -->
<g id="node29" class="node">
<title>leg_tier4</title>
<polygon fill="#ffccbc" stroke="black" points="1386.75,-850.67 1213.25,-850.67 1213.25,-812.67 1386.75,-812.67 1386.75,-850.67"/>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-833.37" font-family="Arial" font-size="14.00">Tier 4: + Arbiter (dynamic)</text>
<text xml:space="preserve" text-anchor="middle" x="1300" y="-818.37" font-family="Arial" font-size="14.00">$11.00, 60 min</text>
</g>
<!-- leg_tier3&#45;&gt;leg_tier4 -->
</g>
</svg>
