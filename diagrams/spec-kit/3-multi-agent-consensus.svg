<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (0)
 -->
<!-- Title: spec_kit_multi_agent_consensus Pages: 1 -->
<svg width="1590pt" height="1222pt"
 viewBox="0.00 0.00 1590.00 1222.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1218.17)">
<title>spec_kit_multi_agent_consensus</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1218.17 1586,-1218.17 1586,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="791" y="-1196.87" font-family="Arial" font-size="14.00">Spec&#45;Kit Multi&#45;Agent Consensus Flow</text>
<text xml:space="preserve" text-anchor="middle" x="791" y="-1181.87" font-family="Arial" font-size="14.00">How AI Agents Collaborate</text>
<g id="clust1" class="cluster">
<title>cluster_agents</title>
<polygon fill="#e8eaf6" stroke="black" points="368,-1046.17 368,-1168.17 1214,-1168.17 1214,-1046.17 368,-1046.17"/>
<text xml:space="preserve" text-anchor="middle" x="791" y="-1150.87" font-family="Arial" font-size="14.00">Parallel Agent Execution (Actual Models)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_storage</title>
<polygon fill="#e0f2f1" stroke="black" points="8,-894.67 8,-1027.17 851,-1027.17 851,-894.67 8,-894.67"/>
<text xml:space="preserve" text-anchor="middle" x="429.5" y="-1009.87" font-family="Arial" font-size="14.00">Artifact Storage (Local&#45;Memory MCP)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_legend</title>
<polygon fill="#fafafa" stroke="black" points="1222,-692.17 1222,-1153.17 1574,-1153.17 1574,-692.17 1222,-692.17"/>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-1135.87" font-family="Arial" font-size="14.00">Agent Tiers (Actual Config)</text>
</g>
<!-- trigger -->
<g id="node1" class="node">
<title>trigger</title>
<ellipse fill="#e3f2fd" stroke="black" cx="343" cy="-282.58" rx="91.92" ry="26.87"/>
<text xml:space="preserve" text-anchor="middle" x="343" y="-284.28" font-family="Arial" font-size="14.00">Stage Trigger</text>
<text xml:space="preserve" text-anchor="middle" x="343" y="-269.28" font-family="Arial" font-size="14.00">(e.g., /speckit.plan)</text>
</g>
<!-- build_prompt -->
<g id="node2" class="node">
<title>build_prompt</title>
<polygon fill="#ffe082" stroke="black" points="830.75,-197.5 687.25,-197.5 687.25,-114.5 830.75,-114.5 830.75,-197.5"/>
<text xml:space="preserve" text-anchor="middle" x="759" y="-180.2" font-family="Arial" font-size="14.00">Build Stage Prompt</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-165.2" font-family="Arial" font-size="14.00">• Load spec artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-150.2" font-family="Arial" font-size="14.00">• Load constitution</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-135.2" font-family="Arial" font-size="14.00">• Add retry context</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-120.2" font-family="Arial" font-size="14.00">• Apply ACE injection</text>
</g>
<!-- trigger&#45;&gt;build_prompt -->
<g id="edge1" class="edge">
<title>trigger&#45;&gt;build_prompt</title>
<path fill="none" stroke="black" d="M386.97,-258.81C404.41,-250.38 424.84,-241.25 444,-234.5 520.95,-207.39 611.69,-186.14 675.96,-172.81"/>
<polygon fill="black" stroke="black" points="676.27,-176.32 685.36,-170.88 674.86,-169.46 676.27,-176.32"/>
</g>
<!-- tier_select -->
<g id="node3" class="node">
<title>tier_select</title>
<polygon fill="#fff9c4" stroke="black" points="1041.75,-68 814.25,-68 814.25,0 1041.75,0 1041.75,-68"/>
<text xml:space="preserve" text-anchor="middle" x="928" y="-50.7" font-family="Arial" font-size="14.00">Select Agent Tier</text>
<text xml:space="preserve" text-anchor="middle" x="928" y="-35.7" font-family="Arial" font-size="14.00">• Tier 2: 3 agents (standard)</text>
<text xml:space="preserve" text-anchor="middle" x="928" y="-20.7" font-family="Arial" font-size="14.00">• Tier 3: 4 agents (implement)</text>
<text xml:space="preserve" text-anchor="middle" x="928" y="-5.7" font-family="Arial" font-size="14.00">• Tier 4: 5 agents (auto with arbiter)</text>
</g>
<!-- build_prompt&#45;&gt;tier_select -->
<g id="edge2" class="edge">
<title>build_prompt&#45;&gt;tier_select</title>
<path fill="none" stroke="black" d="M816.69,-114.04C834.52,-101.38 854.13,-87.45 871.86,-74.87"/>
<polygon fill="black" stroke="black" points="873.57,-77.94 879.7,-69.29 869.52,-72.23 873.57,-77.94"/>
</g>
<!-- gemini -->
<g id="node4" class="node">
<title>gemini</title>
<polygon fill="#ce93d8" stroke="black" points="530,-1137.17 376,-1137.17 376,-1054.17 530,-1054.17 530,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="453" y="-1119.87" font-family="Arial" font-size="14.00">Agent: Gemini</text>
<text xml:space="preserve" text-anchor="middle" x="453" y="-1104.87" font-family="Arial" font-size="14.00">Default: Flash Thinking</text>
<text xml:space="preserve" text-anchor="middle" x="453" y="-1089.87" font-family="Arial" font-size="14.00">Implement: 2.5 Pro</text>
<text xml:space="preserve" text-anchor="middle" x="453" y="-1074.87" font-family="Arial" font-size="14.00">Auto: Flash&#45;Lite</text>
<text xml:space="preserve" text-anchor="middle" x="453" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: $0.05&#45;0.15</text>
</g>
<!-- tier_select&#45;&gt;gemini -->
<g id="edge3" class="edge">
<title>tier_select&#45;&gt;gemini</title>
<path fill="none" stroke="black" d="M902.33,-68.45C887.21,-91.49 871,-123.52 871,-155 871,-950.42 871,-950.42 871,-950.42 871,-985.26 881.36,-1004.38 855,-1027.17 828.39,-1050.17 572.74,-1036.22 539,-1046.17 535.73,-1047.13 532.46,-1048.23 529.19,-1049.45"/>
<polygon fill="black" stroke="black" points="528.15,-1046.1 520.23,-1053.13 530.81,-1052.58 528.15,-1046.1"/>
</g>
<!-- claude -->
<g id="node5" class="node">
<title>claude</title>
<polygon fill="#90caf9" stroke="black" points="691.75,-1137.17 548.25,-1137.17 548.25,-1054.17 691.75,-1054.17 691.75,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="620" y="-1119.87" font-family="Arial" font-size="14.00">Agent: Claude</text>
<text xml:space="preserve" text-anchor="middle" x="620" y="-1104.87" font-family="Arial" font-size="14.00">Default: Haiku 3.5</text>
<text xml:space="preserve" text-anchor="middle" x="620" y="-1089.87" font-family="Arial" font-size="14.00">Implement: Opus 4.1</text>
<text xml:space="preserve" text-anchor="middle" x="620" y="-1074.87" font-family="Arial" font-size="14.00">Auto: Haiku 4.5</text>
<text xml:space="preserve" text-anchor="middle" x="620" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: $0.02&#45;0.25</text>
</g>
<!-- tier_select&#45;&gt;claude -->
<g id="edge4" class="edge">
<title>tier_select&#45;&gt;claude</title>
<path fill="none" stroke="black" d="M919.83,-68.4C914.68,-92.35 909,-125.47 909,-155 909,-950.42 909,-950.42 909,-950.42 909,-989.99 915.87,-1011.4 885,-1036.17 869.03,-1048.98 720.58,-1040.18 701,-1046.17 697.91,-1047.11 694.82,-1048.2 691.75,-1049.4"/>
<polygon fill="black" stroke="black" points="690.56,-1046.1 682.76,-1053.28 693.33,-1052.52 690.56,-1046.1"/>
</g>
<!-- code -->
<g id="node6" class="node">
<title>code</title>
<polygon fill="#a5d6a7" stroke="black" points="842.5,-1129.67 709.5,-1129.67 709.5,-1061.67 842.5,-1061.67 842.5,-1129.67"/>
<text xml:space="preserve" text-anchor="middle" x="776" y="-1112.37" font-family="Arial" font-size="14.00">Agent: Code</text>
<text xml:space="preserve" text-anchor="middle" x="776" y="-1097.37" font-family="Arial" font-size="14.00">gpt&#45;5&#45;codex via CLI</text>
<text xml:space="preserve" text-anchor="middle" x="776" y="-1082.37" font-family="Arial" font-size="14.00">• Native execution</text>
<text xml:space="preserve" text-anchor="middle" x="776" y="-1067.37" font-family="Arial" font-size="14.00">• Cost: $0.08</text>
</g>
<!-- tier_select&#45;&gt;code -->
<g id="edge5" class="edge">
<title>tier_select&#45;&gt;code</title>
<path fill="none" stroke="black" d="M936.17,-68.4C941.32,-92.35 947,-125.47 947,-155 947,-884.67 947,-884.67 947,-884.67 947,-1043.27 925.54,-1031.53 920,-1036.17 896.23,-1056.05 880.01,-1035.28 851,-1046.17 844.07,-1048.77 837.13,-1052.08 830.4,-1055.75"/>
<polygon fill="black" stroke="black" points="828.95,-1052.55 822.05,-1060.59 832.46,-1058.61 828.95,-1052.55"/>
</g>
<!-- gpt_codex -->
<g id="node7" class="node">
<title>gpt_codex</title>
<polygon fill="#ffab91" stroke="black" stroke-dasharray="5,2" points="1011.88,-1137.17 860.12,-1137.17 860.12,-1054.17 1011.88,-1054.17 1011.88,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="936" y="-1119.87" font-family="Arial" font-size="14.00">Agent: GPT&#45;Codex</text>
<text xml:space="preserve" text-anchor="middle" x="936" y="-1104.87" font-family="Arial" font-size="14.00">(Implement only)</text>
<text xml:space="preserve" text-anchor="middle" x="936" y="-1089.87" font-family="Arial" font-size="14.00">gpt&#45;5&#45;codex high effort</text>
<text xml:space="preserve" text-anchor="middle" x="936" y="-1074.87" font-family="Arial" font-size="14.00">• Code generation</text>
<text xml:space="preserve" text-anchor="middle" x="936" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: ~$0.50</text>
</g>
<!-- tier_select&#45;&gt;gpt_codex -->
<g id="edge6" class="edge">
<title>tier_select&#45;&gt;gpt_codex</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M966.13,-68.33C987.14,-90.49 1009,-121.57 1009,-155 1009,-950.42 1009,-950.42 1009,-950.42 1009,-984.16 992.9,-1018.03 975.82,-1044.46"/>
<polygon fill="black" stroke="black" points="973.03,-1042.34 970.35,-1052.59 978.84,-1046.24 973.03,-1042.34"/>
<text xml:space="preserve" text-anchor="middle" x="1021.38" y="-592.17" font-family="Arial" font-size="10.00">Tier 3</text>
</g>
<!-- gpt_pro -->
<g id="node8" class="node">
<title>gpt_pro</title>
<polygon fill="#ffcc80" stroke="black" points="1205.88,-1137.17 1030.12,-1137.17 1030.12,-1054.17 1205.88,-1054.17 1205.88,-1137.17"/>
<text xml:space="preserve" text-anchor="middle" x="1118" y="-1119.87" font-family="Arial" font-size="14.00">Agent: GPT&#45;Pro</text>
<text xml:space="preserve" text-anchor="middle" x="1118" y="-1104.87" font-family="Arial" font-size="14.00">gpt&#45;5&#45;codex medium effort</text>
<text xml:space="preserve" text-anchor="middle" x="1118" y="-1089.87" font-family="Arial" font-size="14.00">• Aggregator role</text>
<text xml:space="preserve" text-anchor="middle" x="1118" y="-1074.87" font-family="Arial" font-size="14.00">• Synthesizes consensus</text>
<text xml:space="preserve" text-anchor="middle" x="1118" y="-1059.87" font-family="Arial" font-size="14.00">• Cost: ~$0.30</text>
</g>
<!-- tier_select&#45;&gt;gpt_pro -->
<g id="edge7" class="edge">
<title>tier_select&#45;&gt;gpt_pro</title>
<path fill="none" stroke="black" d="M1027.56,-68.49C1063.32,-87.3 1095,-115.19 1095,-155 1095,-950.42 1095,-950.42 1095,-950.42 1095,-981.26 1100.19,-1015.36 1105.64,-1042.65"/>
<polygon fill="black" stroke="black" points="1102.21,-1043.34 1107.67,-1052.42 1109.06,-1041.92 1102.21,-1043.34"/>
</g>
<!-- store_gemini -->
<g id="node9" class="node">
<title>store_gemini</title>
<path fill="#b2dfdb" stroke="black" d="M181.62,-987.67C181.62,-992.36 144.59,-996.17 99,-996.17 53.41,-996.17 16.38,-992.36 16.38,-987.67 16.38,-987.67 16.38,-911.17 16.38,-911.17 16.38,-906.48 53.41,-902.67 99,-902.67 144.59,-902.67 181.62,-906.48 181.62,-911.17 181.62,-911.17 181.62,-987.67 181.62,-987.67"/>
<path fill="none" stroke="black" d="M181.62,-987.67C181.62,-982.98 144.59,-979.17 99,-979.17 53.41,-979.17 16.38,-982.98 16.38,-987.67"/>
<text xml:space="preserve" text-anchor="middle" x="99" y="-966.12" font-family="Arial" font-size="14.00">Store Gemini Verdict</text>
<text xml:space="preserve" text-anchor="middle" x="99" y="-951.12" font-family="Arial" font-size="14.00">• domain: spec&#45;kit</text>
<text xml:space="preserve" text-anchor="middle" x="99" y="-936.12" font-family="Arial" font-size="14.00">• tags: [spec:ID, stage:X]</text>
<text xml:space="preserve" text-anchor="middle" x="99" y="-921.12" font-family="Arial" font-size="14.00">• importance: 8</text>
</g>
<!-- gemini&#45;&gt;store_gemini -->
<g id="edge8" class="edge">
<title>gemini&#45;&gt;store_gemini</title>
<path fill="none" stroke="black" d="M375.54,-1083.97C321.61,-1074.35 249.21,-1057.01 191,-1027.17 178.44,-1020.73 166.07,-1012.31 154.68,-1003.41"/>
<polygon fill="black" stroke="black" points="156.92,-1000.72 146.95,-997.16 152.52,-1006.17 156.92,-1000.72"/>
</g>
<!-- store_claude -->
<g id="node10" class="node">
<title>store_claude</title>
<path fill="#b2dfdb" stroke="black" d="M339.88,-964.14C339.88,-965.95 308.56,-967.42 270,-967.42 231.44,-967.42 200.12,-965.95 200.12,-964.14 200.12,-964.14 200.12,-934.69 200.12,-934.69 200.12,-932.88 231.44,-931.42 270,-931.42 308.56,-931.42 339.88,-932.88 339.88,-934.69 339.88,-934.69 339.88,-964.14 339.88,-964.14"/>
<path fill="none" stroke="black" d="M339.88,-964.14C339.88,-962.34 308.56,-960.87 270,-960.87 231.44,-960.87 200.12,-962.34 200.12,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="270" y="-943.62" font-family="Arial" font-size="14.00">Store Claude Verdict</text>
</g>
<!-- claude&#45;&gt;store_claude -->
<g id="edge9" class="edge">
<title>claude&#45;&gt;store_claude</title>
<path fill="none" stroke="black" d="M557.61,-1053.75C551.48,-1050.83 545.22,-1048.23 539,-1046.17 458.43,-1019.5 425.95,-1062.95 349,-1027.17 324.79,-1015.91 303.48,-994.09 289.12,-976.59"/>
<polygon fill="black" stroke="black" points="292.14,-974.77 283.2,-969.09 286.65,-979.11 292.14,-974.77"/>
</g>
<!-- store_code -->
<g id="node11" class="node">
<title>store_code</title>
<path fill="#b2dfdb" stroke="black" d="M487.62,-964.14C487.62,-965.95 458.66,-967.42 423,-967.42 387.34,-967.42 358.38,-965.95 358.38,-964.14 358.38,-964.14 358.38,-934.69 358.38,-934.69 358.38,-932.88 387.34,-931.42 423,-931.42 458.66,-931.42 487.62,-932.88 487.62,-934.69 487.62,-934.69 487.62,-964.14 487.62,-964.14"/>
<path fill="none" stroke="black" d="M487.62,-964.14C487.62,-962.34 458.66,-960.87 423,-960.87 387.34,-960.87 358.38,-962.34 358.38,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="423" y="-943.62" font-family="Arial" font-size="14.00">Store Code Verdict</text>
</g>
<!-- code&#45;&gt;store_code -->
<g id="edge10" class="edge">
<title>code&#45;&gt;store_code</title>
<path fill="none" stroke="black" d="M731.81,-1061.18C722.1,-1055.26 711.55,-1049.82 701,-1046.17 614.96,-1016.36 579.06,-1066.63 497,-1027.17 473.78,-1016 453.93,-994.28 440.65,-976.79"/>
<polygon fill="black" stroke="black" points="443.57,-974.85 434.86,-968.82 437.91,-978.97 443.57,-974.85"/>
</g>
<!-- store_gpt_codex -->
<g id="node12" class="node">
<title>store_gpt_codex</title>
<path fill="#b2dfdb" stroke="black" stroke-dasharray="5,2" d="M674.5,-964.14C674.5,-965.95 636.63,-967.42 590,-967.42 543.37,-967.42 505.5,-965.95 505.5,-964.14 505.5,-964.14 505.5,-934.69 505.5,-934.69 505.5,-932.88 543.37,-931.42 590,-931.42 636.63,-931.42 674.5,-932.88 674.5,-934.69 674.5,-934.69 674.5,-964.14 674.5,-964.14"/>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M674.5,-964.14C674.5,-962.34 636.63,-960.87 590,-960.87 543.37,-960.87 505.5,-962.34 505.5,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="590" y="-943.62" font-family="Arial" font-size="14.00">Store GPT&#45;Codex Verdict</text>
</g>
<!-- gpt_codex&#45;&gt;store_gpt_codex -->
<g id="edge11" class="edge">
<title>gpt_codex&#45;&gt;store_gpt_codex</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M871.18,-1053.85C864.85,-1050.91 858.4,-1048.27 852,-1046.17 780.63,-1022.66 753.25,-1056.34 684,-1027.17 656.64,-1015.64 630.91,-993.54 613.31,-976.01"/>
<polygon fill="black" stroke="black" points="615.9,-973.64 606.41,-968.92 610.88,-978.52 615.9,-973.64"/>
</g>
<!-- store_gpt_pro -->
<g id="node13" class="node">
<title>store_gpt_pro</title>
<path fill="#b2dfdb" stroke="black" d="M843.12,-964.14C843.12,-965.95 809.45,-967.42 768,-967.42 726.55,-967.42 692.88,-965.95 692.88,-964.14 692.88,-964.14 692.88,-934.69 692.88,-934.69 692.88,-932.88 726.55,-931.42 768,-931.42 809.45,-931.42 843.12,-932.88 843.12,-934.69 843.12,-934.69 843.12,-964.14 843.12,-964.14"/>
<path fill="none" stroke="black" d="M843.12,-964.14C843.12,-962.34 809.45,-960.87 768,-960.87 726.55,-960.87 692.88,-962.34 692.88,-964.14"/>
<text xml:space="preserve" text-anchor="middle" x="768" y="-943.62" font-family="Arial" font-size="14.00">Store GPT&#45;Pro Verdict</text>
</g>
<!-- gpt_pro&#45;&gt;store_gpt_pro -->
<g id="edge12" class="edge">
<title>gpt_pro&#45;&gt;store_gpt_pro</title>
<path fill="none" stroke="black" d="M1037.58,-1053.68C1032,-1051.07 1026.43,-1048.55 1021,-1046.17 956.14,-1017.76 879.92,-989.6 828.22,-971.25"/>
<polygon fill="black" stroke="black" points="829.59,-968.03 819,-967.99 827.26,-974.63 829.59,-968.03"/>
</g>
<!-- query_artifacts -->
<g id="node14" class="node">
<title>query_artifacts</title>
<polygon fill="#b3e5fc" stroke="black" points="486,-865.67 314,-865.67 314,-797.67 486,-797.67 486,-865.67"/>
<text xml:space="preserve" text-anchor="middle" x="400" y="-848.37" font-family="Arial" font-size="14.00">Query Artifacts</text>
<text xml:space="preserve" text-anchor="middle" x="400" y="-833.37" font-family="Arial" font-size="14.00">• Search local&#45;memory</text>
<text xml:space="preserve" text-anchor="middle" x="400" y="-818.37" font-family="Arial" font-size="14.00">• Filter by spec_id + stage</text>
<text xml:space="preserve" text-anchor="middle" x="400" y="-803.37" font-family="Arial" font-size="14.00">• Collect all verdicts</text>
</g>
<!-- store_gemini&#45;&gt;query_artifacts -->
<g id="edge13" class="edge">
<title>store_gemini&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M169.69,-904.87C176.78,-901.19 183.96,-897.72 191,-894.67 226.49,-879.3 266.94,-866.33 302.75,-856.28"/>
<polygon fill="black" stroke="black" points="303.53,-859.69 312.24,-853.66 301.67,-852.95 303.53,-859.69"/>
</g>
<!-- store_claude&#45;&gt;query_artifacts -->
<g id="edge14" class="edge">
<title>store_claude&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M289.46,-931.09C306.55,-915.88 332.06,-893.16 354.28,-873.38"/>
<polygon fill="black" stroke="black" points="356.33,-876.23 361.48,-866.97 351.68,-871 356.33,-876.23"/>
</g>
<!-- store_code&#45;&gt;query_artifacts -->
<g id="edge15" class="edge">
<title>store_code&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M419.56,-931.09C416.72,-916.81 412.57,-895.93 408.82,-877.07"/>
<polygon fill="black" stroke="black" points="412.29,-876.57 406.91,-867.45 405.43,-877.94 412.29,-876.57"/>
</g>
<!-- store_gpt_codex&#45;&gt;query_artifacts -->
<g id="edge16" class="edge">
<title>store_gpt_codex&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M561.56,-931.09C535.93,-915.47 497.31,-891.95 464.26,-871.81"/>
<polygon fill="black" stroke="black" points="466.31,-868.96 455.95,-866.75 462.66,-874.94 466.31,-868.96"/>
</g>
<!-- store_gpt_pro&#45;&gt;query_artifacts -->
<g id="edge17" class="edge">
<title>store_gpt_pro&#45;&gt;query_artifacts</title>
<path fill="none" stroke="black" d="M745.69,-931.01C729.42,-919.14 706.4,-903.93 684,-894.67 624.44,-870.04 553.63,-854.56 497.62,-845.22"/>
<polygon fill="black" stroke="black" points="498.19,-841.77 487.76,-843.62 497.07,-848.68 498.19,-841.77"/>
</g>
<!-- synthesize_consensus -->
<g id="node15" class="node">
<title>synthesize_consensus</title>
<polygon fill="#81d4fa" stroke="black" points="472.62,-760.67 319.38,-760.67 319.38,-692.67 472.62,-692.67 472.62,-760.67"/>
<text xml:space="preserve" text-anchor="middle" x="396" y="-743.37" font-family="Arial" font-size="14.00">Synthesize Consensus</text>
<text xml:space="preserve" text-anchor="middle" x="396" y="-728.37" font-family="Arial" font-size="14.00">• Parse verdict fields</text>
<text xml:space="preserve" text-anchor="middle" x="396" y="-713.37" font-family="Arial" font-size="14.00">• Compare outputs</text>
<text xml:space="preserve" text-anchor="middle" x="396" y="-698.37" font-family="Arial" font-size="14.00">• Calculate agreement</text>
</g>
<!-- query_artifacts&#45;&gt;synthesize_consensus -->
<g id="edge18" class="edge">
<title>query_artifacts&#45;&gt;synthesize_consensus</title>
<path fill="none" stroke="black" d="M398.7,-797.23C398.39,-789.23 398.05,-780.57 397.73,-772.16"/>
<polygon fill="black" stroke="black" points="401.24,-772.31 397.35,-762.45 394.24,-772.58 401.24,-772.31"/>
</g>
<!-- consensus_type -->
<g id="node16" class="node">
<title>consensus_type</title>
<polygon fill="#ffe082" stroke="black" points="395,-655.67 281.71,-637.67 395,-619.67 508.29,-637.67 395,-655.67"/>
<text xml:space="preserve" text-anchor="middle" x="395" y="-631.87" font-family="Arial" font-size="14.00">Consensus Type?</text>
</g>
<!-- synthesize_consensus&#45;&gt;consensus_type -->
<g id="edge19" class="edge">
<title>synthesize_consensus&#45;&gt;consensus_type</title>
<path fill="none" stroke="black" d="M395.62,-692.28C395.52,-684.01 395.42,-675.22 395.33,-667.2"/>
<polygon fill="black" stroke="black" points="398.83,-667.26 395.21,-657.3 391.83,-667.34 398.83,-667.26"/>
</g>
<!-- unanimous -->
<g id="node17" class="node">
<title>unanimous</title>
<polygon fill="#c8e6c9" stroke="black" points="458,-565.67 316,-565.67 316,-497.67 458,-497.67 458,-565.67"/>
<text xml:space="preserve" text-anchor="middle" x="387" y="-548.37" font-family="Arial" font-size="14.00">Unanimous (3/3)</text>
<text xml:space="preserve" text-anchor="middle" x="387" y="-533.37" font-family="Arial" font-size="14.00">• All agents agree</text>
<text xml:space="preserve" text-anchor="middle" x="387" y="-518.37" font-family="Arial" font-size="14.00">• consensus_ok: true</text>
<text xml:space="preserve" text-anchor="middle" x="387" y="-503.37" font-family="Arial" font-size="14.00">• degraded: false</text>
</g>
<!-- consensus_type&#45;&gt;unanimous -->
<g id="edge20" class="edge">
<title>consensus_type&#45;&gt;unanimous</title>
<path fill="none" stroke="black" d="M393.68,-619.49C392.79,-607.91 391.57,-592.05 390.41,-577.06"/>
<polygon fill="black" stroke="black" points="393.93,-577.06 389.67,-567.36 386.95,-577.6 393.93,-577.06"/>
<text xml:space="preserve" text-anchor="middle" x="412.81" y="-592.17" font-family="Arial" font-size="10.00">3/3 or 4/4</text>
</g>
<!-- majority -->
<g id="node18" class="node">
<title>majority</title>
<polygon fill="#fff9c4" stroke="black" points="298.12,-573.17 141.88,-573.17 141.88,-490.17 298.12,-490.17 298.12,-573.17"/>
<text xml:space="preserve" text-anchor="middle" x="220" y="-555.87" font-family="Arial" font-size="14.00">Majority (2/3)</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-540.87" font-family="Arial" font-size="14.00">• Gemini disagrees OR</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-525.87" font-family="Arial" font-size="14.00">• One agent missing</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-510.87" font-family="Arial" font-size="14.00">• consensus_ok: true</text>
<text xml:space="preserve" text-anchor="middle" x="220" y="-495.87" font-family="Arial" font-size="14.00">• degraded: true</text>
</g>
<!-- consensus_type&#45;&gt;majority -->
<g id="edge21" class="edge">
<title>consensus_type&#45;&gt;majority</title>
<path fill="none" stroke="black" d="M371.76,-622.86C352.88,-611.64 325.11,-595.13 298.46,-579.29"/>
<polygon fill="black" stroke="black" points="300.4,-576.38 290.01,-574.28 296.82,-582.39 300.4,-576.38"/>
<text xml:space="preserve" text-anchor="middle" x="340.15" y="-592.17" font-family="Arial" font-size="10.00">2/3</text>
</g>
<!-- conflict -->
<g id="node19" class="node">
<title>conflict</title>
<polygon fill="#ffcdd2" stroke="black" points="641.62,-565.67 476.38,-565.67 476.38,-497.67 641.62,-497.67 641.62,-565.67"/>
<text xml:space="preserve" text-anchor="middle" x="559" y="-548.37" font-family="Arial" font-size="14.00">Conflict (&lt;2/3)</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-533.37" font-family="Arial" font-size="14.00">• Multiple disagreements</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-518.37" font-family="Arial" font-size="14.00">• consensus_ok: false</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-503.37" font-family="Arial" font-size="14.00">• Requires resolution</text>
</g>
<!-- consensus_type&#45;&gt;conflict -->
<g id="edge22" class="edge">
<title>consensus_type&#45;&gt;conflict</title>
<path fill="none" stroke="black" d="M416.78,-622.86C437.21,-609.9 468.76,-589.89 496.96,-572.01"/>
<polygon fill="black" stroke="black" points="498.52,-575.16 505.09,-566.85 494.77,-569.25 498.52,-575.16"/>
<text xml:space="preserve" text-anchor="middle" x="472.06" y="-592.17" font-family="Arial" font-size="10.00">&lt;2/3</text>
</g>
<!-- degrade_check -->
<g id="node20" class="node">
<title>degrade_check</title>
<polygon fill="#ffe082" stroke="black" points="220,-433.17 143.94,-415.17 220,-397.17 296.06,-415.17 220,-433.17"/>
<text xml:space="preserve" text-anchor="middle" x="220" y="-409.37" font-family="Arial" font-size="14.00">Degraded?</text>
</g>
<!-- unanimous&#45;&gt;degrade_check -->
<g id="edge23" class="edge">
<title>unanimous&#45;&gt;degrade_check</title>
<path fill="none" stroke="black" d="M338.25,-497.24C308.97,-477.17 272.76,-452.34 248.17,-435.48"/>
<polygon fill="black" stroke="black" points="250.2,-432.63 239.97,-429.86 246.24,-438.4 250.2,-432.63"/>
</g>
<!-- majority&#45;&gt;degrade_check -->
<g id="edge24" class="edge">
<title>majority&#45;&gt;degrade_check</title>
<path fill="none" stroke="black" d="M220,-489.98C220,-474.96 220,-458.29 220,-444.59"/>
<polygon fill="black" stroke="black" points="223.5,-444.95 220,-434.95 216.5,-444.95 223.5,-444.95"/>
</g>
<!-- retry_check -->
<g id="node22" class="node">
<title>retry_check</title>
<polygon fill="#ffe082" stroke="black" points="559,-453.17 476.25,-415.17 559,-377.17 641.75,-415.17 559,-453.17"/>
<text xml:space="preserve" text-anchor="middle" x="559" y="-416.87" font-family="Arial" font-size="14.00">Retry</text>
<text xml:space="preserve" text-anchor="middle" x="559" y="-401.87" font-family="Arial" font-size="14.00">Count &lt; 3?</text>
</g>
<!-- conflict&#45;&gt;retry_check -->
<g id="edge28" class="edge">
<title>conflict&#45;&gt;retry_check</title>
<path fill="none" stroke="black" d="M559,-497.24C559,-487.05 559,-475.63 559,-464.66"/>
<polygon fill="black" stroke="black" points="562.5,-464.96 559,-454.96 555.5,-464.96 562.5,-464.96"/>
</g>
<!-- schedule_followup -->
<g id="node21" class="node">
<title>schedule_followup</title>
<polygon fill="#ffab91" stroke="black" points="184.25,-316.58 49.75,-316.58 49.75,-248.58 184.25,-248.58 184.25,-316.58"/>
<text xml:space="preserve" text-anchor="middle" x="117" y="-299.28" font-family="Arial" font-size="14.00">Schedule Follow&#45;up</text>
<text xml:space="preserve" text-anchor="middle" x="117" y="-284.28" font-family="Arial" font-size="14.00">• /speckit.checklist</text>
<text xml:space="preserve" text-anchor="middle" x="117" y="-269.28" font-family="Arial" font-size="14.00">• Review quality</text>
<text xml:space="preserve" text-anchor="middle" x="117" y="-254.28" font-family="Arial" font-size="14.00">• Manual check</text>
</g>
<!-- degrade_check&#45;&gt;schedule_followup -->
<g id="edge26" class="edge">
<title>degrade_check&#45;&gt;schedule_followup</title>
<path fill="none" stroke="black" d="M208.38,-399.44C194.42,-381.74 170.38,-351.26 150.46,-326"/>
<polygon fill="black" stroke="black" points="153.21,-323.84 144.27,-318.16 147.71,-328.17 153.21,-323.84"/>
<text xml:space="preserve" text-anchor="middle" x="182.92" y="-349.67" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- advance_stage -->
<g id="node25" class="node">
<title>advance_stage</title>
<polygon fill="#4db6ac" stroke="black" points="289.12,-197.5 126.88,-197.5 126.88,-114.5 289.12,-114.5 289.12,-197.5"/>
<text xml:space="preserve" text-anchor="middle" x="208" y="-180.2" font-family="Arial" font-size="14.00">Advance to</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-165.2" font-family="Arial" font-size="14.00">Next Stage</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-150.2" font-family="Arial" font-size="14.00">• Reset retry count</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-135.2" font-family="Arial" font-size="14.00">• Increment stage_index</text>
<text xml:space="preserve" text-anchor="middle" x="208" y="-120.2" font-family="Arial" font-size="14.00">• Persist cost summary</text>
</g>
<!-- degrade_check&#45;&gt;advance_stage -->
<g id="edge25" class="edge">
<title>degrade_check&#45;&gt;advance_stage</title>
<path fill="none" stroke="black" d="M219.19,-396.89C217.43,-358.99 213.14,-267.26 210.42,-208.85"/>
<polygon fill="black" stroke="black" points="213.93,-208.97 209.97,-199.14 206.94,-209.3 213.93,-208.97"/>
<text xml:space="preserve" text-anchor="middle" x="222.34" y="-278.33" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- schedule_followup&#45;&gt;advance_stage -->
<g id="edge27" class="edge">
<title>schedule_followup&#45;&gt;advance_stage</title>
<path fill="none" stroke="black" d="M141.39,-248.2C150.71,-235.43 161.56,-220.57 171.77,-206.61"/>
<polygon fill="black" stroke="black" points="174.39,-208.95 177.46,-198.81 168.74,-204.82 174.39,-208.95"/>
</g>
<!-- retry_stage -->
<g id="node23" class="node">
<title>retry_stage</title>
<polygon fill="#ffccbc" stroke="black" points="843.12,-324.08 674.88,-324.08 674.88,-241.08 843.12,-241.08 843.12,-324.08"/>
<text xml:space="preserve" text-anchor="middle" x="759" y="-306.78" font-family="Arial" font-size="14.00">Retry Stage</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-291.78" font-family="Arial" font-size="14.00">• Increment retry_count</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-276.78" font-family="Arial" font-size="14.00">• Add context:</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-261.78" font-family="Arial" font-size="14.00"> &#160;&#39;Previous attempt failed&#39;</text>
<text xml:space="preserve" text-anchor="middle" x="759" y="-246.78" font-family="Arial" font-size="14.00">• Reset to Guardrail</text>
</g>
<!-- retry_check&#45;&gt;retry_stage -->
<g id="edge29" class="edge">
<title>retry_check&#45;&gt;retry_stage</title>
<path fill="none" stroke="black" d="M592.48,-392.31C618.18,-375.52 654.63,-351.73 686.87,-330.68"/>
<polygon fill="black" stroke="black" points="688.55,-333.76 695.01,-325.36 684.72,-327.9 688.55,-333.76"/>
<text xml:space="preserve" text-anchor="middle" x="667.25" y="-349.67" font-family="Arial" font-size="10.00">Yes</text>
</g>
<!-- max_retry -->
<g id="node24" class="node">
<title>max_retry</title>
<ellipse fill="#ef5350" stroke="black" cx="555" cy="-282.58" rx="102" ry="48.08"/>
<text xml:space="preserve" text-anchor="middle" x="555" y="-299.28" font-family="Arial" font-size="14.00">Max Retries</text>
<text xml:space="preserve" text-anchor="middle" x="555" y="-284.28" font-family="Arial" font-size="14.00">Reached</text>
<text xml:space="preserve" text-anchor="middle" x="555" y="-269.28" font-family="Arial" font-size="14.00">• Halt pipeline</text>
<text xml:space="preserve" text-anchor="middle" x="555" y="-254.28" font-family="Arial" font-size="14.00">• Manual intervention</text>
</g>
<!-- retry_check&#45;&gt;max_retry -->
<g id="edge30" class="edge">
<title>retry_check&#45;&gt;max_retry</title>
<path fill="none" stroke="black" d="M557.88,-377.44C557.54,-366.47 557.16,-354.15 556.79,-342.14"/>
<polygon fill="black" stroke="black" points="560.3,-342.17 556.49,-332.29 553.3,-342.39 560.3,-342.17"/>
<text xml:space="preserve" text-anchor="middle" x="563.61" y="-349.67" font-family="Arial" font-size="10.00">No</text>
</g>
<!-- retry_stage&#45;&gt;build_prompt -->
<g id="edge31" class="edge">
<title>retry_stage&#45;&gt;build_prompt</title>
<path fill="none" stroke="black" d="M759,-240.79C759,-230.68 759,-219.71 759,-209.14"/>
<polygon fill="black" stroke="black" points="762.5,-209.4 759,-199.4 755.5,-209.4 762.5,-209.4"/>
</g>
<!-- cost_persist -->
<g id="node26" class="node">
<title>cost_persist</title>
<path fill="none" stroke="black" d="M240,-52C240,-52 176,-52 176,-52 170,-52 164,-46 164,-40 164,-40 164,-28 164,-28 164,-22 170,-16 176,-16 176,-16 240,-16 240,-16 246,-16 252,-22 252,-28 252,-28 252,-40 252,-40 252,-46 246,-52 240,-52"/>
<text xml:space="preserve" text-anchor="middle" x="208" y="-28.2" font-family="Arial" font-size="14.00">cost_persist</text>
</g>
<!-- advance_stage&#45;&gt;cost_persist -->
<g id="edge32" class="edge">
<title>advance_stage&#45;&gt;cost_persist</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M208,-114.04C208,-97.43 208,-78.65 208,-63.57"/>
<polygon fill="black" stroke="black" points="211.5,-63.89 208,-53.89 204.5,-63.89 211.5,-63.89"/>
<text xml:space="preserve" text-anchor="middle" x="223" y="-87" font-family="Arial" font-size="10.00">persist</text>
</g>
<!-- leg_tier2 -->
<g id="node27" class="node">
<title>leg_tier2</title>
<polygon fill="#e3f2fd" stroke="black" points="1480.25,-1122.17 1315.75,-1122.17 1315.75,-1069.17 1480.25,-1069.17 1480.25,-1122.17"/>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-1104.87" font-family="Arial" font-size="14.00">Tier 2&#45;lite: claude + code</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-1089.87" font-family="Arial" font-size="14.00">$0.10&#45;0.35, 5&#45;8 min</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-1074.87" font-family="Arial" font-size="14.00">(checklist)</text>
</g>
<!-- leg_tier2std -->
<g id="node28" class="node">
<title>leg_tier2std</title>
<polygon fill="#fff9c4" stroke="black" points="1552.25,-975.92 1243.75,-975.92 1243.75,-922.92 1552.25,-922.92 1552.25,-975.92"/>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-958.62" font-family="Arial" font-size="14.00">Tier 2: gemini + claude + code/gpt_pro</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-943.62" font-family="Arial" font-size="14.00">$0.40&#45;1.00, 8&#45;12 min</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-928.62" font-family="Arial" font-size="14.00">(new, specify, plan, tasks, validate, audit, unlock)</text>
</g>
<!-- leg_tier2&#45;&gt;leg_tier2std -->
<!-- leg_tier3 -->
<g id="node29" class="node">
<title>leg_tier3</title>
<polygon fill="#ffe0b2" stroke="black" points="1561.25,-858.17 1234.75,-858.17 1234.75,-805.17 1561.25,-805.17 1561.25,-858.17"/>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-840.87" font-family="Arial" font-size="14.00">Tier 3: gemini&#45;25&#45;pro + opus + gpt_codex + gpt_pro</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-825.87" font-family="Arial" font-size="14.00">$2.50, 15&#45;20 min</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-810.87" font-family="Arial" font-size="14.00">(implement only)</text>
</g>
<!-- leg_tier2std&#45;&gt;leg_tier3 -->
<!-- leg_tier4 -->
<g id="node30" class="node">
<title>leg_tier4</title>
<polygon fill="#ffccbc" stroke="black" points="1566.12,-753.17 1229.88,-753.17 1229.88,-700.17 1566.12,-700.17 1566.12,-753.17"/>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-735.87" font-family="Arial" font-size="14.00">Tier 4: flashlite + haiku + gpt_pro + gpt_codex + code</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-720.87" font-family="Arial" font-size="14.00">$5.50&#45;6.60, 75 min</text>
<text xml:space="preserve" text-anchor="middle" x="1398" y="-705.87" font-family="Arial" font-size="14.00">(auto &#45; full pipeline)</text>
</g>
<!-- leg_tier3&#45;&gt;leg_tier4 -->
</g>
</svg>
